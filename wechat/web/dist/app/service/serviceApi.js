define(["app/module"],function(e,t){e.factory("app.serviceApi",["$http","$q",function(e,t){var r={};r.getLoginStatus=function(){return e.get("/wap/user/get-login-status")},r.getUserInfo=function(t){return e({method:"get",url:"/wap/user/get-user-info",params:{id:t}})},r.setMsgDisplay=function(t){return e.get("/wap/message/del",{params:{msgId:t}})},r.getUserAuthStatus=function(t){return e.get("url",{params:{recevice_user_id:t}})},r.getUserMakerRated=function(t){return e.get("url",{params:{recevice_user_id:t}})},r.getMobileIsExist=function(t){return e.get("/wap/user/mobile-is-exist",{params:{mobile:t}})},r.sendCodeMsg=function(t){return e.get("/wap/user/send-code-msg",{params:{mobile:t}})},r.validateCode=function(t){return e.get("/wap/user/validate-code",{params:{code:t}})},r.save=function(t,r){for(var a in r)angular.isString(r[a])&&(r[a]=ar.utf16toEntities(r[a]));return e({method:"POST",url:t,headers:{"Content-Type":"application/json"},params:r})},r.get=function(t,r){return e.get(t,{params:r})},r.getStatus=function(t,r){return e({method:"POST",url:t,headers:{"Content-Type":"application/json"},params:r})},r.wxConfig=function(){var t="http://wechat.baihey.com/wap/site/main";return e({method:"POST",url:"../chat/config",params:{url:t}})},r.list=function(t,r){return e({method:"POST",url:t,params:r})},r.getMessageNumber=function(){return e.get("/wap/message/get-message-sum")},r.getSumFollow=function(){return e.get("/wap/follow/get-sum-follow")};var a=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var r=e.split(",")[0].split(":")[1].split(";")[0],a=new Uint8Array(t.length),n=0;n<t.length;n++)a[n]=t.charCodeAt(n);return new Blob([a],{type:r})};return r.resizeFile=function(e){var r=t.defer(),n=document.createElement("img");try{var s=new FileReader;s.onload=function(e){n.src=e.target.result;var t=document.createElement("canvas"),s=t.getContext("2d");s.drawImage(n,0,0);var i=800,o=800,u=n.width,g=n.height;u>g?u>i&&(g*=i/u,u=i):g>o&&(u*=o/g,g=o),t.width=u,t.height=g;var s=t.getContext("2d");s.drawImage(n,0,0,u,g);var c=t.toDataURL("image/jpeg"),l=a(c);r.resolve(l)},s.readAsDataURL(e)}catch(i){r.resolve(i)}return r.promise},r}])});