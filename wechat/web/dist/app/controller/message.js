define(["app/module","app/directive/directiveApi","app/service/serviceApi","comm"],function(e){e.controller("message.index",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicModal","$ionicActionSheet","$ionicLoading","$location","$ionicListDelegate","dataFilter","$interval","$rootScope",function(e,i,s,t,a,o,r,n,c,d,m,u){s(i.sumSend),i.indexFilter=function(e){return-1==d.data.blacked.indexOf(e)},i.userInfo={},u.$watch("messageList",function(){i.messageList=u.messageList}),i.userInfo.id=ar.getCookie("bhy_user_id"),i.removeItem=function(s,t){angular.element(t.target).parent().parent().addClass("item-remove-animate");var a=ar.getStorage("messageList-"+i.userInfo.id);for(var o in a)if(a[o].other==s.send_user_id){a.splice(o,1);break}return localStorage.removeItem("chat_messageHistory"+s.send_user_id),i.messageList=a,u.messageList=a,ar.setStorage("messageList-"+userId,i.messageList),e.setMsgDisplay(s.other).success(function(e){}),!0}}])});