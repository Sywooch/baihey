define(["app/module","app/service/serviceApi"],function(e){e.controller("Chat",["$scope","app.serviceApi",function(e,n){requirejs(["chat/wechatInterface","chat/chat"],function(s,a){var t=n.wxConfig(s,a);t.success(function(n){s.setConfig(n.config),a.init(e.name)}),e.chatContent=[],e.send=function(){""!=e.message&&null!=e.message&&(e.chatContent.push({nrong:e.message,isSelf:!0}),a.sendMessage(e.message,e.sendName,"send"))},a.onMessageCallback=function(n){var s=JSON.parse(n.data);switch(s.isSelf=!1,s.type){case"send":e.chatContent.push(s)}e.$apply()}})}])});