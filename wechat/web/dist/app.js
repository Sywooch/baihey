function config_heightLink(e){for(var a=[],t=e;260>=t;t++)a.push({id:t,name:t+"厘米"});return a}var ar={currentDate:function(){var e=new Date;return e.getYear(),e.getFullYear(),e.getMonth(),e.getDate(),e.getDay(),e.getTime(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),e.toLocaleDateString(),e.toLocaleString()},currentYmd:function(){var e=new Date;return e.getFullYear()+""+e.getMonth()+e.getDate()},timeStamp:function(){return Date.parse(new Date)/1e3},isWeChat:function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)?!0:!1},validateMobile:function(e){var a=/^1[34578]\d{9}$/;return a.test(e)},getPassByPhone:function(e){return isNaN(e)?e&&11==e.length?e.substring(-6):(alert("手机号格式不正确"),!1):e&&11==e.toString().length?e.toString().substring(e.toString().length,e.toString().length-6):(alert("手机号格式不正确"),!1)},getCookie:function(e){var a,t=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(a=document.cookie.match(t))?unescape(a[2]):null},setCookie:function(e,a,t){var n=t,i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),document.cookie=e+"="+escape(a)+";expires="+i.toGMTString()+";path=/wap"},delCookie:function(e){var a=new Date;a.setTime(a.getTime()-1);var t=this.getCookie(e);null!=t&&(document.cookie=e+"="+t+";expires="+a.toGMTString()+";path=/wap")},cookieUser:function(e){var a=30,t=new Date;t.setTime(t.getTime()+24*a*60*60*1e3),document.cookie="bhy_u_name="+escape(e)+";expires="+t.toGMTString()+";path=/"},trim:function(e){return e=e?e:"",e.replace(/(^\s*)|(\s*$)/g,"")},getQueryString:function(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(a);return null!=t?unescape(t[2]):null},validatePass:function(e){var a=/^\w{6}$/;return a.test(e)},validateMoney:function(e){return/^\d+(\.\d{1,3})?$/.test(e)?!0:!1},msg_file_res_img:function(e){var a=e.name.toLowerCase().substr(e.name.lastIndexOf("."));return".jpg"==a||".png"==a||".bmp"==a||".gif"==a||".jpeg"==a?!0:!1},setStorage:function(e,a){a instanceof Object&&(a=JSON.stringify(a)),window.localStorage?localStorage.setItem(e,a):console.log("浏览器不支持localStorage")},getStorage:function(e){if(window.localStorage){var a=localStorage.getItem(e);return"undefined"!=a?a=JSON.parse(a):!1}console.log("浏览器不支持localStorage")},getId:function(e){var a=0;return a=void 0==e||0==e.length?1:parseInt(e[e.length-1].id)+1},DateTimeToDate:function(e){return"undefined"==typeof e?"":new Date(1e3*(e/1e3+86400)).toISOString().split("T")[0]},timesTampToDate:function(e){var a=new Date(1e3*e);return a.toLocaleString()},dateToTimestamp:function(e){return new Date(e).getTime()/1e3},getAgeByBirthday:function(e){var a=-1,t=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(null==t)return!1;var n=new Date(t[1],t[3]-1,t[4]);if(n.getFullYear()==t[1]&&n.getMonth()+1==t[3]&&n.getDate()==t[4]){var i=(new Date).getFullYear(),o=(new Date).getMonth()+1,r=(new Date).getDate();return a=1*o-1*t[3]<0?1*i-1*t[1]-1:r-t[4]>=0?1*i-1*t[1]:1*i-1*t[1]-1}return a},getZodicByBirthday:function(e){var a=1997,t=new Date(e).getFullYear(),n=[{id:0,name:""}];return x=(a-t)%12,1==x||-11==x?(n.id=1,n.name="鼠"):0==x?(n.id=2,n.name="牛"):11==x||-1==x?(n.id=3,n.name="虎"):10==x||-2==x?(n.id=4,n.name="兔"):9==x||-3==x?(n.id=5,n.name="龙"):8==x||-4==x?(n.id=6,n.name="蛇"):7==x||-5==x?(n.id=7,n.name="马"):6==x||-6==x?(n.id=8,n.name="羊"):5==x||-7==x?(n.id=9,n.name="猴"):4==x||-8==x?(n.id=10,n.name="鸡"):3==x||-9==x?(n.id=11,n.name="狗"):(2==x||-10==x)&&(n.id=12,n.name="猪"),n},getConstellationByBirthday:function(e){var a=new Date(e).getDate(),t=new Date(e).getMonth()+1,n=[{id:0,name:""}];return(1==t&&a>=20||2==t&&18>=a)&&(n.id=1,n.name="水瓶座"),(2==t&&a>=19||3==t&&20>=a)&&(n.id=2,n.name="双鱼座"),(3==t&&a>=21||4==t&&19>=a)&&(n.id=3,n.name="白羊座"),(4==t&&a>=20||5==t&&20>=a)&&(n.id=4,n.name="金牛座"),(5==t&&a>=21||6==t&&21>=a)&&(n.id=5,n.name="双子座"),(6==t&&a>=22||7==t&&22>=a)&&(n.id=6,n.name="巨蟹座"),(7==t&&a>=23||8==t&&22>=a)&&(n.id=7,n.name="狮子座"),(8==t&&a>=23||9==t&&22>=a)&&(n.id=8,n.name="处女座"),(9==t&&a>=23||10==t&&23>=a)&&(n.id=9,n.name="天秤座"),(10==t&&a>=24||11==t&&22>=a)&&(n.id=10,n.name="天蝎座"),(11==t&&a>=23||12==t&&21>=a)&&(n.id=11,n.name="射手座"),(12==t&&a>=22||1==t&&19>=a)&&(n.id=12,n.name="摩羯座"),n},getTimestampByBirthday:function(e){return Math.round(new Date(e.replace(/-/g,"-")).getTime()/1e3)},heightLink:function(e){var a="",t=e,n=260;for(t;n>=t;t++)a+='<option value="',a+=t,a+='">',a+=t,a+="</option>";return a},getObjById:function(e,a){if("0"==a||"null"==a)return"0";for(var t in e)if(e[t].id==a)return e[t]},getArrI:function(arr,name,value){var filed="";for(var i in arr)if(filed=eval("arr[i]."+name),filed==value)return i;return!1},cleanQuotes:function(e){var a=e.replace(/"/g,"");return a},saveDataConfirm:function(e,a){var t=e.confirm({template:a,cancelText:"取消",okText:"确认"});return t},saveDataAlert:function(e,a){e.alert({template:a,okText:"确定"})},weiXinPayCallBack:function(e,a,t){function n(){WeixinJSBridge.invoke("getBrandWCPayRequest",a,function(a){e.get("http://wechat.baihey.com/wap/charge/order-query",{out_trade_no:t},function(a){a=JSON.parse(a),a.trade_state&&"SUCCESS"==a.trade_state?e.get("http://wechat.baihey.com/wap/charge/set-order-status",{orderId:t},function(e){e=JSON.parse(e),e.data?window.location.href="/wap/site/main#/charge_order?orderId="+t+"&payType=5":alert("设置订单状态失败")}):window.location.href="/wap/site/main#/charge_order?orderId="+t+"&payType=5"})})}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n),document.attachEvent("onWeixinJSBridgeReady",n)):n()},initPhotoSwipeFromDOM:function(e,a,t){requirejs(["photoswipe","photoswipe_ui"],function(n,i){for(var o=function(e){for(var e,a,t,n,i=e.childNodes,o=i.length,r=[],s=0;o>s;s++)if(e=i[s],1===e.nodeType&&(a=e.children,0!=a.length&&"/wechat/web/images/addPic.png"!=e.children[0].getAttribute("src"))){t=e.getAttribute("data-size").split("x"),n={src:e.getAttribute("href"),w:parseInt(t[0],10),h:parseInt(t[1],10),author:e.getAttribute("data-author")},n.el=e,a.length>0&&(n.msrc=a[0].getAttribute("src"),a.length>1&&(n.title=a[1].innerHTML));var d=e.getAttribute("data-med");d&&(t=e.getAttribute("data-med-size").split("x"),n.m={src:d,w:parseInt(t[0],10),h:parseInt(t[1],10)}),n.o={src:n.src,w:n.w,h:n.h},r.push(n)}return r},r=function f(e,a){return e&&(a(e)?e:f(e.parentNode,a))},s=function(e){e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1;var a=angular.element(e.target).attr("auth")?angular.element(e.target).attr("auth"):1;if(2==a)return ar.saveDataAlert(t,"暂时无法查看大图，对方已设置关注可看。"),!1;if(3==a)return ar.saveDataAlert(t,"暂时无法查看大图，对方已设置VIP会员可看。"),!1;if(4==a)return ar.saveDataAlert(t,"暂时无法查看大图，对方已设置不公开相册。"),!1;var n=e.target||e.srcElement,i=r(n,function(e){return"A"===e.tagName});if(i){for(var o,s=i.parentNode,d=i.parentNode.childNodes,c=d.length,u=0,m=0;c>m;m++)if(1===d[m].nodeType){if(d[m]===i){o=u;break}u++}return o>=0&&l(o,s),!1}},d=function(){var e=window.location.hash.substring(1),a={};if(e.length<5)return a;for(var t=e.split("&"),n=0;n<t.length;n++)if(t[n]){var i=t[n].split("=");i.length<2||(a[i[0]]=i[1])}return a.gid&&(a.gid=parseInt(a.gid,10)),a},l=function(e,t,r,s){var d,l,c,u=document.querySelectorAll(".pswp")[0];if(c=o(t),l={galleryUID:t.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var a=c[e].el.children[0],t=window.pageYOffset||document.documentElement.scrollTop,n=a.getBoundingClientRect();return{x:n.left,y:n.top+t,w:n.width}},addCaptionHTMLFn:function(e,a,t){return a.children[0].innerHTML="轻触照片退出",a.children[0].style.cssText="text-align:center;font-size:15px;",a.children[0].onclick=function(){d.close()},!0}},s)if(l.galleryPIDs){for(var m=0;m<c.length;m++)if(c[m].pid==e){l.index=m;break}}else l.index=parseInt(e,10)-1;else l.index=parseInt(e,10);if(!isNaN(l.index)){l.mainClass="pswp--minimal--dark",l.barsSize={top:0,bottom:0},l.captionEl=!0,l.fullscreenEl=!1,l.shareEl=!1,l.history=!1,l.bgOpacity=1,l.tapToClose=!0,l.tapToToggleControls=!1,l.closeEl=!1,r&&(l.showAnimationDuration=0),d=new n(u,i,c,l);var p,f,h=!1,g=!0;d.listen("beforeResize",function(){var e=window.devicePixelRatio?window.devicePixelRatio:1;e=Math.min(e,2.5),p=d.viewportSize.x*e,p>=1200||!d.likelyTouchDevice&&p>800||screen.width>1200?h||(h=!0,f=!0):h&&(h=!1,f=!0),f&&!g&&d.invalidateCurrItems(),g&&(g=!1),f=!1}),d.init(),a.$on("$ionicView.beforeLeave",function(){d.close()})}},c=document.querySelectorAll(e),u=0,m=c.length;m>u;u++)c[u].setAttribute("data-pswp-uid",u+1),c[u].onclick=s;var p=d();p.pid&&p.gid&&l(p.pid,c[p.gid-1],!0,!0)})},processData:function(e,a,t,n,i,o){function r(){a.provinceList=provines,a.cityList=citys,a.areaList=area}function s(){a.formData={},a.formData.went_travel=a.userInfo.went_travel?a.userInfo.went_travel.split(","):[],a.isMore=!0,a.typeTab=1,a.domestic=[],a.abroad=[],a.data=[],a.pageSize=1,t.list("/wap/member/went-travel-list",{}).success(function(e){a.data=e.data;for(var t in a.data){for(var n in a.formData.went_travel){if(a.formData.went_travel[n]==a.data[t].id){a.data[t].checked=!0;break}a.data[t].checked=!1}2==a.data[t].type&&0==a.data[t].parentId&&a.domestic.push(a.data[t]),3==a.data[t].type&&0==a.data[t].parentId&&a.abroad.push(a.data[t])}}),a.loadMore=function(e){1==e?a.pageSize==a.domestic.length&&(a.isMore=!1):a.pageSize==a.abroad.length&&(a.isMore=!1),a.pageSize+=1,a.$broadcast("scroll.infiniteScrollComplete")},a.moreDataCanBeLoaded=function(){return a.isMore},a.remove=function(e){for(var t in a.data)if(a.data[t].id==e.id){a.data[t].checked=!1;break}L(e,"went_travel"),o.$getByHandle("small").scrollTop()},a.scrollSmallToBottom=function(e,t){var r=i("filter")(a.data,{checked:!0});return r.length>6?(t.checked=!1,void ar.saveDataAlert(n,"您最多能选择6项！")):void(e.target.checked?(S(t,"went_travel"),o.$getByHandle("small").scrollBottom()):(L(t,"went_travel"),o.$getByHandle("small").scrollTop()))},a.showTab=function(e){a.typeTab=e}}function d(){a.bloodList=config_infoData.blood}function l(){a.carList=config_infoData.car}function c(){a.childrenList=config_infoData.children}function u(){a.formData={},a.formData.like_food=a.userInfo.like_food?a.userInfo.like_food.split(","):[],t.list("/wap/member/config-list",{type:3}).success(function(e){a.foodList=e.data;for(var t in a.foodList)for(var n in a.formData.like_food){if(a.foodList[t].id==a.formData.like_food[n]){a.foodList[t].checked=!0;break}a.foodList[t].checked=!1}}),a.remove=function(e){for(var t in a.foodList)if(a.foodList[t].id==e.id){a.foodList[t].checked=!1;break}L(da,"like_food"),o.$getByHandle("small").scrollTop()},a.scrollSmallToBottom=function(e,t){var r=i("filter")(a.foodList,{checked:!0});return r.length>6?(t.checked=!1,void ar.saveDataAlert(n,"您最多能选择6项！")):void(e.target.checked?(S(t,"like_food"),o.$getByHandle("small").scrollBottom()):(L(t,"like_food"),o.$getByHandle("small").scrollTop()))}}function m(){a.educationList=config_infoData.education}function p(){a.heightList=config_infoData.height}function f(){a.houseList=config_infoData.house}function h(){a.marriageList=config_infoData.marriage}function g(){a.formData={},a.formData.want_film=a.userInfo.want_film?a.userInfo.want_film.split(","):[],t.list("/wap/member/config-list",{type:2}).success(function(e){a.list=e.data;for(var t in a.list)for(var n in a.formData.want_film){if(a.list[t].id==a.formData.want_film[n]){a.list[t].checked=!0;break}a.list[t].checked=!1}}),a.remove=function(e){for(var t in a.list)if(a.list[t].id==e.id){a.list[t].checked=!1;break}L(e,"want_film"),o.$getByHandle("small").scrollTop()},a.scrollSmallToBottom=function(e,t){var r=i("filter")(a.list,{checked:!0});return r.length>6?(t.checked=!1,void ar.saveDataAlert(n,"您最多能选择6项！")):void(e.target.checked?(S(t,"want_film"),o.$getByHandle("small").scrollBottom()):(L(t,"want_film"),o.$getByHandle("small").scrollTop()))}}function v(){a.nationList=config_infoData.nation}function I(){a.occupationList=config_infoData.occupation,a.childrenOccupationList=config_infoData.children_occupation,a.userInfo.info.occupation=a.userInfo.info.occupation?a.userInfo.info.occupation:1,a.userInfo.info.children_occupation=a.userInfo.info.children_occupation?a.userInfo.info.children_occupation:1,a.bodyHeight=document.body.scrollHeight,0==a.bodyHeight&&(a.bodyHeight=window.screen.height),a.scrollStyle={height:a.bodyHeight-44+"px"},a.selected_big=function(e){a.userInfo.info.occupation=e.id,a.userInfo.info.children_occupation=0},a.selected_small=function(e){a.userInfo.info.children_occupation=e.id}}function y(){a.salaryList=config_infoData.salary}function w(){a.formData={},a.formData.love_sport=a.userInfo.love_sport?a.userInfo.love_sport.split(","):[],t.list("/wap/member/config-list",{type:1}).success(function(e){a.sportsList=e.data;for(var t in a.sportsList)for(var n in a.formData.love_sport){if(a.formData.love_sport[n]==a.sportsList[t].id){a.sportsList[t].checked=!0;break}a.sportsList[t].checked=!1}}),a.scrollSmallToBottom=function(e,t){var r=i("filter")(a.sportsList,{checked:!0});return r.length>6?(t.checked=!1,void ar.saveDataAlert(n,"您最多能选择6项！")):void(e.target.checked?(S(t,"love_sport"),o.$getByHandle("small").scrollBottom()):(L(t,"love_sport"),o.$getByHandle("small").scrollTop()))},a.remove=function(e){for(var t in a.sportsList)if(a.sportsList[t].id==e.id){a.sportsList[t].checked=!1;break}L(e,"love_sport"),o.$getByHandle("small").scrollTop()}}function _(){a.formData={},a.formData.want_travel=a.userInfo.want_travel?a.userInfo.want_travel.split(","):[],a.isMore=!0,a.typeTab=1,a.domestic=[],a.abroad=[],a.data=[],a.pageSize=1,t.list("/wap/member/went-travel-list",{}).success(function(e){a.data=e.data;for(var t in a.data){for(var n in a.formData.want_travel){if(a.formData.want_travel[n]==a.data[t].id){a.data[t].checked=!0;break}a.data[t].checked=!1}2==a.data[t].type&&0==a.data[t].parentId&&a.domestic.push(a.data[t]),3==a.data[t].type&&0==a.data[t].parentId&&a.abroad.push(a.data[t])}}),a.loadMore=function(e){1==e?a.pageSize==a.domestic.length&&(a.isMore=!1):a.pageSize==a.abroad.length&&(a.isMore=!1),a.pageSize+=1,a.$broadcast("scroll.infiniteScrollComplete")},a.moreDataCanBeLoaded=function(){return a.isMore},a.remove=function(e){for(var t in a.data)if(a.data[t].id==e.id){a.data[t].checked=!1;break}L(e,"want_travel"),o.$getByHandle("small").scrollTop()},a.scrollSmallToBottom=function(e,t){var r=i("filter")(a.data,{checked:!0});return r.length>6?(t.checked=!1,void ar.saveDataAlert(n,"您最多能选择6项！")):void(e.target.checked?(S(t,"want_travel"),o.$getByHandle("small").scrollBottom()):(L(t,"want_travel"),o.$getByHandle("small").scrollTop()))},a.showTab=function(e){a.typeTab=e}}function $(){a.formData={},a.constellationList=config_infoData.constellation,a.formData.zo_constellation=a.constellationList;for(var e in a.constellationList)for(var t in a.userInfo.info.zo_constellation){if(a.userInfo.info.zo_constellation[t]==a.constellationList[e].id){a.constellationList[e].checked=!0;break}a.constellationList[e].checked=!1}a.maxLength=function(e,t){var o=i("filter")(a.constellationList,{checked:!0});return o.length>3?(t.checked=!1,void ar.saveDataAlert(n,"您最多能选择3项！")):void 0}}function b(){a.formData={},a.marriageList=config_infoData.marriage,a.formData.zo_marriage=a.marriageList;for(var e in a.marriageList)for(var t in a.userInfo.info.zo_marriage){if(a.userInfo.info.zo_marriage[t]==a.marriageList[e].id){a.marriageList[e].checked=!0;break}a.marriageList[e].checked=!1}}function D(){a.formData={},a.zodiacList=config_infoData.zodiac,a.formData.zo_zodiac=a.zodiacList;for(var e in a.zodiacList)for(var t in a.userInfo.info.zo_zodiac){if(a.userInfo.info.zo_zodiac[t]==a.zodiacList[e].id){a.zodiacList[e].checked=!0;break}a.zodiacList[e].checked=!1}a.maxLength=function(e,t){var o=i("filter")(a.zodiacList,{checked:!0});return o.length>6?(t.checked=!1,void ar.saveDataAlert(n,"您最多能选择6项！")):void 0}}function S(e,t){"went_travel"==t&&a.formData.went_travel.push(e.id),"want_travel"==t&&a.formData.want_travel.push(e.id),"love_sport"==t&&a.formData.love_sport.push(e.id),"want_film"==t&&a.formData.want_film.push(e.id),"like_food"==t&&a.formData.like_food.push(e.id)}function L(e,t){if("went_travel"==t)for(var n in a.formData.went_travel)if(a.formData.went_travel[n]==e.id){a.formData.went_travel.splice(n,1);break}if("want_travel"==t)for(var n in a.formData.want_travel)if(a.formData.want_travel[n]==e.id){a.formData.want_travel.splice(n,1);break}if("love_sport"==t)for(var n in a.formData.love_sport)if(a.formData.love_sport[n]==e.id){a.formData.love_sport.splice(n,1);break}if("want_film"==t)for(var n in a.formData.want_film)if(a.formData.want_film[n]==e.id){a.formData.want_film.splice(n,1);break}if("like_food"==t)for(var n in a.formData.like_food)if(a.formData.like_food[n]==e.id){a.formData.like_food.splice(n,1);break}}"address"==e&&r(),"been_address"==e&&s(),"blood"==e&&d(),("car"==e||"zo_car"==e)&&l(),("children"==e||"zo_children"==e)&&c(),"delicacy"==e&&u(),("education"==e||"zo_education"==e)&&m(),"height"==e&&p(),("house"==e||"zo_house"==e)&&f(),"is_marriage"==e&&h(),"movie"==e&&g(),"nation"==e&&v(),"occupation"==e&&I(),"salary"==e&&y(),"sports"==e&&w(),"want_address"==e&&_(),"zo_constellation"==e&&$(),"zo_marriage"==e&&b(),"zo_zodiac"==e&&D()},processParams:function(e,a){if(!a)return!0;if(a.birthday&&(e.userInfo.info.age=a.birthday.getTime()/1e3,e.userInfo.info.zodiac=a.zodiac.id,e.userInfo.info.constellation=a.constellation.id),a.went_travel&&(e.userInfo.went_travel=a.went_travel.join(",")),a.want_travel&&(e.userInfo.want_travel=a.want_travel.join(",")),a.love_sport&&(e.userInfo.love_sport=a.love_sport.join(",")),a.want_film&&(e.userInfo.want_film=a.want_film.join(",")),a.like_food&&(e.userInfo.like_food=a.like_food.join(",")),a.zo_marriage){var t=[];for(var n in a.zo_marriage)a.zo_marriage[n].checked&&t.push(a.zo_marriage[n].id);e.userInfo.info.zo_marriage=t.join(",")}if(a.zo_zodiac){var i=[];for(var n in a.zo_zodiac)a.zo_zodiac[n].checked&&i.push(a.zo_zodiac[n].id);e.userInfo.info.zo_zodiac=i.join(",")}if(a.zo_constellation){var o=[];for(var n in a.zo_constellation)a.zo_constellation[n].checked&&o.push(a.zo_constellation[n].id);e.userInfo.info.zo_constellation=o.join(",")}e.getTravel("went_travel",e.userInfo.went_travel),e.getTravel("want_travel",e.userInfo.want_travel),e.getConfig("love_sport",e.userInfo.love_sport),e.getConfig("want_film",e.userInfo.want_film),e.getConfig("like_food",e.userInfo.like_food)},previewPictureByFileReader:function(e){if("undefined"!=typeof FileReader&&"undefined"!=typeof FormData){var a=new FileReader;a.readAsDataURL(e),a.onload=function(e){return"data:base64"==e.target.result.substr(0,11)?"data:application/octet-stream;"+e.target.result.substr(e.target.result.indexOf("base64,")):e.target.result}}},utf16toEntities:function(e){var a=/[\ud800-\udbff][\udc00-\udfff]/g;return e=e.replace(a,function(e){var a,t,n;return 2===e.length?(a=e.charCodeAt(0),t=e.charCodeAt(1),n=1024*(a-55296)+65536+t-56320,"&#"+n+";"):e})}};define("comm",function(){});var config_infoData={height:config_heightLink(140),marriage:[{id:1,name:"未婚"},{id:2,name:"离异"},{id:3,name:"丧偶"}],education:[{id:1,name:"初中"},{id:2,name:"高中"},{id:3,name:"大专"},{id:4,name:"本科"},{id:5,name:"硕士"},{id:6,name:"博士"}],zodiac:[{id:1,name:"鼠"},{id:2,name:"牛"},{id:3,name:"虎"},{id:4,name:"兔"},{id:5,name:"龙"},{id:6,name:"蛇"},{id:7,name:"马"},{id:8,name:"羊"},{id:9,name:"猴"},{id:10,name:"鸡"},{id:11,name:"狗"},{id:12,name:"猪"}],constellation:[{id:1,name:"水瓶座"},{id:2,name:"双鱼座"},{id:3,name:"白羊座"},{id:4,name:"金牛座"},{id:5,name:"双子座"},{id:6,name:"巨蟹座"},{id:7,name:"狮子座"},{id:8,name:"处女座"},{id:9,name:"天秤座"},{id:10,name:"天蝎座"},{id:11,name:"射手座"},{id:12,name:"摩羯座"}],children_occupation:[{id:1,parentId:1,name:"销售总监"},{id:2,parentId:1,name:"销售经理"},{id:3,parentId:1,name:"销售主管"},{id:4,parentId:1,name:"销售专员"},{id:5,parentId:1,name:"渠道/分销管理"},{id:6,parentId:1,name:"渠道/分销专员"},{id:7,parentId:1,name:"经销商"},{id:8,parentId:1,name:"客户经理"},{id:9,parentId:1,name:"客户代表"},{id:10,parentId:1,name:"其他"},{id:11,parentId:2,name:"IT技术总监"},{id:12,parentId:2,name:"IT技术经理"},{id:13,parentId:2,name:"IT工程师"},{id:14,parentId:2,name:"系统管理员"},{id:15,parentId:2,name:"测试专员"},{id:16,parentId:2,name:"运营管理"},{id:17,parentId:2,name:"网页设计"},{id:18,parentId:2,name:"网站编辑"},{id:19,parentId:2,name:"网站产品经理"},{id:20,parentId:2,name:"其他"},{id:21,parentId:3,name:"客服经理"},{id:22,parentId:3,name:"客服主管"},{id:23,parentId:3,name:"客服专员"},{id:24,parentId:3,name:"客服协调"},{id:25,parentId:3,name:"客服技术支持"},{id:26,parentId:3,name:"其他"},{id:27,parentId:4,name:"大一"},{id:28,parentId:4,name:"大二"},{id:29,parentId:4,name:"大三"},{id:30,parentId:4,name:"大四"},{id:31,parentId:4,name:"读研"},{id:32,parentId:4,name:"读博"},{id:33,parentId:4,name:"其他"},{id:34,parentId:5,name:"通信技术"},{id:35,parentId:5,name:"电子技术"},{id:36,parentId:5,name:"其他"},{id:37,parentId:6,name:"工厂经理"},{id:38,parentId:6,name:"工程师"},{id:39,parentId:6,name:"项目主管"},{id:40,parentId:6,name:"运营经理"},{id:41,parentId:6,name:"运营主管"},{id:42,parentId:6,name:"车间主任"},{id:43,parentId:6,name:"物料管理"},{id:44,parentId:6,name:"生产领班"},{id:45,parentId:6,name:"操作工人"},{id:46,parentId:6,name:"安全管理"},{id:47,parentId:6,name:"其他"},{id:48,parentId:7,name:"物流经理"},{id:49,parentId:7,name:"物流主管"},{id:50,parentId:7,name:"物流专员"},{id:51,parentId:7,name:"仓库经理"},{id:52,parentId:7,name:"仓库管理员"},{id:53,parentId:7,name:"货运代理"},{id:54,parentId:7,name:"集装箱业务"},{id:55,parentId:7,name:"海关事物管理"},{id:56,parentId:7,name:"报单员"},{id:57,parentId:7,name:"快递员"},{id:58,parentId:7,name:"其他"},{id:59,parentId:8,name:"商务经理"},{id:60,parentId:8,name:"商务专员"},{id:61,parentId:8,name:"采购经理"},{id:62,parentId:8,name:"采购专员"},{id:63,parentId:8,name:"外贸经理"},{id:64,parentId:8,name:"外贸专员"},{id:65,parentId:8,name:"业务跟单"},{id:66,parentId:8,name:"报关员"},{id:67,parentId:8,name:"其他"},{id:68,parentId:9,name:"人事总监"},{id:69,parentId:9,name:"人事经理"},{id:70,parentId:9,name:"人事主管"},{id:71,parentId:9,name:"人事专员"},{id:72,parentId:9,name:"招聘经理"},{id:73,parentId:9,name:"招聘专员"},{id:74,parentId:9,name:"培训经理"},{id:75,parentId:9,name:"培训专员"},{id:76,parentId:9,name:"秘书"},{id:77,parentId:9,name:"文员"},{id:78,parentId:9,name:"后勤"},{id:79,parentId:9,name:"其他"},{id:80,parentId:10,name:"总经理"},{id:81,parentId:10,name:"副总经理"},{id:82,parentId:10,name:"合伙人"},{id:83,parentId:10,name:"总监"},{id:84,parentId:10,name:"经理"},{id:85,parentId:10,name:"总裁助理"},{id:86,parentId:10,name:"其他"},{id:87,parentId:11,name:"广告客户经理"},{id:88,parentId:11,name:"广告客户专员"},{id:89,parentId:11,name:"广告设计经理"},{id:90,parentId:11,name:"广告设计专员"},{id:91,parentId:11,name:"广告策划"},{id:92,parentId:11,name:"市场营销经理"},{id:93,parentId:11,name:"市场营销专员"},{id:94,parentId:11,name:"市场策划"},{id:95,parentId:11,name:"市场调研与分析"},{id:96,parentId:11,name:"市场拓展"},{id:97,parentId:11,name:"公关经理"},{id:98,parentId:11,name:"公关专员"},{id:99,parentId:11,name:"媒介经理"},{id:100,parentId:11,name:"媒介专员"},{id:101,parentId:11,name:"品牌经理"},{id:102,parentId:11,name:"品牌专员"},{id:103,parentId:11,name:"其他"},{id:104,parentId:12,name:"主编"},{id:105,parentId:12,name:"编辑"},{id:106,parentId:12,name:"作家"},{id:107,parentId:12,name:"撰稿人"},{id:108,parentId:12,name:"文案策划"},{id:109,parentId:12,name:"出版发行"},{id:110,parentId:12,name:"导演"},{id:111,parentId:12,name:"记者"},{id:112,parentId:12,name:"主持人"},{id:113,parentId:12,name:"演员"},{id:114,parentId:12,name:"模特"},{id:115,parentId:12,name:"经纪人"},{id:116,parentId:12,name:"摄影师"},{id:117,parentId:12,name:"影视后期制作"},{id:118,parentId:12,name:"设计师"},{id:119,parentId:12,name:"画家"},{id:120,parentId:12,name:"音乐家"},{id:121,parentId:12,name:"舞蹈"},{id:122,parentId:12,name:"其他"},{id:123,parentId:13,name:"飞行员"},{id:124,parentId:13,name:"空乘人员"},{id:125,parentId:13,name:"地勤人员"},{id:126,parentId:13,name:"列车司机"},{id:127,parentId:13,name:"乘务员"},{id:128,parentId:13,name:"船长"},{id:129,parentId:13,name:"船员"},{id:130,parentId:13,name:"司机"},{id:131,parentId:13,name:"其他"},{id:132,parentId:14,name:"部门领导"},{id:133,parentId:14,name:"行政人员"},{id:134,parentId:14,name:"法院"},{id:135,parentId:14,name:"公安机关"},{id:136,parentId:14,name:"军人"},{id:137,parentId:14,name:"公务员"},{id:138,parentId:14,name:"其他"},{id:139,parentId:15,name:"教授"},{id:140,parentId:15,name:"讲师/助教"},{id:141,parentId:15,name:"中学教师"},{id:142,parentId:15,name:"小学教师"},{id:143,parentId:15,name:"幼师"},{id:144,parentId:15,name:"教务管理人员"},{id:145,parentId:15,name:"职业技术教师"},{id:146,parentId:15,name:"培训师"},{id:147,parentId:15,name:"科研管理人员"},{id:148,parentId:15,name:"科研人员"},{id:149,parentId:15,name:"其他"},{id:150,parentId:16,name:"餐饮管理"},{id:151,parentId:16,name:"厨师"},{id:152,parentId:16,name:"餐厅服务员"},{id:153,parentId:16,name:"酒店管理"},{id:154,parentId:16,name:"大堂经理"},{id:155,parentId:16,name:"酒店服务员"},{id:156,parentId:16,name:"导游"},{id:157,parentId:16,name:"美容师"},{id:158,parentId:16,name:"健身教练"},{id:159,parentId:16,name:"商场管理"},{id:160,parentId:16,name:"零售店店长"},{id:161,parentId:16,name:"店员"},{id:162,parentId:16,name:"保安经理"},{id:163,parentId:16,name:"保安人员"},{id:164,parentId:16,name:"家政服务"},{id:165,parentId:16,name:"其他"},{id:166,parentId:17,name:"建筑师"},{id:167,parentId:17,name:"工程师"},{id:168,parentId:17,name:"规划师"},{id:169,parentId:17,name:"景观设计"},{id:170,parentId:17,name:"房地产策划"},{id:171,parentId:17,name:"房地产交易"},{id:172,parentId:17,name:"物业管理"},{id:173,parentId:17,name:"其他"},{id:174,parentId:18,name:"律师"},{id:175,parentId:18,name:"律师助理"},{id:176,parentId:18,name:"法务经理"},{id:177,parentId:18,name:"法务专员"},{id:178,parentId:18,name:"知识产权专员"},{id:179,parentId:18,name:"其他"},{id:180,parentId:19,name:"财务总监"},{id:181,parentId:19,name:"财务经理"},{id:182,parentId:19,name:"财务主管"},{id:183,parentId:19,name:"会计"},{id:184,parentId:19,name:"注册会计师"},{id:185,parentId:19,name:"审计师"},{id:186,parentId:19,name:"税务经理"},{id:187,parentId:19,name:"税务专员"},{id:188,parentId:19,name:"成本经理"},{id:189,parentId:19,name:"其他"},{id:190,parentId:20,name:"生物工程"},{id:191,parentId:20,name:"药品生产"},{id:192,parentId:20,name:"临床研究"},{id:193,parentId:20,name:"医疗器械"},{id:194,parentId:20,name:"医药代表"},{id:195,parentId:20,name:"化工工程师"},{id:196,parentId:20,name:"其他"},{id:197,parentId:21,name:"医疗管理"},{id:198,parentId:21,name:"医生"},{id:199,parentId:21,name:"心理医生"},{id:200,parentId:21,name:"药剂师"},{id:201,parentId:21,name:"护士"},{id:202,parentId:21,name:"兽医"},{id:203,parentId:21,name:"其他"},{id:204,parentId:22,name:"投资"},{id:205,parentId:22,name:"保险"},{id:206,parentId:22,name:"金融"},{id:207,parentId:22,name:"银行"},{id:208,parentId:22,name:"证券"},{id:209,parentId:22,name:"其他"},{id:210,parentId:23,name:"专业顾问"},{id:211,parentId:23,name:"咨询经理"},{id:212,parentId:23,name:"咨询师"},{id:213,parentId:23,name:"培训师"},{id:214,parentId:23,name:"其他"}],occupation:[{id:1,name:"销售",icon:"01"},{id:2,name:"计算机/互联网",icon:"03"},{id:3,name:"客户服务",icon:"02"},{id:4,name:"学生",icon:"22"},{id:5,name:"通信/电子",icon:"04"},{id:6,name:"生产/制造",icon:"05"},{id:7,name:"物流/仓储",icon:"06"},{id:8,name:"商贸/采购",icon:"07"},{id:9,name:"人事/行政",icon:"08"},{id:10,name:"高级管理",icon:"09"},{id:11,name:"广告/市场",icon:"10"},{id:12,name:"传媒/艺术",icon:"11"},{id:13,name:"交通运输",icon:"12"},{id:14,name:"政府机构",icon:"13"},{id:15,name:"教育/科研",icon:"13"},{id:16,name:"服务业",icon:"14"},{id:17,name:"建筑/房地产",icon:"15"},{id:18,name:"法律",icon:"16"},{id:19,name:"财会/审计",icon:"17"},{id:20,name:"生物/制药",icon:"18"},{id:21,name:"医疗/护理",icon:"19"},{id:22,name:"金融/银行/保险",icon:"20"},{id:23,name:"咨询/顾问",icon:"21"}],nation:[{id:1,name:"汉族"},{id:2,name:"藏族"},{id:3,name:"朝鲜族"},{id:4,name:"蒙古族"},{id:5,name:"回族"},{id:6,name:"满族"},{id:7,name:"维吾尔族"},{id:8,name:"壮族"},{id:9,name:"彝族"},{id:10,name:"苗族"},{id:11,name:"其他"}],salary:[{id:1,name:"3-5万"},{id:2,name:"6-9万"},{id:3,name:"10-15万"},{id:4,name:"16-25万"},{id:5,name:"100万以上"}],house:[{id:1,name:"已购房"},{id:2,name:"未购房"}],car:[{id:1,name:"已购车"},{id:2,name:"未购车"}],blood:[{id:1,name:"A型"},{id:2,name:"B型"},{id:3,name:"AB型"},{id:4,name:"O型"},{id:5,name:"RH型"}],children:[{id:1,name:"无小孩"},{id:2,name:"有小孩归自己"},{id:3,name:"有小孩归对方"}],feedback:["诽谤辱骂","淫秽色情","血腥暴力","垃圾广告","欺骗（酒托、话费托等骗取行为）","违法行为（涉毒、暴恐、违禁品等）","冒用他人照片","资料不真实"],label:{man:[{name:"颜值高",hot:1},{name:"白富美",hot:0},{name:"逗逼",hot:1},{name:"御姐",hot:0},{name:"萝莉",hot:0},{name:"土豪",hot:0},{name:"女神",hot:0},{name:"吃货",hot:1},{name:"自来熟",hot:1},{name:"御宅族",hot:0},{name:"不限",hot:0}],woman:[{name:"高富帅",hot:0},{name:"长腿欧巴",hot:1},{name:"型男",hot:0},{name:"大叔",hot:0},{name:"土豪",hot:0},{name:"男神",hot:1},{name:"吃货",hot:0},{name:"小鲜肉",hot:1},{name:"逗逼",hot:1},{name:"自来熟",hot:1},{name:"御宅族",hot:0},{name:"暖男",hot:1},{name:"小公举",hot:0},{name:"不限",hot:0}]},sports:[{}]};define("info_data",function(){}),define("app/directive/directiveApi",["app/module"],function(e){e.directive("config",function(){return{restrict:"E",link:function(e,a){console.log(a.html())}}}),e.directive("msdElastic",["$timeout","$window",function(e,a){"use strict";return{require:"ngModel",restrict:"A, C",link:function(t,n,i,o){function r(){var e=g;m=l,y=getComputedStyle(l),angular.forEach(k,function(a){e+=a+":"+y.getPropertyValue(a)+";"}),I.setAttribute("style",e)}function s(){var a,n,i,o,s;m!==l&&r(),p||(p=!0,I.value=l.value+f,I.style.overflowY=l.style.overflowY,a=""===l.style.height?"auto":parseInt(l.style.height,10),n=getComputedStyle(l).getPropertyValue("width"),"px"===n.substr(n.length-2,2)&&(o=parseInt(n,10)-$.width,I.style.width=o+"px"),i=I.scrollHeight,i>L?(i=L,s="scroll"):S>i&&(i=S),i+=$.height,l.style.overflowY=s||"hidden",a!==i&&(t.$emit("elastic:resize",c,a,i),l.style.height=i+"px"),t.$emit("taResize",c),e(function(){p=!1},1,!1))}function d(){p=!1,s()}var l=n[0],c=n;if("TEXTAREA"===l.nodeName&&a.getComputedStyle){c.css({overflow:"hidden","overflow-y":"hidden","word-wrap":"break-word"});var u=l.value;l.value="",l.value=u;var m,p,f=i.msdElastic?i.msdElastic.replace(/\\n/g,"\n"):"",h=angular.element(a),g="position: absolute; top: -999px; right: auto; bottom: auto;left: 0; overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",v=angular.element('<textarea aria-hidden="true" tabindex="-1" style="'+g+'"/>').data("elastic",!0),I=v[0],y=getComputedStyle(l),w=y.getPropertyValue("resize"),_="border-box"===y.getPropertyValue("box-sizing")||"border-box"===y.getPropertyValue("-moz-box-sizing")||"border-box"===y.getPropertyValue("-webkit-box-sizing"),$=_?{width:parseInt(y.getPropertyValue("border-right-width"),10)+parseInt(y.getPropertyValue("padding-right"),10)+parseInt(y.getPropertyValue("padding-left"),10)+parseInt(y.getPropertyValue("border-left-width"),10),height:parseInt(y.getPropertyValue("border-top-width"),10)+parseInt(y.getPropertyValue("padding-top"),10)+parseInt(y.getPropertyValue("padding-bottom"),10)+parseInt(y.getPropertyValue("border-bottom-width"),10)}:{width:0,height:0},b=parseInt(y.getPropertyValue("min-height"),10),D=parseInt(y.getPropertyValue("height"),10),S=Math.max(b,D)-$.height,L=parseInt(y.getPropertyValue("max-height"),10),k=["font-family","font-size","font-weight","font-style","letter-spacing","line-height","text-transform","word-spacing","text-indent"];c.data("elastic")||(L=L&&L>0?L:9e4,I.parentNode!==document.body&&angular.element(document.body).append(I),c.css({resize:"none"===w||"vertical"===w?"none":"horizontal"}).data("elastic",!0),"onpropertychange"in l&&"oninput"in l?l.oninput=l.onkeyup=s:l.oninput=s,h.bind("resize",d),t.$watch(function(){return o.$modelValue},function(e){d()}),t.$on("elastic:adjust",function(){r(),d()}),e(s,0,!1),t.$on("$destroy",function(){v.remove(),h.unbind("resize",d)}))}}}}]),e.directive("resizeFootBar",["$ionicScrollDelegate",function(e){return{replace:!1,link:function(a,t,n,i){a.$on("taResize",function(a,n){if(n){var i=document.body.querySelector("#message-detail-content"),o=e.$getByHandle("messageDetailsScroll"),r=n[0].offsetHeight,s=r+10;s=s>44?s:44,t[0].style.height=s+"px",i.style.bottom=s+"px",o.scrollBottom()}})}}}]),e.directive("showMulti",["$animate",function(e){return{replace:!1,link:function(a,t,n,i){var o=t.parent().parent().parent("#msg_footer_bar"),r=t.parent().parent().parent().next("#multi_con");t.bind("click",function(){e.animate(o,{bottom:r[0].offsetHeight+"px"}),e.animate(r,{bottom:"0"})})}};
}]),e.directive("timer",function(e){function a(a,t,n){var i=e(function(){var e=new Date,a=1e3*n.timer-e.getTime(),i=Math.floor(a/1e3/60/60/24),o=Math.floor(a/1e3/60/60%24),r=Math.floor(a/1e3/60%60),s=Math.floor(a/1e3%60);t.text(i+"天"+o+"时"+r+"分"+s+"秒")},1e3);i.then(function(){},function(){}),a.$on("$destroy",function(a){e.cancel(i)})}return{link:a,scope:!1}}),e.directive("ionSticky",["$ionicPosition","$compile","$timeout",function(e,a,t){return{restrict:"A",require:"^$ionicScroll",link:function(t,n,i,o){var r,s=angular.element(o.element),d=function(e,a){for(var t=e.getElementsByTagName("textarea"),n=a.getElementsByTagName("textarea"),i=e.getElementsByTagName("select"),o=a.getElementsByTagName("select"),r=0,s=t.length;s>r;++r)n[r].value=t[r].value;for(var r=0,s=i.length;s>r;++r)o[r].value=i[r].value},l=function(n){r=n.clone().css({position:"absolute",top:e.position(s).top+"px",left:0,right:0}),i.ionStickyClass=i.ionStickyClass?i.ionStickyClass:"assertive",d(n[0],r[0]),r[0].className+=" "+i.ionStickyClass,r.removeAttr("ng-repeat-start").removeAttr("ng-if"),s.parent().append(r),a(r)(t)},c=function(){r&&r.remove(),r=null};t.$on("$destroy",function(){c(),angular.element(o.element).off("scroll")});var u,m=i.minHeight?i.minHeight:0,p=ionic.throttle(function(){for(var a=null,t=[],i=n[0].getElementsByClassName("item-divider"),o=0;o<i.length;++o)t.push(angular.element(i[o]));for(var o=0;o<t.length;++o)if(e.offset(t[o]).top-t[o].prop("offsetHeight")-m<0&&(o===t.length-1||e.offset(t[o+1]).top-(t[o].prop("offsetHeight")+t[o+1].prop("offsetHeight"))-m>0)){a=t[o][0];break}u!=a&&(c(),u=a,null!=a&&l(angular.element(a)))},200);s.on("scroll",function(e){p()})}}}]),e.directive("clickLike",["$animate","$timeout",function(e,a){return function(e,t,n){t.on("click",function(){t.find("i").next().addClass("anm"),a(function(){t.find("i").next().removeClass("anm")},400)})}}]),e.directive("changeTitle",["$timeout",function(e){return function(a,t,n){function i(a){var t=document.body;document.title=a;var n=angular.element("<iframe style='display:none;' src='/favicon.ico'></iframe>");n.on("load",function(){e(function(){n.off("load").remove()},0)}),angular.element(t).append(n)}i(n.receiveId>9999?n.changeTitle:n.realName),a.$on("$ionicView.beforeLeave",function(){i("嘉瑞百合缘")})}}]),e.directive("lazyload",function(){return{restrict:"EA",replace:!1,link:function(e,a,t){var n=new Image;return n.src=t.lazyload,n.complete?void a.prop("src",n.src):void(n.onload=function(){a.prop("src",n.src)})}}}),e.directive("getImgSize",function(){return{restrict:"EA",link:function(e,a,t){var n=t.getImgSize.replace("thumb","picture");if(n.split(".")[0].split("_")[2])a.attr("data-size",n.split(".")[0].split("_")[1]+"x"+n.split(".")[0].split("_")[2]);else{var i=new Image;i.src=t.getImgSize,i.complete?a.attr("data-size",i.width+"x"+i.height):i.onload=function(){a.attr("data-size",i.width+"x"+i.height),i.onload=null}}}}}),e.directive("ngThumb",["$window",function(e){var a={support:!(!e.FileReader||!e.CanvasRenderingContext2D),isFile:function(a){return angular.isObject(a)&&a instanceof e.File},isImage:function(e){var a="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(a)}};return{restrict:"A",template:"<img />",link:function(e,t,n){function i(e){var a=new Image;a.src=e.target.result,a.complete?r.attr("src",e.target.result):a.onload=function(){r.attr("src",e.target.result),a.onload=null}}if(a.support){var o=e.$eval(n.ngThumb);if(a.isFile(o.file)&&a.isImage(o.file)){var r=t.find("img"),s=new FileReader;s.onload=i,s.readAsDataURL(o.file)}}}}}])}),define("app/controller/user",["app/module","app/directive/directiveApi","app/service/serviceApi"],function(e){return e.controller("User.register",["app.serviceApi","$scope","$ionicPopup","$ionicLoading","$interval","$location","$ionicModal",function(e,a,t,n,i,o,r){function s(){return a.User.sex?ar.validateMobile(a.User.mobile)?!0:(ar.saveDataAlert(t,"请输入正确的手机号码"),!1):(ar.saveDataAlert(t,"请选择您的性别"),!1)}a.User={},a.validate={},a.codeTitle="获取验证码",document.body.scrollHeight>document.documentElement.clientHeight?a.winHeight={height:document.body.scrollHeight+"px"}:a.winHeight={height:document.documentElement.clientHeight+"px"},a.sexToggle=function(e,t){t.stopPropagation(),a.User.sex=e},r.fromTemplateUrl("sendCodeModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.modal=e}),a.openSendCodeModal=function(){a.modal.show()},a.closeSendCodeModal=function(){a.modal.hide()},a.getVerify=function(e){e.target.src="/wap/user/get-verify?time="+ar.timeStamp()},a.getCode=function(){s(),e.getMobileIsExist(a.User.mobile).success(function(e){return e.status<1?(ar.saveDataAlert(t,"该手机号码已存在"),!1):void a.openSendCodeModal()})},a.sendCode=function(){e.get("/wap/user/check-code",{verify_code:a.validate.verify}).success(function(n){if(!n)return ar.saveDataAlert(t,"验证码不正确"),angular.element(document.querySelectorAll("#verify")[0]).attr("src","/wap/user/get-verify?time="+ar.timeStamp()),!1;a.closeSendCodeModal();var o=60,r=i(function(){a.codeTitle="重新获取("+o+")"},1e3,60);r.then(function(){a.codeTitle="获取验证码",i.cancel(r)},function(){ar.saveDataAlert(t,"倒计时出错")},function(){o-=1}),e.sendCodeMsg(a.User.mobile).success(function(e){e.status<1&&(i.cancel(r),ar.saveDataAlert(t,e.msg))})})},a.register=function(){return s()?void e.validateCode(a.User.code).success(function(i){if(!i.status)return ar.saveDataAlert(t,"验证码不正确"),!1;delete a.User.code,n.show({template:"注册中..."});var o=e.save("/wap/user/register",a.User);o.success(function(e){if(n.hide(),1==e.status){ar.setStorage("userInfo",e.data);var i=t.alert({title:"重要提示",template:"您的初始密码为："+ar.getPassByPhone(a.User.mobile)+"，请及时前往个人中心修改您的密码。"});i.then(function(e){top.location.href="/wap/site/main#/index"})}else ar.saveDataAlert(t,e.msg)}).error(function(){n.hide(),ar.saveDataAlert(t,"网络连接错误，请重试！")})}):!1}}]),e.controller("User.login",["app.serviceApi","$scope","$ionicPopup","$location","$ionicLoading",function(e,a,t,n,i){a.User={},a.login=function(){a.validateFrom()&&(i.show({template:"登录中..."}),e.save("/wap/user/login",a.User).success(function(e){i.hide(),e.status?top.location.href="/wap/site/main#/index":ar.saveDataAlert(t,e.msg)}).error(function(){i.hide(),ar.saveDataAlert(t,"网络连接错误，请重试")}))},a.validateFrom=function(){return a.User.username?a.User.password?!0:(ar.saveDataAlert(t,"请输入您的密码"),!1):(ar.saveDataAlert(t,"请输入您的手机号码或ID"),!1)}}]),e.controller("User.forgetpass",["app.serviceApi","$scope","$ionicPopup","$ionicModal","$interval",function(e,a,t,n,i){a.formData={},a.codeBtn="获取验证码",a.validate={},n.fromTemplateUrl("sendCodeModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.modal=e}),a.openSendCodeModal=function(){a.modal.show()},a.closeSendCodeModal=function(){a.modal.hide()},a.getCode=function(){return ar.validateMobile(a.formData.phone)?void e.getMobileIsExist(a.formData.phone).success(function(e){return e.status>0?(ar.saveDataAlert(t,"该手机号码还未注册，请直接注册"),!1):void a.openSendCodeModal()}):(ar.saveDataAlert(t,"请输入正确的手机号码"),!1)},a.sendCode=function(){e.get("/wap/user/check-code",{verify_code:a.validate.verify}).success(function(n){if(!n)return ar.saveDataAlert(t,"验证码不正确"),angular.element(document.querySelectorAll("#verify")[0]).attr("src","/wap/user/get-verify?time="+ar.timeStamp()),!1;a.closeSendCodeModal();var o=60,r=i(function(){a.codeBtn="重新获取("+o+")"},1e3,60);r.then(function(){a.codeBtn="获取验证码",i.cancel(r)},function(){ar.saveDataAlert(t,"倒计时出错")},function(){o-=1}),e.sendCodeMsg(a.formData.phone).success(function(e){e.status<1&&(i.cancel(r),ar.saveDataAlert(t,e.msg))})})},a.next=function(){e.validateCode(a.formData.code).success(function(e){return e.status?void(window.location.href="/wap/user/setpass?mobile="+a.formData.phone):(ar.saveDataAlert(t,"验证码不正确"),!1)})}}]),e.controller("User.setpass",["app.serviceApi","$scope","$ionicPopup",function(e,a,t){a.User={},a.mobile=ar.getQueryString("mobile"),a.User.setpass=function(){if(!ar.validatePass(a.User.password))return ar.saveDataAlert(t,"密码不能少于6位字符"),!1;if(a.User.password!=a.User.repassword)return ar.saveDataAlert(t,"两次输入的密码不一致"),!1;var n=[];n.password=a.User.password,n.phone=a.mobile,e.save("/wap/user/forgot-password",n).success(function(e){e.status?window.location.href="/wap/user/login":ar.saveDataAlert(t,"设置密码失败")}).error(function(){ar.saveDataAlert(t,"网络错误，请稍候再试")})}}]),e}),define("app/filter/filterApi",["app/module"],function(e){function a(e){return Math.floor((ar.timeStamp()-e)/365/24/3600)}var t=function(e,a){if(0==a)return"不限";for(var t in e)if(e[t].id==a)return e[t].name},n=function(e,a){if(!e)return"不限";e+="";var n=e.split(","),i="";for(var o in n)i+=t(a,parseInt(n[o]))+" ";return i};e.filter("timeToAge",function(){return function(e,t,n){return e?a(e)+"岁":""}}),e.filter("sex",function(){return function(e,t,n,i){return e?i&&i>9999?(n=a(n),1==t?e.substr(0,1)+"先生":n>=35?e.substr(0,1)+"女士":e.substr(0,1)+"小姐"):e:void 0}}),e.filter("realName",function(){return function(e,a){return e?e.substr(0,1)+"**":""}}),e.filter("marriage",function(){return function(e,a){if("undefined"!=typeof e&&""!=e){var t=config_infoData.marriage;for(var n in t)if(t[n].id==parseInt(e))return t[n].name}}}),e.filter("education",function(){return function(e,a){if("undefined"!=typeof e&&""!=e){var t=config_infoData.education;for(var n in t)if(t[n].id==parseInt(e))return t[n].name}}}),e.filter("child",function(){return function(e,a){if("undefined"!=typeof e&&""!=e){var t=config_infoData.children;for(var n in t)if(t[n].id==parseInt(e))return t[n].name}}}),e.filter("yearIncome",function(){return function(e,a){if("undefined"!=typeof e&&""!=e){var t=config_infoData.salary;for(var n in t)if(t[n].id==parseInt(e))return t[n].name}}}),e.filter("purchase",function(){return function(e,a){if("undefined"!=typeof e&&""!=e){if(0==e)return"不限";var t=config_infoData.house;for(var n in t)if(t[n].id==parseInt(e))return t[n].name}}}),e.filter("car",function(){return function(e,a){if("undefined"!=typeof e&&""!=e){if(0==e)return"不限";var t=config_infoData.car;for(var n in t)if(t[n].id==parseInt(e))return t[n].name}}}),e.filter("occupation",function(){return function(e,a){var t="";if(e){var n=config_infoData.occupation;for(var i in n)if(n[i].id==e){t=n[i].name;break}if(a){var o=config_infoData.children_occupation;for(var i in o)if(o[i].id==a){t+=" "+o[i].name;break}}return t}return""}}),e.filter("address",function(){return function(e,a,t){var n="";return e&&"0"!=e&&(n+=i(provines,e),a&&"0"!=a&&(n+="-",n+=i(citys,a),t&&"0"!=t&&(n+="-",n+=i(area,t)))),n}});var i=function(e,a){for(var t in e)if(e[t].id==a)return e[t].name};e.filter("zodiac",function(){return function(e,a){if(!e)return"";var t=config_infoData.zodiac;for(var n in t)if(t[n].id==parseInt(e))return"属"+t[n].name}}),e.filter("constellation",function(){return function(e,a){if("undefined"!=typeof e&&""!=e){var t=config_infoData.constellation;for(var n in t)if(t[n].id==parseInt(e))return t[n].name}}}),e.filter("nation",function(){return function(e,a){if("undefined"!=typeof e&&""!=e){var t=config_infoData.nation;for(var n in t)if(t[n].id==parseInt(e))return t[n].name}}}),e.filter("blood",function(){return function(e,a){if("undefined"!=typeof e&&""!=e){var t=config_infoData.blood;for(var n in t)if(t[n].id==parseInt(e))return t[n].name}}}),e.filter("zo_age",function(){return function(e){if(e){var a=e.split("-");return"0"==a[1]?a[0]+"岁以上":e+"岁"}return""}}),e.filter("zo_height",function(){return function(e){if(e){var a=e.split("-");return"0"==a[1]?a[0]+"厘米以上":e+"厘米"}return""}}),e.filter("zo_marriage",function(){return function(e,a){return"undefined"!=typeof e?n(e,config_infoData.marriage):void 0}}),e.filter("zo_children",function(){return function(e,a){return"undefined"!=typeof e?n(e,config_infoData.children):void 0}}),e.filter("zo_zodiac",function(){return function(e,a){return"undefined"!=typeof e&&""!=e?n(e,config_infoData.zodiac):void 0}}),e.filter("zo_constellation",function(){return function(e,a){return"undefined"!=typeof e&&""!=e?n(e,config_infoData.constellation):void 0}}),e.filter("privacy",function(){return function(e,a){switch(e){case"1":return"全部可见";case"2":return"我关注的人可见";case"3":return"vip会员可见";case"4":return"不公开"}}}),e.filter("rend_status",function(){return function(e){switch(e){case"0":return"已删除";case"1":return"显示中";case"2":return"已结束";case"3":return"已关闭";default:return"状态错误"}}}),e.filter("cut",function(){return function(e,a,t,n){if(!e)return"";if(t=parseInt(t,10),!t)return e;if(e.length<=t)return e;if(e=e.substr(0,t),a){var i=e.lastIndexOf(" ");-1!=i&&(e=e.substr(0,i))}return e+(n||" …")}}),e.filter("briMessage",function(){return function(e){if("undefined"!=typeof e&&""!=e){e=e.replace(/&quot;/g,'"');var a=JSON.parse(e);return a.bri_message}}}),e.filter("sexDisplay",function(){return function(e){return 0==e?"女生":1==e?"男生":"不限"}}),e.filter("themeDisplay",function(){return function(e){switch(e){case 1:return"娱乐";case 2:return"美食";case 3:return"旅游";case 4:return"运动健身";default:return"其他"}}}),e.filter("feeDisplay",function(){return function(e){return 1==e?"免费":3==e?"你请客":2==e?"我请客":4==e?"AA制":void 0}}),e.filter("unix",function(){return function(e){}}),e.filter("picture",function(){return function(e){return e?e.replace("thumb","picture"):" "}}),e.filter("height",function(){return function(e){return parseInt(e)?e+"cm":""}}),e.filter("bank",["$sce",function(e){return function(a,t){return a?"name"==t?a.split("-")[0]:"type"==t?a.split("-")[1]:"card"==t?a.substring(a.length-4,a.length):a:e.trustAsHtml('<img src="/wechat/web/images/loading.gif">')}}]),e.filter("withdrawStatusTitle",function(){return function(e){return e?1==e?"已打款":2==e?"处理中":"失败":"失败"}}),e.filter("amount",function(){return function(e){var a=0;if(e){for(var t in e)a+=parseInt(e[t].money);return a/100}return a}}),e.filter("isNull",function(){return function(e){return e?e:" "}}),e.filter("recordName",function(){return function(e,a){if("提现"==a){var t=e.split("-");return t[0]+"("+t[1]+" "+t[2].substr(t[2].length-4)+")"}return"嘉瑞红包"==a?ar.cleanQuotes(e):e}}),e.filter("recordStatus",function(){return function(e,a){return"提现"==a?"已打款":"嘉瑞红包"==a?"对方已领取":e}}),e.filter("cut",function(){return function(e,a,t,n){if(!e)return"";if(t=parseInt(t,10),!t)return e;if(e.length<=t)return e;if(e=e.substr(0,t),a){var i=e.lastIndexOf(" ");-1!=i&&(e=e.substr(0,i))}return e+(n||" …")}}),e.filter("messageFilter",function(){return function(e){return e&&-1!=e.indexOf("/images/upload")?"[图片]":e}}),e.filter("level",function(){return function(e){return 1==e?"VIP":2==e?"贵宾":3==e?"钻石":e}})});var provines=[{id:"1",name:"重庆",parentId:"0",relation:"0"},{id:"44",name:"北京",parentId:"0",relation:"0"},{id:"65",name:"上海",parentId:"0",relation:"0"},{id:"87",name:"天津",parentId:"0",relation:"0"},{id:"108",name:"广东",parentId:"0",relation:"0"},{id:"271",name:"辽宁",parentId:"0",relation:"0"},{id:"401",name:"江苏",parentId:"0",relation:"0"},{id:"535",name:"湖北",parentId:"0",relation:"0"},{id:"665",name:"四川",parentId:"0",relation:"0"},{id:"890",name:"陕西",parentId:"0",relation:"0"},{id:"1019",name:"河北",parentId:"0",relation:"0"},{id:"1215",name:"山西",parentId:"0",relation:"0"},{id:"1358",name:"河南",parentId:"0",relation:"0"},{id:"1555",name:"吉林",parentId:"0",relation:"0"},{id:"1635",name:"黑龙江",parentId:"0",relation:"0"},{id:"1792",name:"内蒙古",parentId:"0",relation:"0"},{id:"1919",name:"山东",parentId:"0",relation:"0"},{id:"2095",name:"安徽",parentId:"0",relation:"0"},{id:"2236",name:"浙江",parentId:"0",relation:"0"},{id:"2350",name:"福建",parentId:"0",relation:"0"},{id:"2455",name:"湖南",parentId:"0",relation:"0"},{id:"2607",name:"广西",parentId:"0",relation:"0"},{id:"2746",name:"江西",parentId:"0",relation:"0"},{id:"2869",name:"贵州",parentId:"0",relation:"0"},{id:"2977",name:"云南",parentId:"0",relation:"0"},{id:"3140",name:"西藏",parentId:"0",relation:"0"},{id:"3229",name:"海南",parentId:"0",relation:"0"},{id:"3256",name:"甘肃",parentId:"0",relation:"0"},{id:"3373",name:"宁夏",parentId:"0",relation:"0"},{id:"3406",name:"青海",parentId:"0",relation:"0"},{id:"3467",name:"新疆",parentId:"0",relation:"0"},{id:"3580",name:"香港",parentId:"0",relation:"0"},{id:"3600",name:"澳门",parentId:"0",relation:"0"},{id:"3610",name:"台湾",parentId:"0",relation:"0"},{id:"3635",name:"海外",parentId:"0",relation:"0"}],citys=[{id:"2",name:"重庆",parentId:"1",relation:"0,1"},{id:"45",name:"北京",parentId:"44",relation:"0,44"},{id:"66",name:"上海",parentId:"65",relation:"0,65"},{id:"88",name:"天津",parentId:"87",relation:"0,87"},{id:"109",name:"广州",parentId:"108",relation:"0,108"},{id:"123",name:"深圳",parentId:"108",relation:"0,108"},{id:"131",name:"珠海",parentId:"108",relation:"0,108"},{id:"136",name:"汕头",parentId:"108",relation:"0,108"},{id:"145",name:"韶关",parentId:"108",relation:"0,108"},{id:"157",name:"佛山",parentId:"108",relation:"0,108"},{id:"164",name:"江门",parentId:"108",relation:"0,108"},{id:"173",name:"湛江",parentId:"108",relation:"0,108"},{id:"184",name:"茂名",parentId:"108",relation:"0,108"},{id:"192",name:"肇庆",parentId:"108",relation:"0,108"},{id:"202",name:"惠州",parentId:"108",relation:"0,108"},{id:"209",name:"梅州",parentId:"108",relation:"0,108"},{id:"219",name:"汕尾",parentId:"108",relation:"0,108"},{id:"225",name:"河源",parentId:"108",relation:"0,108"},{id:"233",name:"阳江",parentId:"108",relation:"0,108"},{id:"239",name:"清远",parentId:"108",relation:"0,108"},{id:"249",name:"东莞",parentId:"108",relation:"0,108"},{id:"250",name:"中山",parentId:"108",relation:"0,108"},{id:"251",name:"潮州",parentId:"108",relation:"0,108"},{id:"256",name:"揭阳",parentId:"108",relation:"0,108"},{id:"263",name:"云浮",parentId:"108",relation:"0,108"},{id:"270",name:"其他",parentId:"108",relation:"0,108"},{id:"272",name:"沈阳",parentId:"271",relation:"0,271"},{id:"287",name:"大连",parentId:"271",relation:"0,271"},{id:"299",name:"鞍山",parentId:"271",relation:"0,271"},{id:"308",name:"抚顺",parentId:"271",relation:"0,271"},{id:"317",name:"本溪",parentId:"271",relation:"0,271"},{id:"325",name:"丹东",parentId:"271",relation:"0,271"},{id:"333",name:"锦州",parentId:"271",relation:"0,271"},{id:"342",name:"营口",parentId:"271",relation:"0,271"},{id:"350",name:"阜新",parentId:"271",relation:"0,271"},{id:"359",name:"辽阳",parentId:"271",relation:"0,271"},{id:"368",name:"盘锦",parentId:"271",relation:"0,271"},{id:"374",name:"铁岭",parentId:"271",relation:"0,271"},{id:"383",name:"朝阳",parentId:"271",relation:"0,271"},{id:"392",name:"葫芦岛",parentId:"271",relation:"0,271"},{id:"400",name:"其他",parentId:"271",relation:"0,271"},{id:"402",name:"南京",parentId:"401",relation:"0,401"},{id:"417",name:"苏州",parentId:"401",relation:"0,401"},{id:"430",name:"无锡",parentId:"401",relation:"0,401"},{id:"440",name:"常州",parentId:"401",relation:"0,401"},{id:"449",name:"镇江",parentId:"401",relation:"0,401"},{id:"457",name:"南通",parentId:"401",relation:"0,401"},{id:"467",name:"泰州",parentId:"401",relation:"0,401"},{id:"475",name:"扬州",parentId:"401",relation:"0,401"},{id:"484",name:"盐城",parentId:"401",relation:"0,401"},{id:"495",name:"连云港",parentId:"401",relation:"0,401"},{id:"504",name:"徐州",parentId:"401",relation:"0,401"},{id:"517",name:"淮安",parentId:"401",relation:"0,401"},{id:"527",name:"宿迁",parentId:"401",relation:"0,401"},{id:"534",name:"其他",parentId:"401",relation:"0,401"},{id:"536",name:"武汉",parentId:"535",relation:"0,535"},{id:"551",name:"黄石",parentId:"535",relation:"0,535"},{id:"559",name:"十堰",parentId:"535",relation:"0,535"},{id:"569",name:"荆州",parentId:"535",relation:"0,535"},{id:"579",name:"宜昌",parentId:"535",relation:"0,535"},{id:"594",name:"襄樊",parentId:"535",relation:"0,535"},{id:"605",name:"鄂州",parentId:"535",relation:"0,535"},{id:"610",name:"荆门",parentId:"535",relation:"0,535"},{id:"617",name:"孝感",parentId:"535",relation:"0,535"},{id:"626",name:"黄冈",parentId:"535",relation:"0,535"},{id:"638",name:"咸宁",parentId:"535",relation:"0,535"},{id:"646",name:"随州",parentId:"535",relation:"0,535"},{id:"650",name:"恩施土家族苗族自治州",parentId:"535",relation:"0,535"},{id:"660",name:"仙桃",parentId:"535",relation:"0,535"},{id:"661",name:"天门",parentId:"535",relation:"0,535"},{id:"662",name:"潜江",parentId:"535",relation:"0,535"},{id:"663",name:"神农架林区",parentId:"535",relation:"0,535"},{id:"664",name:"其他",parentId:"535",relation:"0,535"},{id:"666",name:"成都",parentId:"665",relation:"0,665"},{id:"687",name:"自贡",parentId:"665",relation:"0,665"},{id:"695",name:"攀枝花",parentId:"665",relation:"0,665"},{id:"702",name:"泸州",parentId:"665",relation:"0,665"},{id:"711",name:"德阳",parentId:"665",relation:"0,665"},{id:"719",name:"绵阳",parentId:"665",relation:"0,665"},{id:"730",name:"广元",parentId:"665",relation:"0,665"},{id:"739",name:"遂宁",parentId:"665",relation:"0,665"},{id:"746",name:"内江",parentId:"665",relation:"0,665"},{id:"753",name:"乐山",parentId:"665",relation:"0,665"},{id:"766",name:"南充",parentId:"665",relation:"0,665"},{id:"777",name:"眉山",parentId:"665",relation:"0,665"},{id:"785",name:"宜宾",parentId:"665",relation:"0,665"},{id:"797",name:"广安",parentId:"665",relation:"0,665"},{id:"804",name:"达州",parentId:"665",relation:"0,665"},{id:"813",name:"雅安",parentId:"665",relation:"0,665"},{id:"823",name:"巴中",parentId:"665",relation:"0,665"},{id:"829",name:"资阳",parentId:"665",relation:"0,665"},{id:"835",name:"阿坝藏族羌族自治州",parentId:"665",relation:"0,665"},{id:"850",name:"甘孜藏族自治州",parentId:"665",relation:"0,665"},{id:"870",name:"凉山彝族自治州",parentId:"665",relation:"0,665"},{id:"889",name:"其他",parentId:"665",relation:"0,665"},{id:"891",name:"西安",parentId:"890",relation:"0,890"},{id:"906",name:"铜川",parentId:"890",relation:"0,890"},{id:"912",name:"宝鸡",parentId:"890",relation:"0,890"},{id:"926",name:"咸阳",parentId:"890",relation:"0,890"},{id:"942",name:"渭南",parentId:"890",relation:"0,890"},{id:"955",name:"延安",parentId:"890",relation:"0,890"},{id:"970",name:"汉中",parentId:"890",relation:"0,890"},{id:"983",name:"榆林",parentId:"890",relation:"0,890"},{id:"997",name:"安康",parentId:"890",relation:"0,890"},{id:"1009",name:"商洛",parentId:"890",relation:"0,890"},{id:"1018",name:"其他",parentId:"890",relation:"0,890"},{id:"1020",name:"石家庄",parentId:"1019",relation:"0,1019"},{id:"1045",name:"唐山",parentId:"1019",relation:"0,1019"},{id:"1061",name:"秦皇岛",parentId:"1019",relation:"0,1019"},{id:"1070",name:"邯郸",parentId:"1019",relation:"0,1019"},{id:"1091",name:"邢台",parentId:"1019",relation:"0,1019"},{id:"1112",name:"保定",parentId:"1019",relation:"0,1019"},{id:"1139",name:"张家口",parentId:"1019",relation:"0,1019"},{id:"1158",name:"承德",parentId:"1019",relation:"0,1019"},{id:"1171",name:"沧州",parentId:"1019",relation:"0,1019"},{id:"1189",name:"廊坊",parentId:"1019",relation:"0,1019"},{id:"1201",name:"衡水",parentId:"1019",relation:"0,1019"},{id:"1214",name:"其他",parentId:"1019",relation:"0,1019"},{id:"1216",name:"太原",parentId:"1215",relation:"0,1215"},{id:"1228",name:"大同",parentId:"1215",relation:"0,1215"},{id:"1241",name:"阳泉",parentId:"1215",relation:"0,1215"},{id:"1248",name:"长治",parentId:"1215",relation:"0,1215"},{id:"1263",name:"晋城",parentId:"1215",relation:"0,1215"},{id:"1271",name:"朔州",parentId:"1215",relation:"0,1215"},{id:"1279",name:"晋中",parentId:"1215",relation:"0,1215"},{id:"1292",name:"运城",parentId:"1215",relation:"0,1215"},{id:"1307",name:"忻州",parentId:"1215",relation:"0,1215"},{id:"1323",name:"临汾",parentId:"1215",relation:"0,1215"},{id:"1342",name:"吕梁",parentId:"1215",relation:"0,1215"},{id:"1357",name:"其他",parentId:"1215",relation:"0,1215"},{id:"1359",name:"郑州",parentId:"1358",relation:"0,1358"},{id:"1373",name:"开封",parentId:"1358",relation:"0,1358"},{id:"1385",name:"洛阳",parentId:"1358",relation:"0,1358"},{id:"1402",name:"平顶山",parentId:"1358",relation:"0,1358"},{id:"1414",name:"安阳",parentId:"1358",relation:"0,1358"},{id:"1425",name:"鹤壁",parentId:"1358",relation:"0,1358"},{id:"1432",name:"新乡",parentId:"1358",relation:"0,1358"},{id:"1446",name:"焦作",parentId:"1358",relation:"0,1358"},{id:"1458",name:"濮阳",parentId:"1358",relation:"0,1358"},{id:"1466",name:"许昌",parentId:"1358",relation:"0,1358"},{id:"1474",name:"漯河",parentId:"1358",relation:"0,1358"},{id:"1481",name:"三门峡",parentId:"1358",relation:"0,1358"},{id:"1489",name:"南阳",parentId:"1358",relation:"0,1358"},{id:"1504",name:"商丘",parentId:"1358",relation:"0,1358"},{id:"1515",name:"信阳",parentId:"1358",relation:"0,1358"},{id:"1527",name:"周口",parentId:"1358",relation:"0,1358"},{id:"1539",name:"驻马店",parentId:"1358",relation:"0,1358"},{id:"1551",name:"焦作",parentId:"1358",relation:"0,1358"},{id:"1554",name:"其他",parentId:"1358",relation:"0,1358"},{id:"1556",name:"长春",parentId:"1555",relation:"0,1555"},{id:"1568",name:"吉林",parentId:"1555",relation:"0,1555"},{id:"1579",name:"四平",parentId:"1555",relation:"0,1555"},{id:"1587",name:"辽源",parentId:"1555",relation:"0,1555"},{id:"1593",name:"通化",parentId:"1555",relation:"0,1555"},{id:"1602",name:"白山",parentId:"1555",relation:"0,1555"},{id:"1610",name:"松原",parentId:"1555",relation:"0,1555"},{id:"1617",name:"白城",parentId:"1555",relation:"0,1555"},{id:"1624",name:"延边朝鲜族自治州",parentId:"1555",relation:"0,1555"},{id:"1634",name:"其他",parentId:"1555",relation:"0,1555"},{id:"1636",name:"哈尔滨",parentId:"1635",relation:"0,1635"},{id:"1656",name:"齐齐哈尔",parentId:"1635",relation:"0,1635"},{id:"1674",name:"鹤岗",parentId:"1635",relation:"0,1635"},{id:"1684",name:"双鸭山",parentId:"1635",relation:"0,1635"},{id:"1694",name:"鸡西",parentId:"1635",relation:"0,1635"},{id:"1705",name:"大庆",parentId:"1635",relation:"0,1635"},{id:"1716",name:"伊春",parentId:"1635",relation:"0,1635"},{id:"1735",name:"牡丹江",parentId:"1635",relation:"0,1635"},{id:"1747",name:"佳木斯",parentId:"1635",relation:"0,1635"},{id:"1759",name:"七台河",parentId:"1635",relation:"0,1635"},{id:"1765",name:"黑河",parentId:"1635",relation:"0,1635"},{id:"1773",name:"绥化",parentId:"1635",relation:"0,1635"},{id:"1785",name:"大兴安岭地区",parentId:"1635",relation:"0,1635"},{id:"1791",name:"其他",parentId:"1635",relation:"0,1635"},{id:"1793",name:"呼和浩特",parentId:"1792",relation:"0,1792"},{id:"1804",name:"包头",parentId:"1792",relation:"0,1792"},{id:"1815",name:"乌海",parentId:"1792",relation:"0,1792"},{id:"1820",name:"赤峰",parentId:"1792",relation:"0,1792"},{id:"1834",name:"通辽",parentId:"1792",relation:"0,1792"},{id:"1844",name:"鄂尔多斯",parentId:"1792",relation:"0,1792"},{id:"1854",name:"呼伦贝尔",parentId:"1792",relation:"0,1792"},{id:"1869",name:"巴彦淖尔",parentId:"1792",relation:"0,1792"},{id:"1878",name:"乌兰察布",parentId:"1792",relation:"0,1792"},{id:"1891",name:"锡林郭勒盟",parentId:"1792",relation:"0,1792"},{id:"1905",name:"兴安盟",parentId:"1792",relation:"0,1792"},{id:"1913",name:"阿拉善盟",parentId:"1792",relation:"0,1792"},{id:"1918",name:"其他",parentId:"1792",relation:"0,1792"},{id:"1920",name:"济南",parentId:"1919",relation:"0,1919"},{id:"1932",name:"青岛",parentId:"1919",relation:"0,1919"},{id:"1946",name:"淄博",parentId:"1919",relation:"0,1919"},{id:"1956",name:"枣庄",parentId:"1919",relation:"0,1919"},{id:"1964",name:"东营",parentId:"1919",relation:"0,1919"},{id:"1971",name:"烟台",parentId:"1919",relation:"0,1919"},{id:"1985",name:"潍坊",parentId:"1919",relation:"0,1919"},{id:"1999",name:"济宁",parentId:"1919",relation:"0,1919"},{id:"2013",name:"泰安",parentId:"1919",relation:"0,1919"},{id:"2021",name:"威海",parentId:"1919",relation:"0,1919"},{id:"2027",name:"日照",parentId:"1919",relation:"0,1919"},{id:"2033",name:"莱芜",parentId:"1919",relation:"0,1919"},{id:"2037",name:"临沂",parentId:"1919",relation:"0,1919"},{id:"2051",name:"德州",parentId:"1919",relation:"0,1919"},{id:"2064",name:"聊城",parentId:"1919",relation:"0,1919"},{id:"2074",name:"滨州",parentId:"1919",relation:"0,1919"},{id:"2083",name:"菏泽",parentId:"1919",relation:"0,1919"},{id:"2094",name:"其他",parentId:"1919",relation:"0,1919"},{id:"2096",name:"合肥",parentId:"2095",relation:"0,2095"},{id:"2105",name:"芜湖",parentId:"2095",relation:"0,2095"},{id:"2114",name:"蚌埠",parentId:"2095",relation:"0,2095"},{id:"2123",name:"淮南",parentId:"2095",relation:"0,2095"},{id:"2131",name:"马鞍山",parentId:"2095",relation:"0,2095"},{id:"2137",name:"淮北",parentId:"2095",relation:"0,2095"},{id:"2143",name:"铜陵",parentId:"2095",relation:"0,2095"},{id:"2149",name:"安庆",parentId:"2095",relation:"0,2095"},{id:"2162",name:"黄山",parentId:"2095",relation:"0,2095"},{id:"2171",name:"滁州",parentId:"2095",relation:"0,2095"},{id:"2181",name:"阜阳",parentId:"2095",relation:"0,2095"},{id:"2191",name:"宿州",parentId:"2095",relation:"0,2095"},{id:"2198",name:"巢湖",parentId:"2095",relation:"0,2095"},{id:"2205",name:"六安",parentId:"2095",relation:"0,2095"},{id:"2214",name:"亳州",parentId:"2095",relation:"0,2095"},{id:"2220",name:"池州",parentId:"2095",relation:"0,2095"},{id:"2226",name:"宣城",parentId:"2095",relation:"0,2095"},{id:"2235",name:"其他",parentId:"2095",relation:"0,2095"},{id:"2237",name:"杭州",parentId:"2236",relation:"0,2236"},{id:"2252",name:"宁波",parentId:"2236",relation:"0,2236"},{id:"2265",name:"温州",parentId:"2236",relation:"0,2236"},{id:"2278",name:"嘉兴",parentId:"2236",relation:"0,2236"},{id:"2287",name:"湖州",parentId:"2236",relation:"0,2236"},{id:"2294",name:"绍兴",parentId:"2236",relation:"0,2236"},{id:"2302",name:"金华",parentId:"2236",relation:"0,2236"},{id:"2313",name:"衢州",parentId:"2236",relation:"0,2236"},{id:"2321",name:"舟山",parentId:"2236",relation:"0,2236"},{id:"2327",name:"台州",parentId:"2236",relation:"0,2236"},{id:"2338",name:"丽水",parentId:"2236",relation:"0,2236"},{id:"2349",name:"其他",parentId:"2236",relation:"0,2236"},{id:"2351",name:"福州",parentId:"2350",relation:"0,2350"},{id:"2366",name:"厦门",parentId:"2350",relation:"0,2350"},{id:"2374",name:"莆田",parentId:"2350",relation:"0,2350"},{id:"2381",name:"三明",parentId:"2350",relation:"0,2350"},{id:"2395",name:"泉州",parentId:"2350",relation:"0,2350"},{id:"2409",name:"漳州",parentId:"2350",relation:"0,2350"},{id:"2422",name:"南平",parentId:"2350",relation:"0,2350"},{id:"2434",name:"龙岩",parentId:"2350",relation:"0,2350"},{id:"2443",name:"宁德",parentId:"2350",relation:"0,2350"},{id:"2454",name:"其他",parentId:"2350",relation:"0,2350"},{id:"2456",name:"长沙",parentId:"2455",relation:"0,2455"},{id:"2467",name:"株洲",parentId:"2455",relation:"0,2455"},{id:"2478",name:"湘潭",parentId:"2455",relation:"0,2455"},{id:"2485",name:"衡阳",parentId:"2455",relation:"0,2455"},{id:"2499",name:"邵阳",parentId:"2455",relation:"0,2455"},{id:"2513",name:"岳阳",parentId:"2455",relation:"0,2455"},{id:"2524",name:"常德",parentId:"2455",relation:"0,2455"},{id:"2535",name:"张家界",parentId:"2455",relation:"0,2455"},{id:"2541",name:"益阳",parentId:"2455",relation:"0,2455"},{id:"2549",name:"郴州",parentId:"2455",relation:"0,2455"},{id:"2562",name:"永州",parentId:"2455",relation:"0,2455"},{id:"2575",name:"怀化",parentId:"2455",relation:"0,2455"},{id:"2589",name:"娄底",parentId:"2455",relation:"0,2455"},{id:"2596",name:"湘西土家族苗族自治州",parentId:"2455",relation:"0,2455"},{id:"2606",name:"其他",parentId:"2455",relation:"0,2455"},{id:"2608",name:"南宁",parentId:"2607",relation:"0,2607"},{id:"2622",name:"柳州",parentId:"2607",relation:"0,2607"},{id:"2634",name:"桂林",parentId:"2607",relation:"0,2607"},{id:"2653",name:"梧州",parentId:"2607",relation:"0,2607"},{id:"2662",name:"北海",parentId:"2607",relation:"0,2607"},{id:"2668",name:"防城港",parentId:"2607",relation:"0,2607"},{id:"2674",name:"钦州",parentId:"2607",relation:"0,2607"},{id:"2680",name:"贵港",parentId:"2607",relation:"0,2607"},{id:"2687",name:"玉林",parentId:"2607",relation:"0,2607"},{id:"2695",name:"百色",parentId:"2607",relation:"0,2607"},{id:"2709",name:"贺州",parentId:"2607",relation:"0,2607"},{id:"2715",name:"河池",parentId:"2607",relation:"0,2607"},{id:"2728",name:"来宾",parentId:"2607",relation:"0,2607"},{id:"2736",name:"崇左",parentId:"2607",relation:"0,2607"},{id:"2745",name:"其他",parentId:"2607",relation:"0,2607"},{id:"2747",name:"南昌",parentId:"2746",relation:"0,2746"},{id:"2758",name:"景德镇",parentId:"2746",relation:"0,2746"},{id:"2764",name:"萍乡",parentId:"2746",relation:"0,2746"},{id:"2771",name:"九江",parentId:"2746",relation:"0,2746"},{id:"2785",name:"新余",parentId:"2746",relation:"0,2746"},{id:"2789",name:"鹰潭",parentId:"2746",relation:"0,2746"},{id:"2794",name:"赣州",parentId:"2746",relation:"0,2746"},{id:"2814",name:"吉安",parentId:"2746",relation:"0,2746"},{id:"2829",name:"宜春",parentId:"2746",relation:"0,2746"},{id:"2841",name:"抚州",parentId:"2746",relation:"0,2746"},{id:"2854",name:"上饶",parentId:"2746",relation:"0,2746"},{id:"2868",name:"其他",parentId:"2746",relation:"0,2746"},{id:"2870",name:"贵阳",parentId:"2869",
relation:"0,2869"},{id:"2882",name:"六盘水",parentId:"2869",relation:"0,2869"},{id:"2888",name:"遵义",parentId:"2869",relation:"0,2869"},{id:"2904",name:"安顺",parentId:"2869",relation:"0,2869"},{id:"2912",name:"铜仁地区",parentId:"2869",relation:"0,2869"},{id:"2924",name:"毕节地区",parentId:"2869",relation:"0,2869"},{id:"2934",name:"黔西南布依族苗族自治州",parentId:"2869",relation:"0,2869"},{id:"2944",name:"黔东南苗族侗族自治州",parentId:"2869",relation:"0,2869"},{id:"2962",name:"黔南布依族苗族自治州",parentId:"2869",relation:"0,2869"},{id:"2976",name:"其他",parentId:"2869",relation:"0,2869"},{id:"2978",name:"昆明",parentId:"2977",relation:"0,2977"},{id:"2994",name:"曲靖",parentId:"2977",relation:"0,2977"},{id:"3005",name:"玉溪",parentId:"2977",relation:"0,2977"},{id:"3016",name:"保山",parentId:"2977",relation:"0,2977"},{id:"3023",name:"昭通",parentId:"2977",relation:"0,2977"},{id:"3036",name:"丽江",parentId:"2977",relation:"0,2977"},{id:"3043",name:"普洱",parentId:"2977",relation:"0,2977"},{id:"3055",name:"临沧",parentId:"2977",relation:"0,2977"},{id:"3065",name:"德宏傣族景颇族自治州",parentId:"2977",relation:"0,2977"},{id:"3072",name:"怒江傈僳族自治州",parentId:"2977",relation:"0,2977"},{id:"3078",name:"迪庆藏族自治州",parentId:"2977",relation:"0,2977"},{id:"3083",name:"大理白族自治州",parentId:"2977",relation:"0,2977"},{id:"3097",name:"楚雄彝族自治州",parentId:"2977",relation:"0,2977"},{id:"3109",name:"红河哈尼族彝族自治州",parentId:"2977",relation:"0,2977"},{id:"3124",name:"文山壮族苗族自治州",parentId:"2977",relation:"0,2977"},{id:"3134",name:"西双版纳傣族自治州",parentId:"2977",relation:"0,2977"},{id:"3139",name:"其他",parentId:"2977",relation:"0,2977"},{id:"3141",name:"拉萨",parentId:"3140",relation:"0,3140"},{id:"3151",name:"那曲地区",parentId:"3140",relation:"0,3140"},{id:"3163",name:"昌都地区",parentId:"3140",relation:"0,3140"},{id:"3176",name:"林芝地区",parentId:"3140",relation:"0,3140"},{id:"3185",name:"山南地区",parentId:"3140",relation:"0,3140"},{id:"3199",name:"日喀则地区",parentId:"3140",relation:"0,3140"},{id:"3219",name:"阿里地区",parentId:"3140",relation:"0,3140"},{id:"3228",name:"其他",parentId:"3140",relation:"0,3140"},{id:"3230",name:"海口",parentId:"3229",relation:"0,3229"},{id:"3236",name:"三亚",parentId:"3229",relation:"0,3229"},{id:"3239",name:"五指山",parentId:"3229",relation:"0,3229"},{id:"3240",name:"琼海",parentId:"3229",relation:"0,3229"},{id:"3241",name:"儋州",parentId:"3229",relation:"0,3229"},{id:"3242",name:"文昌",parentId:"3229",relation:"0,3229"},{id:"3243",name:"万宁",parentId:"3229",relation:"0,3229"},{id:"3244",name:"东方",parentId:"3229",relation:"0,3229"},{id:"3245",name:"澄迈县",parentId:"3229",relation:"0,3229"},{id:"3246",name:"定安县",parentId:"3229",relation:"0,3229"},{id:"3247",name:"屯昌县",parentId:"3229",relation:"0,3229"},{id:"3248",name:"临高县",parentId:"3229",relation:"0,3229"},{id:"3249",name:"白沙黎族自治县",parentId:"3229",relation:"0,3229"},{id:"3250",name:"昌江黎族自治县",parentId:"3229",relation:"0,3229"},{id:"3251",name:"乐东黎族自治县",parentId:"3229",relation:"0,3229"},{id:"3252",name:"陵水黎族自治县",parentId:"3229",relation:"0,3229"},{id:"3253",name:"保亭黎族苗族自治县",parentId:"3229",relation:"0,3229"},{id:"3254",name:"琼中黎族苗族自治县",parentId:"3229",relation:"0,3229"},{id:"3255",name:"其他",parentId:"3229",relation:"0,3229"},{id:"3257",name:"兰州",parentId:"3256",relation:"0,3256"},{id:"3267",name:"嘉峪关",parentId:"3256",relation:"0,3256"},{id:"3270",name:"金昌",parentId:"3256",relation:"0,3256"},{id:"3274",name:"白银",parentId:"3256",relation:"0,3256"},{id:"3281",name:"天水",parentId:"3256",relation:"0,3256"},{id:"3290",name:"武威",parentId:"3256",relation:"0,3256"},{id:"3296",name:"酒泉",parentId:"3256",relation:"0,3256"},{id:"3305",name:"张掖",parentId:"3256",relation:"0,3256"},{id:"3313",name:"庆阳",parentId:"3256",relation:"0,3256"},{id:"3323",name:"平凉",parentId:"3256",relation:"0,3256"},{id:"3332",name:"定西",parentId:"3256",relation:"0,3256"},{id:"3341",name:"陇南",parentId:"3256",relation:"0,3256"},{id:"3352",name:"临夏回族自治州",parentId:"3256",relation:"0,3256"},{id:"3362",name:"甘南藏族自治州",parentId:"3256",relation:"0,3256"},{id:"3372",name:"其他",parentId:"3256",relation:"0,3256"},{id:"3374",name:"银川",parentId:"3373",relation:"0,3373"},{id:"3382",name:"石嘴山",parentId:"3373",relation:"0,3373"},{id:"3387",name:"吴忠",parentId:"3373",relation:"0,3373"},{id:"3393",name:"固原",parentId:"3373",relation:"0,3373"},{id:"3400",name:"中卫",parentId:"3373",relation:"0,3373"},{id:"3405",name:"其他",parentId:"3373",relation:"0,3373"},{id:"3407",name:"西宁",parentId:"3406",relation:"0,3406"},{id:"3416",name:"海东地区",parentId:"3406",relation:"0,3406"},{id:"3424",name:"海北藏族自治州",parentId:"3406",relation:"0,3406"},{id:"3430",name:"海南藏族自治州",parentId:"3406",relation:"0,3406"},{id:"3437",name:"黄南藏族自治州",parentId:"3406",relation:"0,3406"},{id:"3443",name:"果洛藏族自治州",parentId:"3406",relation:"0,3406"},{id:"3451",name:"玉树藏族自治州",parentId:"3406",relation:"0,3406"},{id:"3459",name:"海西蒙古族藏族自治州",parentId:"3406",relation:"0,3406"},{id:"3466",name:"其他",parentId:"3406",relation:"0,3406"},{id:"3468",name:"乌鲁木齐",parentId:"3467",relation:"0,3467"},{id:"3478",name:"克拉玛依",parentId:"3467",relation:"0,3467"},{id:"3484",name:"吐鲁番地区",parentId:"3467",relation:"0,3467"},{id:"3489",name:"哈密地区",parentId:"3467",relation:"0,3467"},{id:"3494",name:"和田地区",parentId:"3467",relation:"0,3467"},{id:"3504",name:"阿克苏地区",parentId:"3467",relation:"0,3467"},{id:"3515",name:"喀什地区",parentId:"3467",relation:"0,3467"},{id:"3529",name:"克孜勒苏柯尔克孜自治州",parentId:"3467",relation:"0,3467"},{id:"3535",name:"巴音郭楞蒙古自治州",parentId:"3467",relation:"0,3467"},{id:"3546",name:"昌吉回族自治州",parentId:"3467",relation:"0,3467"},{id:"3556",name:"博尔塔拉蒙古自治州",parentId:"3467",relation:"0,3467"},{id:"3561",name:"石河子",parentId:"3467",relation:"0,3467"},{id:"3562",name:"阿拉尔",parentId:"3467",relation:"0,3467"},{id:"3563",name:"图木舒克",parentId:"3467",relation:"0,3467"},{id:"3564",name:"五家渠",parentId:"3467",relation:"0,3467"},{id:"3565",name:"伊犁哈萨克自治州",parentId:"3467",relation:"0,3467"},{id:"3579",name:"其他",parentId:"3467",relation:"0,3467"},{id:"3581",name:"中西区",parentId:"3580",relation:"0,3580"},{id:"3582",name:"湾仔区",parentId:"3580",relation:"0,3580"},{id:"3583",name:"东区",parentId:"3580",relation:"0,3580"},{id:"3584",name:"南区",parentId:"3580",relation:"0,3580"},{id:"3585",name:"深水埗区",parentId:"3580",relation:"0,3580"},{id:"3586",name:"油尖旺区",parentId:"3580",relation:"0,3580"},{id:"3587",name:"九龙城区",parentId:"3580",relation:"0,3580"},{id:"3588",name:"黄大仙区",parentId:"3580",relation:"0,3580"},{id:"3589",name:"观塘区",parentId:"3580",relation:"0,3580"},{id:"3590",name:"北区",parentId:"3580",relation:"0,3580"},{id:"3591",name:"大埔区",parentId:"3580",relation:"0,3580"},{id:"3592",name:"沙田区",parentId:"3580",relation:"0,3580"},{id:"3593",name:"西贡区",parentId:"3580",relation:"0,3580"},{id:"3594",name:"元朗区",parentId:"3580",relation:"0,3580"},{id:"3595",name:"屯门区",parentId:"3580",relation:"0,3580"},{id:"3596",name:"荃湾区",parentId:"3580",relation:"0,3580"},{id:"3597",name:"葵青区",parentId:"3580",relation:"0,3580"},{id:"3598",name:"离岛区",parentId:"3580",relation:"0,3580"},{id:"3599",name:"其他",parentId:"3580",relation:"0,3580"},{id:"3601",name:"花地玛堂区",parentId:"3600",relation:"0,3600"},{id:"3602",name:"圣安多尼堂区",parentId:"3600",relation:"0,3600"},{id:"3603",name:"大堂区",parentId:"3600",relation:"0,3600"},{id:"3604",name:"望德堂区",parentId:"3600",relation:"0,3600"},{id:"3605",name:"风顺堂区",parentId:"3600",relation:"0,3600"},{id:"3606",name:"嘉模堂区",parentId:"3600",relation:"0,3600"},{id:"3607",name:"圣方济各堂区",parentId:"3600",relation:"0,3600"},{id:"3608",name:"路凼",parentId:"3600",relation:"0,3600"},{id:"3609",name:"其他",parentId:"3600",relation:"0,3600"},{id:"3611",name:"台北市",parentId:"3610",relation:"0,3610"},{id:"3612",name:"高雄市",parentId:"3610",relation:"0,3610"},{id:"3613",name:"台北县",parentId:"3610",relation:"0,3610"},{id:"3614",name:"桃园县",parentId:"3610",relation:"0,3610"},{id:"3615",name:"新竹县",parentId:"3610",relation:"0,3610"},{id:"3616",name:"苗栗县",parentId:"3610",relation:"0,3610"},{id:"3617",name:"台中县",parentId:"3610",relation:"0,3610"},{id:"3618",name:"彰化县",parentId:"3610",relation:"0,3610"},{id:"3619",name:"南投县",parentId:"3610",relation:"0,3610"},{id:"3620",name:"云林县",parentId:"3610",relation:"0,3610"},{id:"3621",name:"嘉义县",parentId:"3610",relation:"0,3610"},{id:"3622",name:"台南县",parentId:"3610",relation:"0,3610"},{id:"3623",name:"高雄县",parentId:"3610",relation:"0,3610"},{id:"3624",name:"屏东县",parentId:"3610",relation:"0,3610"},{id:"3625",name:"宜兰县",parentId:"3610",relation:"0,3610"},{id:"3626",name:"花莲县",parentId:"3610",relation:"0,3610"},{id:"3627",name:"台东县",parentId:"3610",relation:"0,3610"},{id:"3628",name:"澎湖县",parentId:"3610",relation:"0,3610"},{id:"3629",name:"基隆市",parentId:"3610",relation:"0,3610"},{id:"3630",name:"新竹市",parentId:"3610",relation:"0,3610"},{id:"3631",name:"台中市",parentId:"3610",relation:"0,3610"},{id:"3632",name:"嘉义市",parentId:"3610",relation:"0,3610"},{id:"3633",name:"台南市",parentId:"3610",relation:"0,3610"},{id:"3634",name:"其他",parentId:"3610",relation:"0,3610"},{id:"3636",name:"其他",parentId:"3635",relation:"0,3635"}];define("config/city",function(){}),define("app/controller/site",["app/module","app/directive/directiveApi","app/service/serviceApi","app/filter/filterApi","config/city","config/occupation"],function(e){e.controller("site.index",["app.serviceApi","$rootScope","$scope","$timeout","$ionicPopup","$ionicModal","$ionicActionSheet","$ionicLoading","$ionicBackdrop","$ionicScrollDelegate","$location","dataFilter",function(e,a,t,n,i,o,r,s,d,l,c,u){t.$on("$ionicView.beforeEnter",function(){ar.getStorage("userInfo")&&ar.getStorage("userInfo").user_id==ar.getCookie("bhy_user_id")&&(t.userInfo=ar.getStorage("userInfo"),t.userInfo.info=JSON.parse(t.userInfo.info),t.userInfo.auth=JSON.parse(t.userInfo.auth))}),t.searchForm={age:"18-28",pageNum:1,pageSize:6,sex:0},t.userId=ar.getCookie("bhy_user_id")?ar.getCookie("bhy_user_id"):0;var m=function(){t.searchForm={},t.whereForm={},t.searchForm.pageNum=1,t.userId>0&&0==t.userInfo.sex?(t.searchForm.sex=1,t.whereForm.sex=1):(t.searchForm.sex=0,t.whereForm.sex=0)};m(),t.userList=[],u.data.honestyStatus.length&&(t.honestyStatus=u.data.honestyStatus[0].is_check),u.data.headpicStatus&&(t.headpicStatus=u.data.headpicStatus.is_check),t.honesty=function(e){return 1&e},t.pageLast=!0,t.checkPhone=function(e){t.userInfo.phone?window.location.hash=e:window.location.hash="#/member/security_phone"},t.dataLoading=!1,t.indexFilter=function(e){return t.userId>0&&t.userInfo?e.id!=t.userInfo.id&&-1==u.data.blacked.indexOf(e.id):1},o.fromTemplateUrl("MoreSearchModal.html",{scope:t,animation:"slide-in-up"}).then(function(e){t.moreSearchModal=e}),t.moreSearchOk=function(){t.dataLoading=!0,t.userList=[],t.moreSearchModal.hide(),t.whereForm.id&&(t.searchForm=[],t.searchForm.id=t.whereForm.id,t.whereForm=[],t.whereForm.id=t.searchForm.id),t.searchForm=t.whereForm,t.searchForm.pageNum=1,t.loadMore("search")},t.search=function(){t.buttonsItem=[{text:"只看女"},{text:"只看男"},{text:"高级搜索"}];var e=r.show({buttons:t.buttonsItem,titleText:"搜索",cancelText:"取消",buttonClicked:function(a){t.pageLast=!0,1==a&&(t.userList=[],m(),t.whereForm=[],t.searchForm.sex=1,t.whereForm.sex=1,t.dataLoading=!0,t.loadMore("search")),0==a&&(t.userList=[],m(),t.whereForm=[],t.searchForm.sex=0,t.whereForm.sex=0,t.dataLoading=!0,t.loadMore("search")),2==a&&t.moreSearchModal.show()&&l.$getByHandle("searchScroll").scrollTop(),e()}})},t.doRefresh=function(){var a=t.searchForm;a.pageSize=t.userList.length,a.pageNum=1,t.dataLoading=!0,e.list("/wap/site/user-list",a).success(function(e){for(var a in e.data)e.data[a].info=JSON.parse(e.data[a].info),e.data[a].auth=JSON.parse(e.data[a].auth);t.userList=e.data,t.dataLoading=!1,t.searchForm.pageNum+=1})["finally"](function(){t.$broadcast("scroll.refreshComplete")})},t.loadMore=function(a){try{t.dataLoading=!0,e.list("/wap/site/user-list",t.searchForm).success(function(e){e.data.length<6&&(t.pageLast=!1);for(var n in e.data)e.data[n].info=JSON.parse(e.data[n].info),e.data[n].auth=JSON.parse(e.data[n].auth);t.userList=t.userList.concat(e.data),t.dataLoading=!1,t.searchForm.pageNum+=1,"search"==a&&l.$getByHandle("mainScroll").scrollTop()}).error(function(){n(function(){t.$broadcast("scroll.infiniteScrollComplete")},800)})["finally"](function(){n(function(){t.$broadcast("scroll.infiniteScrollComplete")},800)})}catch(i){n(function(){t.$broadcast("scroll.infiniteScrollComplete")},800)}},t.moreDataCanBeLoaded=function(){return t.pageLast};for(var p=[],f=[],h=18;99>=h;h++)f.push(h),99>h&&p.push(h);t.settingsAge={theme:"mobiscroll",lang:"zh",rows:5,wheels:[[{circular:!1,data:p,label:"最低年龄"},{circular:!1,data:f,label:"最高年龄"}]],showLabel:!0,minWidth:130,validate:function(e,a){var t,n=e.values,i=[];for(t=0;t<f.length;++t)f[t]<=n[0]&&i.push(f[t]);return{disabled:[[],i]}},formatValue:function(e){return e[0]+"-"+e[1]},parseValue:function(e){return e?(console.log(e),e.replace(/\s/gi,"").split("-")):[18,22]}};for(var g=[],v=[],h=140;260>=h;h++)v.push(h),260>h&&g.push(h);t.settingsHeight={theme:"mobiscroll",lang:"zh",rows:5,wheels:[[{circular:!1,data:g,label:"最低身高(厘米)"},{circular:!1,data:v,label:"最高身高(厘米)"}]],showLabel:!0,minWidth:130,validate:function(e,a){var t,n=e.values,i=[];for(t=0;t<v.length;++t)v[t]<=n[0]&&i.push(v[t]);return{disabled:[[],i]}},formatValue:function(e){return e[0]+"-"+e[1]},parseValue:function(e){return e?e.replace(/\s/gi,"").split("-"):[160,180]}},t.salary=config_infoData.salary,t.house=config_infoData.house,t.marriage=config_infoData.marriage,t.education=config_infoData.education,t.children=config_infoData.children,t.house=config_infoData.house,t.car=config_infoData.car,t.zodiac=config_infoData.zodiac,t.constellation=config_infoData.constellation,t.nation=config_infoData.nation,t.occupations=occupation,t.sexChange=function(e){t.whereForm.sex=e},t.moreText="展开",t.more=!1,t.moreToggle=function(){l.$getByHandle("searchScroll").resize(),t.more=!t.more,t.more?t.moreText="收起":t.moreText="展开"},document.getElementById("welcome")&&(document.getElementById("welcome").className="animated fadeOut",setTimeout(function(){document.body.removeChild(document.getElementById("welcome"))},1100))}]),e.controller("site.discovery",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicModal","$ionicActionSheet","$ionicLoading","$ionicBackdrop","$ionicScrollDelegate","$location","dataFilter",function(e,a,t,n,i,o,r,s,d,l,c){a.discoveryList=[],a.user=[],a.isMore=!0,a.pageSize=5,a.user_id=l.$$search.userId,e.get("/wap/member/get-dynamic-list",{user_id:a.user_id,limit:1e4}).success(function(e){for(var t in e.data)e.data[t].imgList=JSON.parse(e.data[t].pic),e.data[t].real_name=e.data[t].real_name.replace(/\"/g,""),e.data[t].head_pic=e.data[t].head_pic.replace(/\"/g,""),e.data[t].level=e.data[t].level.replace(/\"/g,""),e.data[t].age=e.data[t].age.replace(/\"/g,"");a.discoveryList=e.data,a.user.user_id=e.data[0].user_id,a.user.username=e.data[0].real_name,a.user.age=e.data[0].age,a.user.sex=e.data[0].sex,ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n)}),a.jump=function(e){l.url(e)},a.display=ar.getStorage("display")?ar.getStorage("display"):[],a.indexFilter=function(e){return e.fid>0?!1:"2"==e.auth?-1!=c.data.follow.indexOf(e.user_id)&&-1==a.display.indexOf(e.id):"4"==e.auth?!1:-1==a.display.indexOf(e.id)},a.clickLike=function(t){var n=ar.getArrI(a.discoveryList,"id",t.id),i=0;a.discoveryList[n].cid>0?(i=-1,a.discoveryList[n].cid=-1):(i=1,a.discoveryList[n].cid=1),a.discoveryList[n].like_num=parseInt(a.discoveryList[n].like_num)+i,e.save("/wap/member/set-click-like",{dynamicId:t.id,add:i})},a.more=function(t,n,i){var r=[{text:"举报"},{text:"屏蔽"}];t&&(r=[{text:"删除"}]),o.show({buttons:r,titleText:"更多",cancelText:"取消",cancel:function(){},buttonClicked:function(t,i){return"屏蔽"==i.text&&(a.display.push(n),ar.setStorage("display",a.display)),"举报"==i.text&&l.url("/member/report?id="+n+"&type=2&title=动态&tempUrl="+l.$$url),"删除"==i.text&&(a.display.push(n),ar.setStorage("display",a.display),e.save("/wap/member/delete-dynamic",{id:n}).success(function(e){l.url("/discovery")})),!0}})},a.loadMore=function(){e.get("/wap/member/get-dynamic-list",{user_id:a.user_id,limit:1e4}).success(function(e){a.pageSize>e.data.length&&(a.isMore=!1),a.pageSize+=5,ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n)})["finally"](function(){a.$broadcast("scroll.infiniteScrollComplete")})},a.moreDataCanBeLoaded=function(){return a.isMore}}]),e.controller("site.error",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicModal","$location",function(e,a,t,n,i,o){}])}),define("app/controller/message",["app/module","app/directive/directiveApi","app/service/serviceApi","comm"],function(e){e.controller("message.index",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicModal","$ionicActionSheet","$ionicLoading","$location","$ionicListDelegate","dataFilter","$interval","$rootScope",function(e,a,t,n,i,o,r,s,d,l,c,u){t(a.sumSend),a.indexFilter=function(e){return-1==l.data.blacked.indexOf(e)},a.userInfo={},u.$watch("messageList",function(){a.messageList=u.messageList}),a.userInfo.id=ar.getCookie("bhy_user_id"),a.removeItem=function(t,n){angular.element(n.target).parent().parent().addClass("item-remove-animate");var i=ar.getStorage("messageList-"+a.userInfo.id);for(var o in i)if(i[o].other==t.send_user_id){i.splice(o,1);break}return localStorage.removeItem("chat_messageHistory-"+t.send_user_id+"-"+t.receive_user_id),a.messageList=i,u.messageList=i,ar.setStorage("messageList-"+ar.getCookie("bhy_user_id"),a.messageList),e.setMsgDisplay(t.other).success(function(e){}),!0}}])}),define("chat/chat",[],function(){var e={url:"ws://120.76.84.162:8080",name:"",esc:function(e){return null!=e&&""!=e?(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;"),encodeURIComponent(e)):void 0},flag:!0,socket:null};return e.sendMessage=function(a,t,n,i,o){null!=a&&""!=a&&void 0!=a&&this.socket.send("&message="+e.esc(a)+"&receiveId="+n+"&type="+i+"&sendId="+t+"&time="+o)},e.close=function(){this.flag=!1,this.socket.close()},e.init=function(a){if(this.socket=null,null==this.socket){this.socket=this.so(),this.name=a;var t=function(){console.log("x t b"),e.socket.send("&nr="+e.esc("heartbeat")+"&key=heartbeat")};window.setInterval(t,1e4)}return this.socket},e.so=function(){var a=new WebSocket(this.url);return a.onopen=function(){console.log("socket connecting"),1==e.socket.readyState&&e.socket.send("type=add&ming="+e.name)},a.onclose=function(){this.socket=null,a.close(),e.flag?(e.init(e.name),console.log("socket reload")):console.log("socket close")},a.onmessage=function(a){e.onMessageCallback(a)},a.onerror=function(){console.log("发生错误"),this.socket=null,a.close()},a},e}),define("chat/wechatInterface",["http://res.wx.qq.com/open/js/jweixin-1.0.0.js","chat/chat"],function(e,a){return e.setConfig=function(a){e.config(a),e.ready(function(){}),e.error(function(e){console.log("发生错误，wechatInterface.js",e)})},e.send_record=function(a,t,n){console.log(a);var i=null,o=null;e.stopRecord({success:function(r){i=r.localId,null!=i?e.uploadVoice({localId:i,success:function(e){o=e.serverId,n(o,a,t,"record")}}):alert("没有录音Id")}})},e.send_pic=function(t,n){var i=null,o=null;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(r){i=r.localIds,null!=i?e.uploadImage({localId:i[0],isShowProgressTips:1,success:function(e){o=e.serverId,a.sendMessage(o,t,n,"pic")}}):alert("没有图片Id")},complete:function(){console.log("什么情况")},fail:function(){console.log("发送错误了")}})},e}),define("app/controller/ioSocket",["app/module","app/directive/directiveApi","app/service/serviceApi","comm"],function(e){e.controller("message.chat1",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicModal","$ionicActionSheet","$ionicLoading","$ionicScrollDelegate","FileUploader","$http","$location","$rootScope","$filter","$ionicPopover","$interval","dataFilter",function(e,a,t,n,i,o,r,s,d,l,c,u,m,p,f,h){var g=ar.getCookie("bhy_user_id");a.historyList=[],a.blackList=!1,a.setMessageStatus=function(e){for(var a in e)4!=e[a].status&&(e[a].status=1);return e},a.sendId=ar.getCookie("bhy_user_id"),a.receiveId=c.search().id,a.blackListAlert=function(){return h.data.blacked.indexOf(a.receiveId)>-1?void ar.saveDataAlert(n,"您已被对方拉黑，不可查看对方资料。"):void(a.receiveId>=1e4?c.url("/userInfo?userId="+a.receiveId):c.url("/admin_info?userId="+a.receiveId))},e.list("/wap/member/honesty-photo",{user_id:a.receiveId}).success(function(e){a.sfzCheck=e.sfz}),a.hideMultiOnKeyboard=function(){angular.element(document.querySelector("#multi_con")).css("bottom","-110px"),angular.element(document.querySelector("#msg_footer_bar")).css("bottom","0")};var v=s.$getByHandle("messageDetailsScroll");a.messageNum=0;var I=ar.getStorage("chat_messageHistory-"+a.receiveId+"-"+g);for(var y in I)3==I[y].status&&(I[y].status=4);a.doRefresh=function(){if(null!=I){var e=20,n=I.length;a.messageNum+=e;var i=n-a.messageNum<=0?0:n-a.messageNum;a.historyList=I.slice(i,n)}t(function(){a.$broadcast("scroll.refreshComplete")},1e3)},a.doRefresh(),window.addEventListener("native.keyboardshow",function(e){v.scrollBottom(!0)}),a.isLongTime=function(e,t){return 1>t?!0:e?e-a.historyList[t-1].create_time>300:!1},a.followData={},a.followData.user_id=a.sendId,a.followData.follow_id=a.receiveId,a.u_isFollow=!0,e.getStatus("/wap/follow/get-follow-status",a.followData).success(function(e){e.data&&(a.u_isFollow=!1)}),a.addFollow=function(){return a.followData.user_id==a.followData.follow_id?void ar.saveDataAlert(n,"您不能关注自己"):-1!=h.data.blacked.indexOf(a.followData.follow_id)?void ar.saveDataAlert(n,"对方设置，关注失败"):void e.save("/wap/follow/add-follow",a.followData).success(function(e){e.data&&(a.u_isFollow=!1,ar.saveDataAlert(n,"加关注成功"))})};var w=ar.getStorage("messageList-"+g);for(var y in w)a.receiveId==w[y].id&&(a.auth_validate=w[y].auth.identity_check);a.real_name=c.search().real_name,a.sex=c.search().sex,a.age=c.search().age,a.report_flag=c.search().report_flag,a.receiveHeadPic=c.search().head_pic.replace(/~2F/g,"/"),a.sendHeadPic=JSON.parse(ar.getStorage("userInfo").info).head_pic,e.getUserInfo(a.receiveId).success(function(e){u.receiveUserInfo=e.data}),e.list("/wap/message/message-history",{id:a.receiveId}).success(function(e){var t=e.data.messageList;I=null!=I?I.concat(t):t,I.length>50&&I.splice(0,I.length-50),u.historyListHide=I,ar.setStorage("chat_messageHistory-"+a.receiveId+"-"+g,I),(t.length>0||0==e.data.status)&&(I=a.setMessageStatus(I),t.length>0&&(a.historyList=a.historyList.concat(t),v.resize(),v.scrollBottom(!0))),ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n)}).error(function(){console.log("页面message.js出现错误，代码：/wap/chat/message-history")}),a.uploader=new d({url:"/wap/file/thumb"}),m("orderBy")(),requirejs(["chat/wechatInterface","plugin/socket/socket.io.1.4.0"],function(e,t){t=t.connect("http://120.76.84.162:8088"),t.emit("tell name",{send_user_id:a.sendId,receive_user_id:a.receiveId,status:1}),a.$on("$destroy",function(){t.emit("tell name",{send_user_id:a.sendId,receive_user_id:a.receiveId,status:0}),t.disconnect()}),a.sendMessage=function(e,n,i,o,r,s){void 0!=r?"":r=ar.timeStamp();var d=ar.getId(a.historyList),l={id:d,message:e,send_user_id:n,receive_user_id:i,type:o,status:3,time:r,create_time:r};return h.data.blacked.indexOf(i)>-1?(l.refuse=-1,l.status=4,a.historyList.push(l),void ar.setStorage("chat_messageHistory-"+i+"-"+g,a.historyList)):((s&&"pic"!=o||"pic"==o&&!s)&&(a.historyList.push(l),ar.setStorage("chat_messageHistory-"+i+"-"+g,a.historyList)),void((s||"pic"!=o)&&t.emit("chat message",l)))},a.send=function(){if(""!=a.send_content&&null!=a.send_content&&void 0!=a.send_content){if(!a.userInfo.phone||"0"==a.userInfo.phone){var e=n.alert({template:"绑定手机，免费畅聊",okText:"现在去绑定"});return void e.then(function(e){c.url("/member/bindPhone")})}if(a.userInfo.id==c.$$search.id)return void ar.saveDataAlert(n,"您不能与自己聊天！");try{a.sendMessage(a.send_content,a.sendId,a.receiveId,"send",void 0,!0)}catch(t){alert(t.message),alert(t.description),alert(t.number),alert(t.name)}finally{a.send_content=""}}},a.send_pic=function(){var e=document.getElementById("pic_fileInput"),t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t),a.uploader.filters.push({name:"file-size-Res",fn:function(e){return e.size>8388608?(ar.saveDataAlert(n,"请选择小于8MB的图片！"),!1):!0}});var i=ar.timeStamp();a.uploader.onAfterAddingFile=function(e){a.sendMessage(e.file.name,a.sendId,a.receiveId,"pic",i,!1),e.upload(),v.resize(),v.scrollBottom(!0),a.uploader.onSuccessItem=function(e,t,n,i){if(1==t.status)for(var o in a.historyList)a.historyList[o].message==e.file.name&&a.sendMessage(t.thumb_path,a.sendId,a.receiveId,"pic",a.historyList[o].time,!0);else for(var o=a.historyList.length-1;o>=0;o--)if("pic"==a.historyList[o].type&&3==a.historyList[o].status){a.historyList[o].status=4;break}}},a.uploader.onCompleteItem=function(e,t,i,o){if(t.thumb_path){var r=new Image;r.src=t.thumb_path,r.complete?(v.resize(),v.scrollBottom(!0)):r.onload=function(){v.resize(),v.scrollBottom(!0),r.onload=null},ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n)}},a.uploader.onErrorItem=function(e,t,i,o){ar.saveDataAlert(n,"发送图片出错，错误原因未知");for(var r=a.historyList.length-1;r>=0;r++)if("pic"==a.historyList[r].type&&3==a.historyList[r].status){a.historyList[r].status=4;break}}},t.on(a.sendId+"-"+a.receiveId,function(e){if("10086"==e)return a.historyList=a.setMessageStatus(a.historyList),ar.setStorage("chat_messageHistory-"+a.receiveId+"-"+g,a.historyList),void a.$apply();var t=function(e){if("madd"!=e.type&&"remove"!=e.type&&"add"!=e.type){if(e.message=e.message.replace(/&quot;/g,'"'),a.sendId==e.send_user_id)for(var t in a.historyList)e.time!=a.historyList[t].time||e.message!=a.historyList[t].message&&"pic"!=e.type||(a.historyList[t].message=e.message,a.historyList[t].status=e.status);else if(e.id=ar.getId(a.historyList),a.historyList.push(e),"pic"==e.type){var n=new Image;n.src=e.message,n.complete?(v.resize(),v.scrollBottom(!0)):n.onload=function(){v.resize(),v.scrollBottom(!0),n.onload=null}}I=u.historyListHide=u.historyList=a.historyList,ar.setStorage("chat_messageHistory-"+a.receiveId+"-"+g,a.historyList)}};switch(e.type){case"record":break;default:t(e),v.resize(),v.scrollBottom(!0),a.$apply()}})})}])}),define("app/controller/member",["app/module","app/directive/directiveApi","app/service/serviceApi","config/area"],function(module){return module.controller("member.index",["app.serviceApi","$scope","$ionicPopup",function(e,a,t){a.userInfo=ar.getStorage("userInfo"),a.userInfo.info=JSON.parse(a.userInfo.info),a.userInfo.auth=JSON.parse(a.userInfo.auth),a.loginOut=function(){e.save("/wap/member/login-out",{}).success(function(e){ar.delCookie("bhy_u_sex"),ar.delCookie("bhy_u_city"),ar.delCookie("bhy_user_id"),ar.delCookie("bhy_u_cityId"),ar.delCookie("bhy_u_cityPid"),localStorage.clear(),location.href="/wap/user/login"})},e.list("/wap/member/photo-list",{type:2,pageSize:2}).success(function(e){e.data.length&&(a.honestyStatus=e.data[0].is_check)}),e.list("/wap/member/user-headpic",{}).success(function(e){e.status&&(a.headpicStatus=e.data.is_check)}),a.honesty=function(e){return 1&e},a.discoveryNumber=0,e.list("/wap/member/get-dynamic-list",{user_id:a.userInfo.id}).success(function(e){e.status&&(a.discoveryNumber=e.data.length)}),a.$on("$ionicView.beforeEnter",function(t,n){e.list("/wap/follow/follow-list",{type:""}).success(function(e){a.followNumber=e.data})}),a.followNumber>0&&e.list("/wap/follow/set-checked",{user_id:a.userInfo.user_id}).success(function(e){console.log(e)})}]),module.controller("member.information",["app.serviceApi","$scope","$ionicPopup","FileUploader","$ionicLoading","$ionicActionSheet","$ionicModal","$ionicScrollDelegate","$filter","$rootScope","$location",function(e,a,t,n,i,o,r,s,d,l,c){a.userInfo=ar.getStorage("userInfo"),a.userInfo.info=JSON.parse(a.userInfo.info),a.userInfo.auth=JSON.parse(a.userInfo.auth),e.list("/wap/member/photo-list",{type:2,pageSize:2}).success(function(e){e.data.length&&(a.honestyStatus=e.data[0].is_check)});var u=a.uploader=new n({url:"/wap/file/thumb-photo"});a.formData={},a.imgList=[],e.list("/wap/member/photo-list",{}).success(function(e){a.imgList=e.data;var n=d("filter")(a.imgList,{is_check:1});a.isCheckNumber=n.length,ar.initPhotoSwipeFromDOM(".bhy-gallery",a,t)}),a.addNewImg=function(e){e.stopPropagation(),e.preventDefault();var n=document.getElementById("pic_fileInput"),i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),n.dispatchEvent(i),u.filters.push({name:"file-type-Res",fn:function(e){return ar.msg_file_res_img(e)?!0:(ar.saveDataAlert(t,"只能上传图片类型的文件！"),!1)}}),u.filters.push({name:"file-size-Res",fn:function(e){return e.size>8388608?(ar.saveDataAlert(t,"请选择小于8MB的图片！"),!1):!0}}),u.onAfterAddingFile=function(e){e.upload()},u.onProgressItem=function(e,t){a.showLoading(t)},u.onSuccessItem=function(e,n,i,o){n.status>0?a.imgList.push({id:n.id,thumb_path:n.thumb_path,is_head:0,is_check:2}):ar.saveDataAlert(t,"上传图片失败！")},u.onErrorItem=function(e,n,i,o){ar.saveDataAlert(t,"上传图片出错！"),a.hideLoading()},u.onCompleteItem=function(e,t,n,i){a.hideLoading()}},a.moreImg=function(n){var i=o.show({buttons:1==n.is_check&&0==n.is_head?[{text:"设为头像"}]:[],destructiveText:"删除",titleText:"操作照片",cancelText:"取消",destructiveButtonClicked:function(){var o=ar.saveDataConfirm(t,"是否确认删除该照片？");o.then(function(t){t?e.save("/wap/member/del-photo",{id:n.id}).success(function(e){if(1==n.is_head){a.userInfo.info.head_pic="",ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t)}for(var o in a.imgList)n.id==a.imgList[o].id&&a.imgList.splice(o,1);i()}):i()})},buttonClicked:function(o){return e.save("/wap/member/set-head",{id:n.id,thumb_path:n.thumb_path}).success(function(e){if(e.status<1)ar.saveDataAlert(t,e.msg);else{for(var o in a.imgList)a.imgList[o].is_head=0,n.id==a.imgList[o].id&&(a.imgList[o].is_head=1);a.userInfo.info.head_pic=n.thumb_path,ar.setStorage("userInfo",a.userInfo);var r=ar.getStorage("userInfo");r.info=JSON.stringify(r.info),r.auth=JSON.stringify(r.auth),ar.setStorage("userInfo",r)}i()}),!0}})},a.dynamicList=[],e.list("/wap/member/get-dynamic-list",{user_id:a.userInfo.id,page:0}).success(function(e){for(var t in e.data)e.data[t].imgList=JSON.parse(e.data[t].pic),a.dynamicList.push(e.data[t])}),a.getTravel("went_travel",a.userInfo.went_travel),a.getTravel("want_travel",a.userInfo.want_travel),a.getConfig("love_sport",a.userInfo.love_sport),a.getConfig("want_film",a.userInfo.want_film),a.getConfig("like_food",a.userInfo.like_food),a.updateInfo=function(n){return n?(r.fromTemplateUrl("/wechat/web/templates/"+n+".html",{scope:a,animation:"slide-in-right"}).then(function(i){a.infoModal=i,a.infoModal.show()&&ar.processData(n,a,e,t,d,s)}),void(a.saveClose=function(){a.userInfo=ar.getStorage("userInfo"),a.userInfo.info=JSON.parse(a.userInfo.info),a.userInfo.auth=JSON.parse(a.userInfo.auth),a.infoModal.hide()})):!1},a.settingsBirthday={theme:"mobiscroll",lang:"zh",controls:["date"]},a.formData.age=" ",a.formData.zodiac={id:0,name:" "},a.formData.constellation={id:0,name:" "},a.birthdayChange=function(){a.userInfo.age=ar.getAgeByBirthday(ar.DateTimeToDate(a.formData.birthday)),a.formData.age=a.userInfo.age+"岁",a.formData.zodiac=ar.getZodicByBirthday(ar.DateTimeToDate(a.formData.birthday)),a.formData.constellation=ar.getConstellationByBirthday(ar.DateTimeToDate(a.formData.birthday))};for(var m=[],p=[],f=18;99>=f;f++)p.push(f),99>f&&m.push(f);a.settingsAge={theme:"mobiscroll",lang:"zh",rows:5,wheels:[[{circular:!1,data:m,label:"最低年龄"},{circular:!1,data:p,label:"最高年龄"}]],showLabel:!0,minWidth:130,cssClass:"md-pricerange",validate:function(e,a){var t,n=e.values,i=[];for(t=0;t<p.length;++t)p[t]<=n[0]&&i.push(p[t]);return{disabled:[[],i]}},formatValue:function(e){return e[0]+"-"+e[1]},parseValue:function(e){return e?e.replace(/\s/gi,"").split("-"):[18,22]}};for(var h=[],g=[],f=140;260>=f;f++)g.push(f),260>f&&h.push(f);a.settingsHeight={theme:"mobiscroll",lang:"zh",rows:5,wheels:[[{circular:!1,data:h,label:"最低身高(厘米)"},{circular:!1,data:g,label:"最高身高(厘米)"}]],showLabel:!0,minWidth:130,cssClass:"md-pricerange",validate:function(e,a){
var t,n=e.values,i=[];for(t=0;t<g.length;++t)g[t]<=n[0]&&i.push(g[t]);return{disabled:[[],i]}},formatValue:function(e){return e[0]+"-"+e[1]},parseValue:function(e){return e?e.replace(/\s/gi,"").split("-"):[160,180]}},l.$on("$ionicView.beforeLeave",function(e,t){t.stateParams&&a.infoModal&&a.infoModal.isShown()&&a.closeModal()}),a.saveData=function(t){ar.processParams(a,t),e.save("/wap/member/save-data",a.userInfo).success(function(e){ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t)})["finally"](function(){a.closeModal()})},a.closeModal=function(){a.infoModal.hide(),a.infoModal.remove()}}]),module.controller("member.admin_information",["app.serviceApi","$scope","$ionicPopup","FileUploader","$ionicLoading","$ionicActionSheet","$ionicModal","$ionicScrollDelegate","$filter","$rootScope","$location",function(e,a,t,n,i,o,r,s,d,l,c){a.userInfo=ar.getStorage("userInfo"),a.userInfo.info=JSON.parse(a.userInfo.info),a.userInfo.auth=JSON.parse(a.userInfo.auth),e.list("/wap/member/photo-list",{type:2,pageSize:2}).success(function(e){e.data.length&&(a.honestyStatus=e.data[0].is_check)});var u=a.uploader=new n({url:"/wap/file/thumb-photo"});a.formData={},a.imgList=[],e.list("/wap/member/photo-list",[]).success(function(e){a.imgList=e.data,ar.initPhotoSwipeFromDOM(".bhy-gallery",a,t)}),a.addNewImg=function(){var e=document.getElementById("pic_fileInput"),n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),e.dispatchEvent(n),u.filters.push({name:"file-type-Res",fn:function(e){return ar.msg_file_res_img(e)?!0:(ar.saveDataAlert(t,"只能上传图片类型的文件！"),!1)}}),u.filters.push({name:"file-size-Res",fn:function(e){return e.size>8388608?(ar.saveDataAlert(t,"请选择小于8MB的图片！"),!1):!0}}),u.onAfterAddingFile=function(e){e.upload()},u.onProgressItem=function(e,t){a.showLoading(t)},u.onSuccessItem=function(e,n,i,o){n.status>0?a.imgList.push({id:n.id,thumb_path:n.thumb_path,is_head:0}):ar.saveDataAlert(t,"上传图片失败！")},u.onErrorItem=function(e,n,i,o){ar.saveDataAlert(t,"上传图片出错！"),a.hideLoading()},u.onCompleteItem=function(e,t,n,i){a.hideLoading()}},a.moreImg=function(n){if(0==n)return!1;var i=a.imgList[n].id,r=(a.imgList[n].thumb_path,o.show({destructiveText:"删除",titleText:"操作照片",cancelText:"取消",destructiveButtonClicked:function(){var o=ar.saveDataConfirm(t,"是否确认删除该照片？");o.then(function(t){t?e.save("/wap/member/del-photo",{id:i}).success(function(e){a.imgList.splice(n,1),r()}):r()})},buttonClicked:function(e){return!0}}))},a.dynamicList=[],e.list("/wap/member/get-dynamic-list",{user_id:a.userInfo.id,page:0}).success(function(e){for(var t in e.data)e.data[t].imgList=JSON.parse(e.data[t].pic),a.dynamicList.push(e.data[t])}),a.getTravel("went_travel",a.userInfo.went_travel),a.getTravel("want_travel",a.userInfo.want_travel),a.getConfig("love_sport",a.userInfo.love_sport),a.getConfig("want_film",a.userInfo.want_film),a.getConfig("like_food",a.userInfo.like_food),a.updateInfo=function(n){return n?(r.fromTemplateUrl("/wechat/web/templates/"+n+".html",{scope:a,animation:"slide-in-right"}).then(function(i){a.infoModal=i,a.infoModal.show()&&ar.processData(n,a,e,t,d,s)}),void(a.saveClose=function(){a.userInfo=ar.getStorage("userInfo"),a.userInfo.info=JSON.parse(a.userInfo.info),a.userInfo.auth=JSON.parse(a.userInfo.auth),a.infoModal.hide()})):!1},a.settingsBirthday={theme:"mobiscroll",lang:"zh",controls:["date"]},a.formData.age="年龄",a.formData.zodiac={id:0,name:"生肖"},a.formData.constellation={id:0,name:"星座"},a.birthdayChange=function(){a.userInfo.age=ar.getAgeByBirthday(ar.DateTimeToDate(a.formData.birthday)),a.formData.age=a.userInfo.age+"岁",a.formData.zodiac=ar.getZodicByBirthday(ar.DateTimeToDate(a.formData.birthday)),a.formData.constellation=ar.getConstellationByBirthday(ar.DateTimeToDate(a.formData.birthday))};for(var m=[],p=[],f=18;99>=f;f++)p.push(f),99>f&&m.push(f);a.settingsAge={theme:"mobiscroll",lang:"zh",rows:5,wheels:[[{circular:!1,data:m,label:"最低年龄"},{circular:!1,data:p,label:"最高年龄"}]],showLabel:!0,minWidth:130,cssClass:"md-pricerange",validate:function(e,a){var t,n=e.values,i=[];for(t=0;t<p.length;++t)p[t]<=n[0]&&i.push(p[t]);return{disabled:[[],i]}},formatValue:function(e){return e[0]+"-"+e[1]},parseValue:function(e){return e?e.replace(/\s/gi,"").split("-"):[18,22]}};for(var h=[],g=[],f=140;260>=f;f++)g.push(f),260>f&&h.push(f);a.settingsHeight={theme:"mobiscroll",lang:"zh",rows:5,wheels:[[{circular:!1,data:h,label:"最低身高(厘米)"},{circular:!1,data:g,label:"最高身高(厘米)"}]],showLabel:!0,minWidth:130,cssClass:"md-pricerange",validate:function(e,a){var t,n=e.values,i=[];for(t=0;t<g.length;++t)g[t]<=n[0]&&i.push(g[t]);return{disabled:[[],i]}},formatValue:function(e){return e[0]+"-"+e[1]},parseValue:function(e){return e?e.replace(/\s/gi,"").split("-"):[160,180]}},l.$on("$ionicView.beforeLeave",function(e,t){t.stateParams&&a.infoModal&&a.infoModal.isShown()&&a.closeModal()}),a.saveData=function(t){ar.processParams(a,t),e.save("/wap/member/save-data",a.userInfo).success(function(e){ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t)})["finally"](function(){a.closeModal()})},a.closeModal=function(){a.infoModal.hide(),a.infoModal.remove()}}]),module.controller("member.discovery",["app.serviceApi","$scope","$ionicPopup","$location","$ionicModal","$ionicActionSheet",function(e,a,t,n,i,o){a.formData={},a.formData.auth=1,a.discoveryList=[],a.pageSize=5,e.list("/wap/member/get-dynamic-list",{user_id:a.userInfo.id,limit:1e4}).success(function(e){if(e.data.length<1)return!1;for(var n in e.data)e.data[n].imgList=JSON.parse(e.data[n].pic),e.data[n].real_name=e.data[n].real_name.replace(/\"/g,""),e.data[n].head_pic=e.data[n].head_pic.replace(/\"/g,""),e.data[n].level=e.data[n].level.replace(/\"/g,""),e.data[n].age=e.data[n].age.replace(/\"/g,"");a.discoveryList=e.data,ar.initPhotoSwipeFromDOM(".bhy-gallery",a,t)}),a.display=ar.getStorage("display")?ar.getStorage("display"):[],a.indexFilter=function(e){return-1==a.display.indexOf(e.id)},a.jump=function(e){n.url(e)},a.more=function(t,n){o.show({buttons:[{text:"删除"}],titleText:"更多",cancelText:"取消",cancel:function(){},buttonClicked:function(i,o){return 0==i&&(a.display.push(t),ar.setStorage("display",a.display),e.save("/wap/member/delete-dynamic",{id:t}).success(function(e){a.discoveryList.splice(n,1)})),!0}})},a.clickLike=function(t){var n=ar.getArrI(a.discoveryList,"id",t.id),i=0;a.discoveryList[n].cid>0?(i=-1,a.discoveryList[n].cid=-1):(i=1,a.discoveryList[n].cid=1),a.discoveryList[n].like_num=parseInt(a.discoveryList[n].like_num)+i,e.save("/wap/member/set-click-like",{dynamicId:t.id,add:i})},a.pageSize=5,a.isMore=!0,a.loadMore=function(){a.pageSize>a.discoveryList.length&&(a.isMore=!1),a.$broadcast("scroll.infiniteScrollComplete"),a.pageSize+=5},a.moreDataCanBeLoaded=function(){return a.isMore},e.get("/wap/member/comment-num",{}).success(function(e){ar.setStorage("discoverySum",e.data)})}]),module.controller("member.discovery_add",["app.serviceApi","$scope","$rootScope","$ionicPopup","$location","$ionicActionSheet","FileUploader","$ionicLoading","$state",function(e,a,t,n,i,o,r,s,d){var l=a.uploader=new r({url:"/wap/file/thumb"});a.reportData={},a.formData={},a.formData.auth=1,a.imgList=[],a.showLoading=function(e){s.show({template:'<p class="tac">上传中...</p><p class="tac">'+e+"%</p>"})},a.hideLoading=function(){s.hide()};var c=0;a.addNewImg=function(){var e=document.getElementById("pic_fileInput"),t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t),l.filters.push({name:"file-type-Res",fn:function(e){return ar.msg_file_res_img(e)?!0:(ar.saveDataAlert(n,"只能上传图片类型的文件！"),!1)}}),l.filters.push({name:"file-size-Res",fn:function(e){return e.size>8388608?(ar.saveDataAlert(n,"请选择小于8MB的图片！"),!1):!0}}),l.onAfterAddingFile=function(e){e.upload()},l.onProgressItem=function(e,t){a.showLoading(t)},l.onSuccessItem=function(e,t,i,o){t.status>0?a.imgList.push({id:c+1,thumb_path:t.thumb_path}):ar.saveDataAlert(n,"上传图片失败！"),ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n)},l.onErrorItem=function(e,t,i,o){ar.saveDataAlert(n,"上传图片出错！"),a.hideLoading()},l.onCompleteItem=function(e,t,n,i){a.hideLoading()}},a.delImg=function(e,t){e.stopPropagation(),e.preventDefault(),a.imgList.splice(t,1)},a.saveData=function(){var o=ar.getStorage("userInfo");if(o.info=JSON.parse(o.info),o.auth=JSON.parse(o.auth),!o.info.head_pic)return n.alert({template:"没有头像不可以发布动态哦，点击确定去设置头像！",okText:"确定"}).then(function(){i.url("/member/information")}),!1;if(!a.formData.content)return ar.saveDataAlert(n,"说点什么吧，不要为难小的哦。"),!1;s.show({template:"发布中..."});var o=ar.getStorage("userInfo");a.formData.name=JSON.parse(o.info).real_name,a.formData.pic=JSON.stringify(a.imgList),e.save("/wap/member/add-user-dynamic",a.formData).success(function(e){var a=n.alert({template:e.msg,okText:"确定"});a.then(function(){e.status?i.$$search.tempUrl?i.url(i.$$search.tempUrl):(i.url("/discovery"),t.$broadcast("reload",1)):window.location.reload()})}).error(function(e){alert(e.msg)})["finally"](function(){s.hide()})}}]),module.controller("member.follow",["app.serviceApi","$scope","$ionicPopup","$ionicLoading","$location","$ionicActionSheet",function(e,a,t,n,i,o){a.followType=void 0==ar.getCookie("follow")?"follow":ar.getCookie("follow"),a.followList=[],a.followedList=[],e.list("/wap/follow/set-checked",{user_id:a.userInfo.user_id}).success(function(e){console.log(e)}),e.list("/wap/follow/follow-list",{type:"follow"}).success(function(e){for(var t in e.data)e.data[t].info=JSON.parse(e.data[t].info),e.data[t].auth=JSON.parse(e.data[t].auth);a.followList=e.data}),e.list("/wap/follow/follow-list",{type:"followed"}).success(function(e){for(var t in e.data)e.data[t].info=JSON.parse(e.data[t].info),e.data[t].auth=JSON.parse(e.data[t].auth);a.followedList=e.data}),a.delFollow=function(n,i,o){angular.element(o.target).parent().parent().addClass("item-remove-animate"),e.get("/wap/follow/del-follow",{user_id:ar.getCookie("bhy_user_id"),follow_id:n.user_id}).success(function(e){e.data?a.followList.splice(i,1):ar.saveDataAlert(t,"取消关注失败")})},a.switching=function(e){a.followType=e,ar.setCookie("follow",e)}}]),module.controller("member.user_info",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicModal","$ionicActionSheet","$ionicLoading","$location","dataFilter",function(api,$scope,$timeout,$ionicPopup,$ionicModal,$ionicActionSheet,$ionicLoading,$location,dataFilter){$scope.formData={};var userInfo=ar.getStorage("userInfo");null!=userInfo&&(userInfo.info=JSON.parse(userInfo.info),userInfo.auth=JSON.parse(userInfo.auth));var getTravel=function(name,serId){if(null!=serId&&serId){var arrSer=serId.split(",");eval("$scope."+name+"_count = "+arrSer.length),api.list("/wap/member/get-travel-list",{area_id:serId}).success(function(res){eval("$scope."+name+" = "+JSON.stringify(res.data))})}else eval("$scope."+name+"_count = 0")},getConfig=function(name,serId){if(null!=serId){var arrSer=serId.split(",");eval("$scope."+name+"_count = "+arrSer.length),api.list("/wap/member/get-config-list",{config_id:serId}).success(function(res){eval("$scope."+name+" = "+JSON.stringify(res.data))})}else eval("$scope."+name+"_count = 0")},is_privacy=function(e){switch(e){case"1":return 1;case"2":return-1!=dataFilter.data.follow.indexOf($scope.formData.userId)?1:2;case"3":return $scope.userInfo.info.level>0?1:3;case"4":return 4;default:return!1}};$scope.formData.userId=$location.$$search.userId,$scope.otherUserInfo=[],$scope.imgList=[],$scope.dynamicList=[],$scope.formData.isfollow="2",api.list("/wap/member/user-info-page-by-id",{id:$scope.formData.userId}).success(function(e){if(e.status){if($scope.otherUserInfo=e.userInfo,$scope.otherUserInfo.info=JSON.parse($scope.otherUserInfo.info),$scope.otherUserInfo.auth=JSON.parse($scope.otherUserInfo.auth),$scope.imgList=e.userPhoto.length>0?e.userPhoto:[],ar.initPhotoSwipeFromDOM(".bhy-gallery",$scope,$ionicPopup),e.dynamic)for(var a in e.dynamic)e.dynamic[a].imgList=JSON.parse(e.dynamic[a].pic),$scope.dynamicList.push(e.dynamic[a]);$scope.formData.isfollow=e.followStatus,$scope.formData.followed=e.followedStatus,$scope.qqAuth=is_privacy($scope.otherUserInfo.privacy_qq),$scope.wxAuth=is_privacy($scope.otherUserInfo.privacy_wechat),$scope.picAuth=is_privacy($scope.otherUserInfo.privacy_pic),$scope.otherUserInfo.went_travel?getTravel("went_travel",$scope.otherUserInfo.went_travel):!0,$scope.otherUserInfo.want_travel?getTravel("want_travel",$scope.otherUserInfo.want_travel):!0,$scope.otherUserInfo.love_sport?getConfig("love_sport",$scope.otherUserInfo.love_sport):!0,$scope.otherUserInfo.want_film?getConfig("want_film",$scope.otherUserInfo.want_film):!0,$scope.otherUserInfo.like_food?getConfig("like_food",$scope.otherUserInfo.like_food):!0,console.info("isfollow:",e.followStatus,"followedStatus:",e.followedStatus)}}),$scope.localChat=function(){window.location.hash="#/chat1?id="+$scope.otherUserInfo.id+"&head_pic="+$scope.otherUserInfo.info.head_pic+"&real_name="+$scope.otherUserInfo.info.real_name+"&sex="+$scope.otherUserInfo.sex+"&age="+$scope.otherUserInfo.info.age};var followData={};followData.user_id=ar.getCookie("bhy_user_id"),followData.follow_id=$scope.formData.userId,$scope.addFollow=function(){return followData.user_id==followData.follow_id?void ar.saveDataAlert($ionicPopup,"您不能关注自己"):-1!=dataFilter.data.blacked.indexOf(followData.follow_id)?void ar.saveDataAlert($ionicPopup,"您已被对方设置黑名单，关注失败"):void api.save("/wap/follow/add-follow",followData).success(function(e){e.data&&(document.getElementsByClassName("transition")[0].style.transition="all 0.5s",document.getElementsByClassName("transition")[1].style.transition="all 0.5s",$scope.formData.isfollow=1,ar.saveDataAlert($ionicPopup,"关注成功"))})}}]),module.controller("member.admin_info",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicModal","$ionicActionSheet","$ionicLoading","$location","dataFilter",function(api,$scope,$timeout,$ionicPopup,$ionicModal,$ionicActionSheet,$ionicLoading,$location,dataFilter){$scope.formData=[];var userInfo=ar.getStorage("userInfo");null!=userInfo&&(userInfo.info=JSON.parse(userInfo.info),userInfo.auth=JSON.parse(userInfo.auth));var getTravel=function(name,serId){if(null!=serId&&serId){var arrSer=serId.split(",");eval("$scope."+name+"_count = "+arrSer.length),api.list("/wap/member/get-travel-list",{area_id:serId}).success(function(res){eval("$scope."+name+" = "+JSON.stringify(res.data))})}else eval("$scope."+name+"_count = 0")},getConfig=function(name,serId){if(null!=serId){var arrSer=serId.split(",");eval("$scope."+name+"_count = "+arrSer.length),api.list("/wap/member/get-config-list",{config_id:serId}).success(function(res){eval("$scope."+name+" = "+JSON.stringify(res.data))})}else eval("$scope."+name+"_count = 0")},is_privacy=function(e){switch(e){case"1":return!0;case"2":return 1==$scope.formData.followed?!0:!1;case"3":return $scope.otherUserInfo.info.level>0?!0:!1;case"4":return!1;default:return!1}};$scope.formData.userId=$location.$$search.userId,$scope.otherUserInfo=[],$scope.imgList=[],$scope.dynamicList=[],$scope.formData.isfollow="2",api.list("/wap/member/user-info-page-by-id",{id:$scope.formData.userId}).success(function(e){if(e.status){if($scope.otherUserInfo=e.userInfo,$scope.authUserInfo=e.authUserInfo,$scope.otherUserInfo.info=JSON.parse($scope.otherUserInfo.info),$scope.otherUserInfo.auth=JSON.parse($scope.otherUserInfo.auth),$scope.imgList=e.userPhoto.length>0?e.userPhoto:[],ar.initPhotoSwipeFromDOM(".bhy-gallery",$scope,$ionicPopup),e.dynamic)for(var a in e.dynamic)e.dynamic[a].imgList=JSON.parse(e.dynamic[a].pic),$scope.dynamicList.push(e.dynamic[a]);$scope.formData.isfollow=e.followStatus,$scope.formData.followed=e.followedStatus,$scope.qqAuth=is_privacy($scope.otherUserInfo.privacy_qq),$scope.wxAuth=is_privacy($scope.otherUserInfo.privacy_wechat),$scope.picAuth=is_privacy($scope.otherUserInfo.privacy_pic),$scope.otherUserInfo.went_travel?getTravel("went_travel",$scope.otherUserInfo.went_travel):!0,$scope.otherUserInfo.want_travel?getTravel("want_travel",$scope.otherUserInfo.want_travel):!0,$scope.otherUserInfo.love_sport?getConfig("love_sport",$scope.otherUserInfo.love_sport):!0,$scope.otherUserInfo.want_film?getConfig("want_film",$scope.otherUserInfo.want_film):!0,$scope.otherUserInfo.like_food?getConfig("like_food",$scope.otherUserInfo.like_food):!0}}),$scope.localChat=function(){window.location.hash="#/chat1?id="+$scope.otherUserInfo.id+"&head_pic="+$scope.otherUserInfo.info.head_pic+"&real_name="+$scope.otherUserInfo.info.real_name+"&sex="+$scope.otherUserInfo.sex+"&age="+$scope.otherUserInfo.info.age};var followData={};followData.user_id=ar.getCookie("bhy_user_id"),followData.follow_id=$scope.formData.userId,$scope.addFollow=function(){return followData.user_id==followData.follow_id?void ar.saveDataAlert($ionicPopup,"您不能关注自己"):-1!=dataFilter.data.blacked.indexOf(followData.follow_id)?void ar.saveDataAlert($ionicPopup,"您已被对方设置黑名单，关注失败"):void api.save("/wap/follow/add-follow",followData).success(function(e){e.data&&(document.getElementsByClassName("transition")[0].style.transition="all 0.5s",document.getElementsByClassName("transition")[1].style.transition="all 0.5s",$scope.formData.isfollow="1",ar.saveDataAlert($ionicPopup,"关注成功"))})}}]),module.controller("member.privacy",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.$on("$ionicView.beforeEnter",function(){e.list("/wap/follow/get-sum-black",{}).success(function(e){a.blackSum=e.data})}),a.userInfo=ar.getStorage("userInfo"),a.userInfo.info=JSON.stringify(a.userInfo.info),a.userInfo.auth=JSON.stringify(a.userInfo.auth)}]),module.controller("member.privacy_pic",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.formData={},a.formData.privacy_pic=a.userInfo.privacy_pic?a.userInfo.privacy_pic:1,a.saveData=function(){a.userInfo.privacy_pic=a.formData.privacy_pic,e.save("/wap/member/save-data",a.userInfo).success(function(e){ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t),ar.saveDataAlert(n,"保存成功"),i.url("/member/privacy")})}}]),module.controller("member.privacy_infoSafe",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.loading=!1,a.infoSafe=function(){if(a.userInfo.info.level<1){var t=n.alert({template:"开通VIP，立即享受资料保护",okText:"现在去开通"});return t.then(function(){i.url("/member/vip")}),!1}if(1==a.userInfo.is_show){var o=n.confirm({title:"重要提示",template:"您确定要开启资料保护吗？开启后在您未主动联系其他会员时，他人均不可搜索及浏览您的资料。",okText:"我确定",cancelText:"再考虑一下"});o.then(function(t){t&&(a.loading=!0,a.userInfo.is_show="0",e.save("/wap/member/save-data",a.userInfo).success(function(e){if(a.loading=!1,e.status<1)return a.userInfo.is_show="1",ar.saveDataAlert(n,e.msg),!1;ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t)}))})}else a.loading=!0,a.userInfo.is_show="1",e.save("/wap/member/save-data",a.userInfo).success(function(e){if(a.loading=!1,e.status<1)return ar.saveDataAlert(n,e.msg),a.userInfo.is_show="0",!1;ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t)})}}]),module.controller("member.privacy_wechat",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.formData=[],a.formData.privacy_wechat=a.userInfo.privacy_wechat?a.userInfo.privacy_wechat:1,a.$on("$ionicView.afterLeave",function(){e.save("/wap/member/save-data",a.formData).success(function(e){a.userInfo.privacy_wechat=a.formData.privacy_wechat,ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t)})})}]),module.controller("member.privacy_qq",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.formData=[],a.formData.privacy_qq=a.userInfo.privacy_qq?a.userInfo.privacy_qq:1,a.$on("$ionicView.afterLeave",function(){e.save("/wap/member/save-data",a.formData).success(function(e){a.userInfo.privacy_qq=a.formData.privacy_qq,ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t)})})}]),module.controller("member.privacy_black",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.followList=[],e.list("/wap/follow/black-list",{}).success(function(e){a.followList=e.data;for(var t in a.followList)a.followList[t].info=JSON.parse(a.followList[t].info),a.followList[t].auth=JSON.parse(a.followList[t].auth)}),a.removeItem=function(t,n){e.save("/wap/follow/del-black",{id:n.id}).success(function(e){a.followList.splice(t,1)})},a.delTitle="解除",a.shouldShowDelete=!1,a.showDeleteBtn=function(){a.shouldShowDelete=!a.shouldShowDelete,a.shouldShowDelete?a.delTitle="完成":a.delTitle="解除"}}]),module.controller("member.security",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.formData=[]}]),module.controller("member.security_pass",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.formData=[],a.saveData=function(){return""==a.formData.pass?(ar.saveDataAlert(n,"请填写旧密码"),!1):""==a.formData.new_pass1||a.formData.new_pass1.length<6?(ar.saveDataAlert(n,"密码长度必须大于6个字符"),!1):a.formData.new_pass1!=a.formData.new_pass1?(ar.saveDataAlert(n,"新密码不一致"),!1):void e.save("/wap/user/reset-password",a.formData).success(function(e){if(e.data){ar.saveDataAlert(n,"密码修改成功"),a.userInfo.reset_pass_time=parseInt(e.data),ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t),i.url("/member/security")}else ar.saveDataAlert(n,"密码修改失败")})}}]),module.controller("member.security_phone",["app.serviceApi","$scope","$timeout","$ionicPopup","$interval","$location",function(e,a,t,n,i,o){a.formData={},a.getCodeTitle="获取验证码",a.getCode=function(){return ar.trim(a.formData.phone)?ar.validateMobile(a.formData.phone)?void e.getMobileIsExist(a.formData.phone).success(function(t){if(t.status<1)return ar.saveDataAlert(n,"该手机号码已存在"),!1;var o=90,r=i(function(){a.getCodeTitle="重新获取("+o+")"},1e3,90);r.then(function(){a.getCodeTitle="获取验证码",i.cancel(r)},function(){ar.saveDataAlert(n,"倒计时出错")},function(){o-=1}),e.sendCodeMsg(a.formData.phone).success(function(e){return e.status<1?(i.cancel(r),ar.saveDataAlert(n,e.msg),!1):void 0})}):(ar.saveDataAlert(n,"手机号码格式不正确"),!1):(ar.saveDataAlert(n,"请输入您的手机号码"),!1)},a.bindNow=function(){return ar.validateMobile(a.formData.phone)?void e.getMobileIsExist(a.formData.phone).success(function(t){return t.status<1?(ar.saveDataAlert(n,"该手机号码已存在"),!1):void e.validateCode(a.formData.code).success(function(t){return t.status?void e.save("/wap/user/update-user-data",{phone:a.formData.phone}).success(function(e){if(e.data){a.userInfo.phone=a.formData.phone,ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t);var i=n.alert({title:"重要提示",template:"绑定成功，您的初始密码为："+ar.getPassByPhone(a.formData.phone)+"，请及时修改您的密码。"});i.then(function(e){o.url("/member/security")})}else ar.saveDataAlert(n,"手机绑定失败")}):(ar.saveDataAlert(n,"验证码不正确"),!1)})}):(ar.saveDataAlert(n,"手机号码格式不正确"),!1)}}]),module.controller("member.edit_phone",["app.serviceApi","$scope","$timeout","$ionicPopup","$interval","$location","$ionicModal",function(e,a,t,n,i,o,r){a.formData={},a.validate={},a.codeTitle="获取验证码",r.fromTemplateUrl("sendCodeModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.modal=e}),a.openSendCodeModal=function(){a.modal.show()},a.closeSendCodeModal=function(){a.modal.hide()},a.getCode=function(){return a.formData.phone!=parseInt(a.userInfo.phone)?(ar.saveDataAlert(n,"旧手机号码错误！"),!1):void a.openSendCodeModal()},a.sendCode=function(){e.get("/wap/user/check-code",{verify_code:a.validate.verify}).success(function(t){if(!t)return ar.saveDataAlert(n,"验证码不正确"),angular.element(document.querySelectorAll("#verify")[0]).attr("src","/wap/user/get-verify?time="+ar.timeStamp()),!1;a.closeSendCodeModal();var o=60,r=i(function(){a.codeTitle="重新获取("+o+")"},1e3,60);r.then(function(){a.codeTitle="获取验证码",i.cancel(r)},function(){ar.saveDataAlert(n,"倒计时出错")},function(){o-=1}),e.sendCodeMsg(a.userInfo.phone).success(function(e){e.status<1&&(i.cancel(r),ar.saveDataAlert(n,e.msg))})})},a.next=function(){return a.formData.phone!=parseInt(a.userInfo.phone)?(ar.saveDataAlert(n,"旧手机号码错误！"),!1):void e.validateCode(a.formData.code).success(function(e){return e.status?void o.url("/member/edit_phone_new"):(ar.saveDataAlert(n,"验证码错误"),!1)})}}]),module.controller("member.edit_phone_new",["app.serviceApi","$scope","$timeout","$ionicPopup","$interval","$location","$ionicModal",function(e,a,t,n,i,o,r){a.formData={},a.validate={},a.getCodeTitle="获取验证码",r.fromTemplateUrl("sendCodeModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.modal=e}),a.openSendCodeModal=function(){a.modal.show()},a.closeSendCodeModal=function(){a.modal.hide()},a.getCode=function(){return ar.trim(a.formData.phone)?ar.validateMobile(a.formData.phone)?void e.getMobileIsExist(a.formData.phone).success(function(e){return e.status<1?(ar.saveDataAlert(n,"该手机号码已存在"),!1):void a.openSendCodeModal()}):(ar.saveDataAlert(n,"手机号码格式不正确"),!1):(ar.saveDataAlert(n,"请输入您的手机号码"),!1)},a.sendCode=function(){e.get("/wap/user/check-code",{verify_code:a.validate.verify}).success(function(t){if(!t)return ar.saveDataAlert(n,"验证码不正确"),angular.element(document.querySelectorAll("#verify")[0]).attr("src","/wap/user/get-verify?time="+ar.timeStamp()),!1;a.closeSendCodeModal();var o=60,r=i(function(){a.getCodeTitle="重新获取("+o+")"},1e3,60);r.then(function(){a.getCodeTitle="获取验证码",i.cancel(r)},function(){ar.saveDataAlert(n,"倒计时出错")},function(){o-=1}),e.sendCodeMsg(a.formData.phone).success(function(e){e.status<1&&(i.cancel(r),ar.saveDataAlert(n,e.msg))})})},a.bindNow=function(){return ar.validateMobile(a.formData.phone)?void e.getMobileIsExist(a.formData.phone).success(function(t){return t.status<1?(ar.saveDataAlert(n,"该手机号码已存在"),!1):void e.validateCode(a.formData.code).success(function(t){return t.status?void e.save("/wap/user/update-user-data",{phone:a.formData.phone}).success(function(e){if(e.data){a.userInfo.phone=a.formData.phone,ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t);var i=n.alert({template:"绑定成功",okText:"确定"});i.then(function(){o.url("/member/security")})}else ar.saveDataAlert(n,"手机绑定失败")}):(ar.saveDataAlert(n,"验证码不正确"),!1)})}):(ar.saveDataAlert(n,"手机号码格式不正确"),!1)}}]),module.controller("member.security_wechat",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.formData=[],a.formData.wechat=a.userInfo.info.wechat,a.saveData=function(){if(alert(a.formData.wechat),a.formData.wechat)e.save("/wap/member/save-data",a.formData).success(function(e){a.userInfo.info.wechat=a.formData.wechat,ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t),i.url("/member/security")});else{if(!confirm("检测到您还未填写微信号，确定放弃吗？"))return!1;i.url("/member/security")}}}]),module.controller("member.security_qq",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.formData=[],a.formData.qq=a.userInfo.info.qq,a.saveData=function(){if(""==a.formData.qq||"undefined"==typeof a.formData.qq){if(!confirm("检测到您还未填写QQ号，确定放弃吗？"))return!1;i.url("/member/security")}else e.save("/wap/member/save-data",a.formData).success(function(e){a.userInfo.info.qq=a.formData.qq,ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t),i.url("/member/security")})}}]),module.controller("member.honesty",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){e.list("/wap/member/honesty-photo",[]).success(function(e){a.sfzCheck=e.sfz,a.marrCheck=e.marr,a.eduCheck=e.edu,a.housingCheck=e.housing})}]),module.controller("member.honesty_sfz",["app.serviceApi","$scope","$timeout","$ionicPopup","FileUploader","$location",function(e,a,t,n,i,o){var r=a.uploader=new i({url:"/wap/file/thumb"});e.list("/wap/member/photo-list",{type:23,pageSize:2}).success(function(e){a.authList=e.data}),a.imgList=[],ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n),a.formData=[],a.formData.real_name=a.userInfo.info.real_name,a.addNewImg=function(e){a.uploaderImage(r,e),ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n)},a.$on("thumb_path",function(e,t,n){"honesty1"==t?a.authList[0]?a.authList[0].thumb_path=n.thumb_path:a.authList[0]=n:a.authList[1]?a.authList[1].thumb_path=n.thumb_path:a.authList[1]=n}),a.saveData=function(){return a.authList[0]?a.authList[1]?a.formData.real_name?(a.authList[0].type=2,a.authList[1].type=3,void e.save("/wap/member/save-photo",a.authList).success(function(t){var n=[];n.identity=a.formData.real_name,a.userInfo.info.real_name=a.formData.real_name,a.userInfo.has_identify=1,e.save("/wap/member/save-data",a.userInfo).success(function(e){ar.setStorage("userInfo",a.userInfo);var t=ar.getStorage("userInfo");t.info=JSON.stringify(t.info),t.auth=JSON.stringify(t.auth),ar.setStorage("userInfo",t),o.url("/member/honesty"),a.sfzCheck=2})})):(ar.saveDataAlert(n,"请填写您的真实姓名，本站前台只显示您的姓氏。"),!1):(ar.saveDataAlert(n,"请上传身份证反面照片"),!1):(ar.saveDataAlert(n,"请上传身份证正面照片"),!1)}}]),module.controller("member.honesty_marr",["app.serviceApi","$scope","$timeout","$ionicPopup","FileUploader",function(e,a,t,n,i){e.list("/wap/member/photo-list",{type:5,pageSize:1}).success(function(e){a.authList=e.data,ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n)}),a.imgList=[];var o=a.uploader=new i({url:"/wap/file/auth-pictures?type=5"});a.addNewImg=function(e){a.uploaderImage(o,e),ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n)},a.$on("thumb_path",function(e,t,i){a.authList[0]?a.authList[0].thumb_path=i.thumb_path:a.authList[0]=i,ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n),ar.saveDataAlert(n,"上传成功")})}]),module.controller("member.honesty_edu",["app.serviceApi","$scope","$timeout","$ionicPopup","FileUploader",function(e,a,t,n,i){e.list("/wap/member/photo-list",{type:4,pageSize:1}).success(function(e){a.authList=e.data,ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n)}),a.imgList=[];var o=a.uploader=new i({url:"/wap/file/auth-pictures?type=4"});a.addNewImg=function(e){a.uploaderImage(o,e)},a.$on("thumb_path",function(e,t,i){a.authList[0]?a.authList[0].thumb_path=i.thumb_path:a.authList[0]=i,ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n),ar.saveDataAlert(n,"上传成功")})}]),module.controller("member.honesty_housing",["app.serviceApi","$scope","$timeout","$ionicPopup","FileUploader",function(e,a,t,n,i){e.list("/wap/member/photo-list",{type:6,pageSize:1}).success(function(e){a.authList=e.data,ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n)}),a.imgList=[];var o=a.uploader=new i({url:"/wap/file/auth-pictures?type=6"});a.addNewImg=function(e){a.uploaderImage(o,e)},a.$on("thumb_path",function(e,t,i){a.authList[0]?a.authList[0].thumb_path=i.thumb_path:a.authList[0]=i,ar.initPhotoSwipeFromDOM(".bhy-gallery",a,n),ar.saveDataAlert(n,"上传成功")})}]),module.controller("member.vip",["app.serviceApi","$scope","$timeout","$ionicPopup","$interval","$location",function(e,a,t,n,i,o){a.formData=[],e.save("/wap/charge/get-charge-goods-list",{type:1}).success(function(e){a.goodsList=e}),a.createOrder=function(a){e.save("/wap/charge/produce-order",{goodsId:a,user_id:ar.getCookie("bhy_user_id")}).success(function(e){e.status<1?ar.saveDataAlert(n,e.msg):o.url("/charge_index?orderId="+e.data)})}}]),module.controller("member.account",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){
a.find=!0,a.showMoney=function(){a.find=!1,t(function(){a.loading=!0,e.get("/wap/member/get-user-balance",{}).success(function(e){a.loading=!1,a.money=parseInt(e.data.balance)})},800)},a.timestamp=ar.timeStamp(),e.get("/wap/member/get-user-service-info",{}).success(function(e){a.serviceInfo=e.data,a.serviceInfo.level=ar.cleanQuotes(a.serviceInfo.level),console.log(a.serviceInfo)})}]),module.controller("member.balance",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.formData={},a.formData.customize=10,a.pay=function(){return!a.formData.money||a.formData.money<1?(ar.saveDataAlert(n,"选择充值金额异常，请刷新重试！"),!1):void e.save("/wap/charge/produce-order",{goodsId:8,money:a.formData.money}).success(function(e){e.status<1?ar.saveDataAlert(n,e.msg):i.url("/charge_index?orderId="+e.data)})},a.customizePay=function(){return a.formData.customize?a.formData.customize<1||a.formData.customize>2e4?(ar.saveDataAlert(n,"单次最少充值1元，最多充值20000元。"),!1):void e.save("/wap/charge/produce-order",{goodsId:9,money:a.formData.customize}).success(function(e){e.status<1?ar.saveDataAlert(n,e.msg):i.url("/charge_index?orderId="+e.data)}):(ar.saveDataAlert(n,"请您输入充值金额！"),!1)}}]),module.controller("member.account_record",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.recordList=[],e.get("/wap/member/get-record-list",{}).success(function(e){e.status>0&&(a.recordList=e.data)}),a.pageSize=1,a.isMore=!0,a.loadMoreData=function(){a.pageSize>a.recordList.length&&(a.isMore=!1),a.pageSize+=1,a.$broadcast("scroll.infiniteScrollComplete")},a.moreDataCanBeLoaded=function(){return a.isMore}}]),module.controller("member.account_record_info",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.item=angular.fromJson(i.$$search.item)}]),module.controller("member.account_bribery",["app.serviceApi","$scope","$timeout","$ionicPopup","$location","$filter",function(e,a,t,n,i,o){a.tab=1,a.yearList=[];for(var r=2016;r<=(new Date).getFullYear();r++)a.yearList.push({id:r,name:r+"年"});a.year=a.yearList[a.yearList.length-1].id,a.briberyList=[],e.list("/wap/member/bribery-list",{flag:!1,page:a.page}).success(function(e){var t=ar.cleanQuotes(JSON.stringify(e.data));a.briberyList=a.briberyList.concat(JSON.parse(t))}),e.list("/wap/member/bribery-list",{flag:!0,page:a.page}).success(function(e){var t=ar.cleanQuotes(JSON.stringify(e.data));a.briberyList=a.briberyList.concat(JSON.parse(t))}),a.numAndmoney={number:0,money:0};for(var r in a.briberyList)a.briberyList[r].flag==a.tab&&1==a.briberyList[r].status&&a.briberyList[r].year==a.year&&(a.numAndmoney.number+=1,a.numAndmoney.money+=a.briberyList[r].money);a.isMore=!0,a.pageSize=5,a.loadMore=function(){a.pageSize>a.numAndmoney.number&&(a.isMore=!1),a.pageSize+=5,a.$broadcast("scroll.infiniteScrollComplete")},a.moreDataCanBeLoaded=function(){return a.isMore},a.showTab=function(e){a.numAndmoney.number=0,a.numAndmoney.money=0,a.tab=e;for(var t in a.briberyList)a.briberyList[t].flag==e&&1==a.briberyList[t].status&&a.briberyList[t].year==a.year&&(a.numAndmoney.number+=1,a.numAndmoney.money+=a.briberyList[t].money)}}]),module.controller("member.account_withdraw",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicModal","$interval","$ionicLoading","$location",function(e,a,t,n,i,o,r,s){a.formData=[],a.form=[],a.codeTitle="获取验证码",e.get("/wap/member/get-user-balance",{}).success(function(e){a.money=parseInt(e.data.balance)/100}),a.phone=a.userInfo.phone,i.fromTemplateUrl("selectCardModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.modal=e}),a.showSelectCard=function(){a.modal.show()},a.selectedCard=function(){a.modal.hide()},e.list("/wap/member/cash-card-list").success(function(e){a.cardList=e.data,a.formData.bank=a.cardList[0]}),a.getCode=function(){if(a.form.phone!=a.phone)return ar.saveDataAlert(n,"输入的手机号码与绑定手机号码不符，请检查！"),!1;e.sendCodeMsg(a.form.phone).success(function(e){e||ar.saveDataAlert(n,"获取验证码失败")});var t=60,i=o(function(){a.codeTitle="重新获取("+t+")"},1e3,60);i.then(function(){a.codeTitle="获取验证码",o.cancel(i)},function(){ar.saveDataAlert(n,"倒计时出错")},function(){t-=1})},a.saveData=function(){r.show({template:"处理中..."}),e.validateCode(a.form.code).success(function(t){return t.status?void e.get("/wap/member/add-cash-info",{money:a.formData.money,cash_card_id:a.formData.bank.id}).success(function(e){r.hide(),e.status>0?s.url("/member/account_withdraw_info?id="+e.data):ar.saveDataAlert(n,e.msg)}):(r.hide(),void ar.saveDataAlert(n,"验证码错误"))})}}]),module.controller("member.account_withdraw_info",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicModal","$interval","$ionicLoading","$location",function(e,a,t,n,i,o,r,s){i.fromTemplateUrl("statusModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.modal=e}),a.showStatus=function(){a.modal.show()},a.hideStatus=function(){a.modal.hide()},a.withdrawInfo={},e.get("/wap/member/get-withdraw-info-by-id",{id:s.$$search.id}).success(function(e){a.withdrawInfo=e.data})}]),module.controller("member.account_mycard",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){e.list("/wap/member/cash-card-list").success(function(e){a.cardList=e.data}),a["delete"]=function(t,i){var o=n.confirm({title:"确定删除？",template:!1,cancelText:"点错了",okText:"确定"});o.then(function(o){return o?void e.save("/wap/member/del-card",{id:i.id}).success(function(e){e.status>0?a.cardList.splice(t,1):ar.saveDataAlert(n,e.msg)}):!1})}}]),module.controller("member.account_mycard_info",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.cardId=i.$$search.id,e.list("/wap/member/cash-card-by-id",{id:a.cardId}).success(function(e){a.bankData=e.data})}]),module.controller("member.account_add_card",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.formData=[],a.formData.user_name=a.userInfo.info.real_name,e.list("/wap/member/bank-list",{}).success(function(e){a.bankData=e.data}),a.bankNameChain=function(){if(!a.formData.card_no)return ar.saveDataAlert(n,"请输入银行卡号"),!1;if(19!=a.formData.card_no.length&&16!=a.formData.card_no.length)return ar.saveDataAlert(n,"请核对银行卡号是否正确"),!1;for(var e in a.bankData)if(-1!=a.formData.card_no.indexOf(a.bankData[e].bin)){a.bankData[e].name.split("-"),a.formData.name=a.bankData[e].name.split("-")[0]+"-"+a.bankData[e].name.split("-")[2];break}},a.saveData=function(){return a.formData.card_no?19!=a.formData.card_no.length&&16!=a.formData.card_no.length?(ar.saveDataAlert(n,"请核对银行卡号是否正确"),!1):a.formData.name?void e.save("/wap/member/add-cash-card",a.formData).success(function(e){e.status>0?i.url(i.$$search.tempUrl):ar.saveDataAlert(n,e.msg)}):(ar.saveDataAlert(n,"未自动补全卡类型，请核对您的银行卡号！"),!1):(ar.saveDataAlert(n,"请输入银行卡号"),!1)}}]),module.controller("member.rendezvous",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){}]),module.controller("member.rendezvous_add",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicModal","$location",function(e,a,t,n,i,o){a.formData=[],o.$$search.id&&e.list("/wap/rendezvous/get-rendezvous-info",{id:o.search().id}).success(function(e){a.formData=e.data,a.formData.theme=parseInt(a.formData.theme)}),a.jump=function(){o.$$search.tempUrl?o.url("/rendezvous"):o.url("/member/rendezvous")},i.fromTemplateUrl("themeModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.themeModal=e}),a.openThemeModal=function(){a.themeModal.show()},a.closeThemeModal=function(){a.themeModal.hide()},i.fromTemplateUrl("themeTitleModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.themeTitleModal=e}),a.openThemeTitleModal=function(){a.themeTitleModal.show()},a.closeThemeTitleModal=function(){a.themeTitleModal.hide()},i.fromTemplateUrl("sexModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.sexModal=e}),a.openSexModal=function(){a.sexModal.show()},a.closeSexModal=function(){a.sexModal.hide()},i.fromTemplateUrl("fromModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.fromModal=e}),a.openFromModal=function(){a.fromModal.show()},a.closeFromModal=function(){a.fromModal.hide()},i.fromTemplateUrl("destinationModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.destinationModal=e}),a.openDestinationModal=function(){a.destinationModal.show()},a.closeDestinationModal=function(){a.destinationModal.hide()},i.fromTemplateUrl("dateModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.dateModal=e}),a.openDateModal=function(){a.dateModal.show()},a.closeDateModal=function(){a.dateModal.hide()},i.fromTemplateUrl("moneyModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.moneyModal=e}),a.openMoneyModal=function(){a.moneyModal.show()},a.closeMoneyModal=function(){a.moneyModal.hide()},i.fromTemplateUrl("requirementModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.requirementModal=e}),a.openRequirementModal=function(){a.requirementModal.show()},a.closeRequirementModal=function(){a.requirementModal.hide()},a.formData.sex="0",a.formData.themeList=[{id:1,title:"娱乐"},{id:2,title:"美食"},{id:3,title:"旅游"},{id:4,title:"运动健身"},{id:-1,title:"其他"}],a.saveData=function(){return a.formData.rendezvous_time=1475475e3,a.formData.theme?a.formData.title?a.formData.destination?a.formData.rendezvous_time?a.formData.fee_des?void e.save("/wap/rendezvous/release",a.formData).success(function(e){e.data&&(ar.saveDataAlert(n,"发布成功！"),o.url("/member/rendezvous_put"))}):(ar.saveDataAlert(n,"请选择费用说明"),!1):(ar.saveDataAlert(n,"请填写出发时间"),!1):(ar.saveDataAlert(n,"请填写目的地"),!1):(ar.saveDataAlert(n,"请填写约会标题"),!1):(ar.saveDataAlert(n,"请选择约会主题"),!1)}}]),module.controller("member.rendezvous_theme",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.selTheme=function(){a.closeThemeModal()}}]),module.controller("member.rendezvous_themeTitle",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.save=function(){a.closeThemeTitleModal(),console.info(a.formData.themeTitle,a.formData.content)}}]),module.controller("member.rendezvous_sex",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.selSex=function(){a.closeSexModal(),console.log(a.formData.sex)}}]),module.controller("member.rendezvous_from",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.saveFrom=function(){a.closeFromModal(),console.log(a.formData.from)}}]),module.controller("member.rendezvous_destination",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.saveDestination=function(){a.closeDestinationModal(),console.log(a.formData.destination)}}]),module.controller("member.rendezvous_date",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.saveDate=function(){a.closeDateModal(),console.log(a.formData.rendezvous_time)}}]),module.controller("member.rendezvous_money",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.selMoney=function(){a.closeMoneyModal(),console.log(a.formData.fee_des)}}]),module.controller("member.rendezvous_requirement",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.userSex=0,a.labelList=config_infoData.label,a.lab=[],a.nothing=!1,a.addLabel=function(e){-1==a.lab.indexOf(e)&&a.lab.push(e),"不限"==e&&(a.lab=[],a.lab.push(e),a.nothing=!0)},a.removeLabel=function(e,t){"不限"==t&&(a.nothing=!1),a.lab.splice(e,1)},a.saveRequirement=function(){a.closeRequirementModal(),a.formData.we_want=a.lab.join(","),console.log(a.formData.we_want)}}]),module.controller("member.rendezvous_put",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicActionSheet","$location","$ionicScrollDelegate",function(e,a,t,n,i,o,r){a.formData=[],a.dateList=[],a.putList=[],a.formData.pageNum=0;for(var s=function(t,n){var i=[];i.user_id=ar.getCookie("bhy_user_id"),i.pageNum=n+1,i.date=t,a.formData.date=t,a.formData.pageNum=n+1,e.list("/wap/rendezvous/list",i).success(function(e){e.data.length<10?a.isMore=!1:a.isMore=!0;for(var t in e.data){var n=e.data[t].we_want.split(",");e.data[t].label=[],e.data[t].label=n,a.putList.push(e.data[t])}a.$broadcast("scroll.infiniteScrollComplete")})},d=function(a,t){var n=[];n.id=a,n.status=t,e.save("/wap/rendezvous/update-status",n).success(function(e){})},l=0;6>l;l++){var c=new Date;c.setMonth(c.getMonth()-l);var u=c.getFullYear()+"年"+(c.getMonth()+1)+"月",m=c.getFullYear()+"-"+(c.getMonth()+1);a.dateList.push({title:u,value:c.toLocaleString(),time:m})}a.dateTitle=a.dateList[0].title;var p=a.dateList[0].time.split("-");a.formData.year=p[0],a.formData.month=p[1]<10?"0"+p[1]:p[1],a.datePicker=!1,a.showDate=function(){a.datePicker=!a.datePicker},a.seletedDate=function(e,t){a.dateTitle=e;var n=t.split("-");a.formData.year=n[0],a.formData.month=n[1]<10?"0"+n[1]:n[1],s(t,0),a.putList=[],a.datePicker=!1},a.isMore=!0,a.loadMore=function(){s(a.formData.date,a.formData.pageNum)},a.moreDataCanBeLoaded=function(){return a.isMore},a.showhandle=function(e,t){var r=i.show({buttons:[{text:"关闭"},{text:"修改"}],destructiveText:"删除",titleText:"操作",cancelText:"取消",cancel:function(){},destructiveButtonClicked:function(){var e=n.confirm({title:"确定删除此条记录？删除后不可恢复。",template:!1,cancelText:"点错了",okText:"确定"});e.then(function(e){return e?(d(a.putList[t].id,0),a.putList.splice(t,1),r(),void 0):!1})},buttonClicked:function(e){0==e&&(a.putList[t].status="3",d(a.putList[t].r_id,3),r()),1==e&&o.url("/member/rendezvous_add?id="+a.putList[t].r_id)}})},a.involved=function(e,a,t){o.url("/member/rendezvous_involved?id="+e+"&theme="+a+"&title="+t)},a.openTxt=!1,a.openText=function(e){e.stopPropagation(),a.openTxt=!0}}]),module.controller("member.rendezvous_part",["app.serviceApi","$scope","$timeout","$ionicPopup",function(e,a,t,n){a.formData=[],a.partList=[],a.formData.pageNum=0;var i=function(t){var n=[];n.user_id=ar.getCookie("bhy_user_id"),n.pageNum=t+1,a.formData.pageNum=t+1,e.list("/wap/rendezvous/apply-list",n).success(function(e){e.data.length<10?a.isMore=!1:a.isMore=!0;for(var t in e.data){var n=e.data[t].we_want.split(",");e.data[t].label=[],e.data[t].label=n,e.data[t].info=JSON.parse(e.data[t].info),e.data[t].auth=JSON.parse(e.data[t].auth),a.partList.push(e.data[t])}a.$broadcast("scroll.infiniteScrollComplete")})};a.isMore=!0,a.loadMore=function(){i(a.formData.pageNum)},a.moreDataCanBeLoaded=function(){return a.isMore},a.delPart=function(t,i){var o=n.confirm({title:"确定删除此条记录？删除后将不显示在对方参与列表。",template:!1,cancelText:"点错了",okText:"确定"});o.then(function(n){return n?void e.save("/wap/rendezvous/delete-apply",{id:t}).success(function(e){a.partList.splice(i,1)}):!1})},a.openTxt=!1,a.openText=function(e){e.stopPropagation(),a.openTxt=!0},a.acceptAlert=function(e){null==e||void 0==typeof e?ar.saveDataAlert(n,"请等待TA联系"):ar.saveDataAlert(n,"TA的手机号码："+e)}}]),module.controller("member.rendezvous_involved",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.partList=[],a.rendzvous=[],a.involvedList=[],a.rendzvous.id=i.$$search.id,a.rendzvous.title=i.$$search.title,a.rendzvous.theme=i.$$search.theme,e.list("/wap/rendezvous/rendezvous-apply-list",{id:i.$$search.id}).success(function(e){a.involvedList=e.data;for(var t in e.data)a.involvedList[t].info=JSON.parse(e.data[t].info),a.involvedList[t].auth=JSON.parse(e.data[t].auth)}),a.isAccept=!1,a.isIgnore=!1,a.accept=function(t,i){var o=n.confirm({title:"确定接受吗？",template:!1,cancelText:"点错了",okText:"确定"});o.then(function(n){if(!n)return!1;var o=[];o.id=t,o.status=1,e.save("/wap/rendezvous/update-apply-status",o).success(function(e){a.involvedList[i].status=1}),a.isAccept=!0})},a.ignore=function(t,i){var o=n.confirm({title:"确定忽略吗？",template:!1,cancelText:"点错了",okText:"确定"});o.then(function(n){if(!n)return!1;var o=[];o.id=t,o.status=2,e.save("/wap/rendezvous/update-apply-status",o).success(function(e){a.involvedList[i].status=2}),a.isIgnore=!0})}}]),module.controller("member.matchmaker",["app.serviceApi","$scope","$timeout","$ionicPopup","$location","$filter",function(e,a,t,n,i,o){a.matchmakerList=[];var r=[];e.list("/wap/user/get-user-info",[]).success(function(t){a.userInfo=t.data,ar.setStorage("userInfo",t.data),a.userInfo&&(a.userInfo.info=JSON.parse(a.userInfo.info),a.userInfo.auth=JSON.parse(a.userInfo.auth)),a.userInfo.matchmaking&&"0"!=a.userInfo.matchmaking?(a.title="服务红娘",a.showTitle="专属红娘",a.showMatchmaker=!0,r.matchmaker=a.userInfo.matchmaking+"-"+a.userInfo.matchmaker):a.userInfo.matchmaker&&"0"!=a.userInfo.matchmaker?(a.showMatchmaker=!0,a.title="专属红娘",r.matchmaker=a.userInfo.matchmaker):(a.showMatchmaker=!1,a.title="值班红娘",r.matchmaker=0),e.list("/wap/matchmaker/user-matchmaker-list",r).success(function(e){a.matchmakerList=e.data,0==r.matchmaker&&a.matchmakerList.length>1&&(a.matchmakerList=[],a.matchmakerList[0]=e.data[0])})}),a.getMatchmakerList=function(){"服务红娘"==a.title?(a.title="专属红娘",a.showTitle="服务红娘",a.matchmakerList.reverse()):(a.title="服务红娘",a.showTitle="专属红娘",a.matchmakerList.reverse())},a.showPhone=function(){a.phone=a.matchmakerList[0].landline?a.matchmakerList[0].landline:a.matchmakerList[0].phone,ar.saveDataAlert(n,"电话："+a.phone)}}]),module.controller("member.matchmaker_info",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.matchmakerList=[];var o=[];o.matchmaker=i.$$search.job,e.list("/wap/matchmaker/user-matchmaker-list",o).success(function(e){a.matchmakerList=e.data}),a.userInfo.matchmaking==o.matchmaker?a.title="服务红娘":a.userInfo.matchmaker==o.matchmaker?a.title="专属红娘":a.title="值班红娘"}]),module.controller("member.matchmaker_service",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){}]),module.controller("member.about",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){}]),module.controller("member.help",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){}]),module.controller("member.help_notice",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){}]),module.controller("member.help_appointment",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){}]),module.controller("member.help_protocol",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){}]),module.controller("member.help_rule",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){}]),module.controller("member.report",["app.serviceApi","$scope","$timeout","$ionicPopup","$location",function(e,a,t,n,i){a.title=i.$$search.title,a.reportData={};var o={};a.report=function(){return a.reportData.item?(o.feedback_id=i.$$search.id,o.content=a.reportData.item,o.type=i.$$search.type,o.user_name=a.userInfo.info.real_name,o.feedback_name=i.$$search.userName,void e.save("/wap/member/add-feedback",o).success(function(e){1==e.status&&(ar.saveDataAlert(n,"您的举报信息我们已受理，我们会尽快核实情况并将处理结果反馈给您，谢谢您对我们的支持！"),i.url(i.$$search.tempUrl)),-1==e.status&&(ar.saveDataAlert(n,"情况核实中，请勿重复提交！"),i.url(i.$$search.tempUrl)),0==e.status&&ar.saveDataAlert(n,"举报失败，请刷新重试！")})):(ar.saveDataAlert(n,"请选择举报内容"),!1)}}]),module.controller("member.settings",["app.serviceApi","$scope","$timeout","$ionicPopup","$location","$ionicActionSheet","$ionicModal",function(e,a,t,n,i,o,r){a.formData={};var s=[];s.user_id=ar.getCookie("bhy_user_id"),s.follow_id=i.$$search.userId,e.list("/wap/follow/get-follow-status",s).success(function(e){e.status&&(0==e.data?(a.formData.pullBlack=!0,a.formData.follow=!1):1==e.data&&(a.formData.follow=!0,a.formData.pullBlack=!1))}),a.report=function(){if(s.user_id==s.follow_id)return void ar.saveDataAlert(n,"您不能举报自己");var t=o.show({buttons:[{text:"诽谤辱骂"},{text:"淫秽色情"},{text:"血腥暴力"},{text:"垃圾广告"},{text:'<p class="lh24 mb0">欺骗</p><p class="fs12 lh24 cor4 mb0">（酒托、话费托等骗取行为）</p>'},{text:'<p class="lh24 mb0">违法行为</p><p class="fs12 lh24 cor4 mb0">（涉毒、暴恐、违禁品等）</p>'},{text:"冒用他人照片"},{text:"资料不真实"}],titleText:"举报",cancelText:"取消",buttonClicked:function(o){e.save("/wap/member/add-feedback",{content:config_infoData.feedback[o],feedback_id:s.follow_id,feedback_name:i.$$search.userName,user_name:a.userInfo.info.real_name}).success(function(e){t(),e.status?ar.saveDataAlert(n,"举报成功，工作人员会尽快核实情况。"):ar.saveDataAlert(n,"举报失败，请刷新重试！")})}})},a.delFollow=function(){e.get("/wap/follow/del-follow",s).success(function(e){e.status?a.formData.follow=!1:ar.saveDataAlert(n,"取消关注失败")})},a.pullTheBlack=function(){if(a.formData.pullBlack){if(s.user_id==s.follow_id)return ar.saveDataAlert(n,"您不能拉黑自己"),void(a.formData.pullBlack=!1);var t=ar.saveDataConfirm(n,"确定将对方拉黑吗？拉黑后在“个人-隐私设置-黑名单”中解除。");t.then(function(t){return t?void e.save("/wap/follow/black-follow",s).success(function(e){return e.status?(a.formData.pullBlack=!0,ar.saveDataAlert(n,"已将对方列入黑名单，如需解除请至“个人-隐私设置-黑名单”中解除。"),!0):(ar.saveDataAlert(n,"操作失败，请刷新重试！"),!1)}):(a.formData.pullBlack=!1,!1)})}else a.delFollow(),console.log("取消拉黑")},r.fromTemplateUrl("reBackModal.html",{scope:a,animation:"slide-in-right"}).then(function(e){a.modal=e}),a.openModal=function(){a.modal.show()},a.closeModal=function(){a.modal.hide()}}]),module.controller("member.bindPhone",["app.serviceApi","$scope","$timeout","$ionicPopup","$location","$interval","$ionicModal","$ionicLoading",function(e,a,t,n,i,o,r,s){a.formData={},a.getCodeTitle="获取验证码",a.validate={},r.fromTemplateUrl("sendCodeModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.modal=e}),a.openSendCodeModal=function(){a.modal.show()},a.closeSendCodeModal=function(){a.modal.hide()},a.getCode=function(){return ar.trim(a.formData.phone)?ar.validateMobile(a.formData.phone)?void e.getMobileIsExist(a.formData.phone).success(function(e){return e.status<1?(ar.saveDataAlert(n,"该手机号码已存在"),!1):void a.openSendCodeModal()}):(ar.saveDataAlert(n,"手机号码格式不正确"),!1):(ar.saveDataAlert(n,"请输入您的手机号码"),!1)},a.sendCode=function(){e.get("/wap/user/check-code",{verify_code:a.validate.verify}).success(function(t){if(!t)return ar.saveDataAlert(n,"验证码不正确"),angular.element(document.querySelectorAll("#verify")[0]).attr("src","/wap/user/get-verify?time="+ar.timeStamp()),!1;a.closeSendCodeModal();var i=60,r=o(function(){a.getCodeTitle="重新获取("+i+")"},1e3,60);r.then(function(){a.getCodeTitle="获取验证码",o.cancel(r)},function(){ar.saveDataAlert(n,"倒计时出错")},function(){i-=1}),e.sendCodeMsg(a.formData.phone).success(function(e){e.status<1&&(o.cancel(r),ar.saveDataAlert(n,e.msg))})})},a.bindNow=function(){return ar.validateMobile(a.formData.phone)?(s.show(),void e.getMobileIsExist(a.formData.phone).success(function(t){return s.hide(),t.status<1?(ar.saveDataAlert(n,"该手机号码已存在"),!1):void e.validateCode(a.formData.code).success(function(t){return s.hide(),t.status?void e.save("/wap/user/update-user-data",{phone:a.formData.phone}).success(function(e){if(s.hide(),e.data){var t=n.alert({template:"恭喜，手机绑定成功！",okText:"确定"});t.then(function(){a.userInfo.phone=a.formData.phone,ar.setStorage("userInfo",a.userInfo);var e=ar.getStorage("userInfo");e.info=JSON.stringify(e.info),e.auth=JSON.stringify(e.auth),ar.setStorage("userInfo",e),window.history.back()})}else ar.saveDataAlert(n,"手机绑定失败")}).error(function(){s.hide(),ar.saveDataAlert(n,"网络错误，请重试！")}):(ar.saveDataAlert(n,"验证码不正确"),!1)}).error(function(){s.hide(),ar.saveDataAlert(n,"网络错误，请重试！")})}).error(function(){s.hide(),ar.saveDataAlert(n,"网络错误，请重试！")})):(ar.saveDataAlert(n,"手机号码格式不正确"),!1)}}]),module}),define("app/controller/discovery",["app/module","app/directive/directiveApi","app/service/serviceApi"],function(e){e.controller("discovery.index",["app.serviceApi","$rootScope","$scope","$timeout","$ionicPopup","$ionicModal","$ionicActionSheet","$ionicLoading","$location","$filter","FileUploader","dataFilter",function(e,a,t,n,i,o,r,s,d,l,c,u){t.reportData={},t.formData={},t.formData.auth=1,t.discoveryList=[],t.display=ar.getStorage("display")?ar.getStorage("display"):[],t.indexFilter=function(e){return e.user_id==t.userInfo.user_id?!0:e.fid>0?!1:"2"==e.auth?-1!=u.data.follow.indexOf(e.user_id)&&-1==t.display.indexOf(e.id):"4"==e.auth?!1:-1==u.data.blacked.indexOf(e.user_id)&&-1==t.display.indexOf(e.id)},t.jump=function(e,a,n){"userInfo"==n&&(a>=1e4?a==t.userInfo.user_id?d.url("/member/information"):d.url("/userInfo?userId="+a):a==t.userInfo.user_id?d.url("/member/admin_information"):d.url("/admin_info?userId="+a)),"single"==n&&d.url("/discovery_single?id="+e)},t.more=function(a,n,i){if(n.user_id>=1e4)var o=[{text:"举报"},{text:"屏蔽"}];else var o=[{text:"屏蔽"}];a&&(o=[{text:"删除"}]),r.show({buttons:o,titleText:"更多",cancelText:"取消",cancel:function(){},buttonClicked:function(a,o){return"屏蔽"==o.text&&(n.moreLoading=!0,t.display.push(n.id),ar.setStorage("display",t.display),t.discoveryList.splice(i,1),n.moreLoading=!1),"举报"==o.text&&d.url("/member/report?id="+n.id+"&userName="+n.real_name+"&type=2&title=动态&tempUrl="+d.$$url),"删除"==o.text&&(n.moreLoading=!0,e.save("/wap/member/delete-dynamic",{id:n.id}).success(function(e){t.display.push(n.id),ar.setStorage("display",t.display),t.discoveryList.splice(i,1),n.moreLoading=!1})),!0}})},t.clickLike=function(a){var n=ar.getArrI(t.discoveryList,"id",a.id),i=0;t.discoveryList[n].cid>0?(i=-1,t.discoveryList[n].cid=-1):(i=1,t.discoveryList[n].cid=1),t.discoveryList[n].like_num=parseInt(t.discoveryList[n].like_num)+i,e.save("/wap/member/set-click-like",{dynamicId:a.id,add:i})},t.page=0,t.isMore=!0,t.loadMore=function(){e.list("/wap/member/get-dynamic-list",{user_id:d.$$search.userId,page:t.page}).success(function(e){e.data.length<1&&(t.isMore=!1);for(var a in e.data)e.data[a].imgList=JSON.parse(e.data[a].pic),e.data[a].real_name=e.data[a].real_name.replace(/\"/g,""),e.data[a].head_pic=e.data[a].head_pic.replace(/\"/g,""),e.data[a].level=e.data[a].level.replace(/\"/g,""),e.data[a].age=e.data[a].age.replace(/\"/g,""),t.discoveryList.push(e.data[a]);t.page+=1,ar.initPhotoSwipeFromDOM(".bhy-gallery",t,i)})["finally"](function(){n(function(){t.$broadcast("scroll.infiniteScrollComplete")},800)})},t.doRefresh=function(){var a={};a.limit=t.discoveryList.length,e.list("/wap/member/get-dynamic-list?timestamp="+(new Date).getTime(),a).success(function(e){t.discoveryList=[];for(var a in e.data)e.data[a].imgList=JSON.parse(e.data[a].pic),e.data[a].real_name=e.data[a].real_name.replace(/\"/g,""),e.data[a].head_pic=e.data[a].head_pic.replace(/\"/g,""),e.data[a].level=e.data[a].level.replace(/\"/g,""),e.data[a].age=e.data[a].age.replace(/\"/g,""),t.discoveryList.push(e.data[a]);ar.initPhotoSwipeFromDOM(".bhy-gallery",t,i)})["finally"](function(){n(function(){t.$broadcast("scroll.refreshComplete")},800)})},t.moreDataCanBeLoaded=function(){return t.isMore},a.$on("reload",function(e,a){a&&t.doRefresh()})}]),e.controller("discovery.single",["app.serviceApi","$scope","$location","$ionicActionSheet","$ionicModal","$ionicPopup","$ionicScrollDelegate","$timeout",function(e,a,t,n,i,o,r,s){a.formData={},a.formData["private"]=!1,a.isMore=!0,a.pageSize=20,a.commentList=[],a.isShowCommentList=!0,a.jump=function(e){e>=1e4?e==a.userInfo.id?t.url("/member/information"):t.url("/userInfo?userId="+e):e==a.userInfo.id?t.url("/member/admin_information"):t.url("/admin_info?userId="+e)},a.display=ar.getStorage("display")?ar.getStorage("display"):[],a.showComment=function(){a.isShowCommentList=!a.isShowCommentList,r.$getByHandle("discoveryMain").resize()};var d=ar.getStorage("userInfo"),l=JSON.parse(d.info);a.user_id=d.id,e.list("/wap/member/get-dynamic",{id:t.$$search.id}).success(function(e){e.data.imgList=JSON.parse(e.data.pic),e.data.real_name=e.data.real_name.replace(/\"/g,""),e.data.head_pic=e.data.head_pic.replace(/\"/g,""),e.data.level=e.data.level.replace(/\"/g,""),e.data.age=e.data.age.replace(/\"/g,""),a.dis=e.data;for(var t in e.data.comment)e.data.comment[t].headPic=e.data.comment[t].headPic.replace(/\"/g,""),e.data.comment[t].name=e.data.comment[t].name.replace(/\"/g,""),e.data.comment[t].age=e.data.comment[t].age.replace(/\"/g,"");a.commentList=e.data.comment,ar.initPhotoSwipeFromDOM(".bhy-gallery",a,o)}),a.clickLike=function(t){var n=0;a.dis.cid>0?(n=-1,a.dis.cid=-1):(n=1,a.dis.cid=1),a.dis.like_num=parseInt(a.dis.like_num)+n,e.save("/wap/member/set-click-like",{dynamicId:t.id,add:n})},a.checkPrivate=function(){a.formData["private"]=!a.formData["private"],a.formData["private"]&&ar.saveDataAlert(o,"私密评论将只有您和该条动态发布者可见此条评论。")},a.sendComment=function(){a.formData.dynamicId=t.$$search.id,e.save("/wap/member/add-comment",a.formData).success(function(e){e.data.id>0&&(a.commentList.push({id:e.data.id,user_id:d.id,headPic:l.head_pic,name:l.real_name,"private":"true"==a.formData["private"]?1:0,create_time:e.data.create_time,content:a.formData.content,age:a.userInfo.info.age,sex:a.userInfo.sex}),a.dis.comment_num=parseInt(a.dis.comment_num)+1,a.formData.content="",r.scrollBottom(!0))})},a.more=function(i,o){if(o.user_id>=1e4)var r=[{text:"举报"},{text:"屏蔽"}];else var r=[{text:"屏蔽"}];i&&(r=[{text:"删除"}]),n.show({buttons:r,titleText:"更多",cancelText:"取消",cancel:function(){},buttonClicked:function(n,i){return"屏蔽"==i.text&&(a.display.push(o.id),ar.setStorage("display",a.display),t.url("/discovery")),"举报"==i.text&&t.url("/member/report?id="+o.id+"&type=2&title=动态&tempUrl="+t.$$url),"删除"==i.text&&(a.display.push(o.id),ar.setStorage("display",a.display),e.save("/wap/member/delete-dynamic",{id:o.id}).success(function(e){t.url("/discovery")})),!0}})},a.loadMore=function(){e.list("/wap/member/get-dynamic",{id:t.$$search.id}).success(function(e){a.pageSize>e.commentCount&&(a.isMore=!1),a.pageSize+=20})["finally"](function(){s(function(){a.$broadcast("scroll.infiniteScrollComplete")},800)})},a.moreDataCanBeLoaded=function(){return a.isMore}}]),e.controller("discovery.message",["app.serviceApi","$scope","$location","$ionicActionSheet","$ionicModal","$ionicPopup","$ionicScrollDelegate",function(e,a,t,n,i,o,r){var s="";s=ar.getStorage("discoveryTime")?ar.getStorage("discoveryTime"):"",a.disList=[],e.get("/wap/member/comment-list",{create_time:s}).success(function(e){if(e.status){for(var t in e.data)e.data[t].info=JSON.parse(e.data[t].info),e.data[t].pic=JSON.parse(e.data[t].pic);a.disList=e.data}}),ar.setStorage("discoveryTime",ar.timeStamp()),e.get("/wap/member/comment-num",{}).success(function(e){a.discoverySum=e.data,ar.setStorage("discoverySum",e.data)}),a.loadData=function(){e.get("/wap/member/comment-list",{create_time:""}).success(function(e){if(e.status){for(var t in e.data)e.data[t].info=JSON.parse(e.data[t].info),e.data[t].pic=JSON.parse(e.data[t].pic);a.disList=e.data}})}}])}),define("app/controller/rendezvous",["app/module","app/directive/directiveApi","app/service/serviceApi"],function(e){e.controller("rendezvous.index",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicModal","$ionicActionSheet","$ionicLoading","$interval","$ionicScrollDelegate",function(e,a,t,n,i,o,r,s,d){a.formData=[],a.num=[],a.formData.pageNum=0,a.formData.pageSize=5,a.list=[],a.timerList=[],i.fromTemplateUrl("screenModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.screenModal=e}),a.showScreenModal=function(){a.screenModal.show()},a.closeScreenModal=function(){a.screenModal.hide()},a.isMore=!0;a.loadMoreData=function(){a.formData.pageNum+=1,e.list("/wap/rendezvous/list",a.formData).success(function(e){e.data.length<1&&(a.isMore=!1);for(var t in e.data){var n=e.data[t].we_want.split(",");e.data[t].label=[],e.data[t].label=n,e.data[t].info=angular.fromJson(e.data[t].info),e.data[t].auth=angular.fromJson(e.data[t].auth),a.list.push(e.data[t])}a.$broadcast("scroll.infiniteScrollComplete")})},a.moreDataCanBeLoaded=function(){return a.isMore},a.screen=[],a.screen.theme="0",a.screen.fee_des="0",a.screen.sex=0,a.sexChange=function(e){a.screen.sex=e},a.saveScreen=function(){a.formData.theme=a.screen.theme,a.formData.fee_des=a.screen.fee_des,a.formData.sex=a.screen.sex,a.formData.pageNum=1,a.isMore=!0,e.list("/wap/rendezvous/list",a.formData).success(function(e){e.data.length<1&&(a.isMore=!1);for(var t in e.data){var n=e.data[t].we_want.split(",");e.data[t].label=[],e.data[t].label=n,e.data[t].info=angular.fromJson(e.data[t].info),e.data[t].auth=angular.fromJson(e.data[t].auth);
}a.list=e.data}),a.screenModal.hide(),d.$getByHandle("mainScroll").scrollTop()}}]),e.controller("rendezvous.ask",["app.serviceApi","$scope","$timeout","$ionicPopup","$ionicModal","$ionicActionSheet","$ionicLoading","$ionicScrollDelegate","$interval","$location",function(e,a,t,n,i,o,r,s,d,l){function c(){return a.formData.mobile&&""!=a.formData.mobile?ar.validateMobile(a.formData.mobile)?!0:(ar.saveDataAlert(n,"手机号码格式有误"),!1):(ar.saveDataAlert(n,"请输入您的手机号码"),!1)}a.formData=[],a.formData.rendezvous_id=l.search().rendezvous_id,a.userInfo=[],a.userInfo=l.search(),a.codeTitle="获取验证码",a.isSend=!1;var u=s.$getByHandle("askScroll");window.addEventListener("native.keyboardshow",function(){u.scrollBottom()}),a.sendCode=function(){if(!c())return!1;e.sendCodeMsg(a.formData.mobile).success(function(e){return e.status?void 0:(ar.saveDataAlert(n,"短信发送失败，请稍后重试。"),!1)}),a.isSend=!0;var t=60,i=d(function(){t--,a.codeTitle=t+"重新获取"},1e3,t);i.then(function(){d.cancel(i),a.isSend=!1,a.codeTitle="获取验证码"})},a.save=function(){return c()?void e.validateCode(a.formData.code).success(function(i){i?e.save("/wap/rendezvous/add-apply",a.formData).success(function(e){e.status?(ar.saveDataAlert(n,"已向对方发送约会信息，请耐心等待对方回复"),window.location.hash="#/rendezvous",t(function(){l.url("/rendezvous")},800)):ar.saveDataAlert(n,"网络错误，请稍候重试！")}):ar.saveDataAlert(n,"验证码错误，请核对！")}):!1}}])}),define("app/controller/charge",["app/module","app/directive/directiveApi","app/service/serviceApi"],function(e){e.controller("charge.index",["app.serviceApi","$rootScope","$scope","$timeout","$ionicPopup","$ionicModal","$ionicActionSheet","$ionicLoading","$location",function(e,a,t,n,i,o,r,s,d){t.formData=[],t.orderId=d.$$search.orderId,e.get("/wap/charge/get-order",{id:t.orderId}).success(function(e){t.goods=e[0]}),t.iswx=ar.isWeChat(),t.iswx?t.formData.payType="5":t.formData.payType="4",t.pay=function(){e.get("/wap/charge/set-charge-type",{chargeTypeId:t.formData.payType}).success(function(e){e.status&&("5"==t.formData.payType?window.location.href="/wap/charge/pay?orderId="+t.orderId:window.location.href="/wap/charge/alipay?orderId="+t.orderId)})},t.jump=function(){d.url(d.$$search.tempUrl)}}]),e.controller("charge.order",["app.serviceApi","$rootScope","$scope","$timeout","$ionicPopup","$ionicModal","$ionicActionSheet","$ionicLoading","$location",function(e,a,t,n,i,o,r,s,d){t.payType=d.$$search.payType,e.save("/wap/charge/get-order",{id:d.$$search.orderId}).success(function(e){t.orderInfo=e[0]})}])}),define("app/controller/listController",["app/router","app/controller/user","app/controller/site","app/controller/message","app/controller/ioSocket","app/controller/member","app/controller/discovery","app/controller/rendezvous","app/controller/charge"],function(){}),require.config({baseUrl:"/wechat/web/js/",paths:{ionic:["//cdn.bootcss.com/ionic/1.2.4/js/ionic.bundle.min","plugin/ionic/ionic.bundle"],angular:"plugin/angular/angular.min",angular_animate:"plugin/angular/angular-animate.min",angular_sanitize:"plugin/angular/angular-sanitize.min",angular_ui_router:"plugin/angular/angular-ui-router.min",angular_upload:"plugin/angular/angular-file-upload.min",ionic_angular:"plugin/ionic/ionic-angular.min",bootstrap:"plugin/bootstrap/bootstrap.min",comm:"comm",mobiscroll:"plugin/mobiscroll/mobiscroll.custom-3.0.0-beta.min",photoswipe:"plugin/photoswipe/photoswipe.min",photoswipe_ui:"plugin/photoswipe/photoswipe-ui-default.min",info_data:"config/infoData"}}),requirejs(["ionic"],function(){requirejs(["comm","info_data","app/controller/listController","mobiscroll","angular_upload"],function(){"use strict";angular.bootstrap(document,["webApp"])})}),define("app",function(){});