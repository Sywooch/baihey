<ion-view>
    <ion-header-bar class="com_w_100">
        <button class="button button-icon "><i class="fs16 ion-android-pin positive mr5"></i><span
                ng-bind="cityName"></span></button>
        <button ng-click="search()" class="button button-icon">搜索</button>
    </ion-header-bar>
    <ion-content class="com_w_100 has-header site" delegate-handle="mainScroll">
        <div class="row" ng-if="userInfo.info">
            <div class="col col-25"><img class="item_uimg rounded" src="{{userInfo.info.head_pic}}"
                                         onerror="this.src='/wechat/web/images/u_noimg.jpg'"></div>
            <div class="col col-75">
                <div class="row pl0">
                    <div class="col" ng-if="userInfo.info.real_name">会员{{userInfo.info.real_name}}，您好！</div>
                    <div class="col" ng-if="!userInfo.info.real_name">会员{{userInfo.id}}，您好！</div>
                    <label class="label-right fs12 cor20">ID:{{userInfo.id}}</label>
                </div>

                <div class="row pl0">
                    <div class="col"><a class="warn" href="#/main/information" ng-if="!userInfo.auth.identity_pic1"><i
                            class="ion-ios-information cor0 mr5"></i>请您上传身份证，完善资料 >></a></div>
                </div>
            </div>
        </div>
        <div class="row" ng-if="!userInfo.info">
            <div class="col col-25"><img class="item_uimg rounded" src="/wechat/web/images/u_noimg.jpg"></div>
            <div class="col col-75">

                <div class="row pl0">
                    <div class="col">您好！您还没有<a href="/wap/user/login">登录</a>！</div>
                </div>

                <div class="row pl0">
                    <div class="col"></div>
                </div>
            </div>
        </div>

        <ion-list ng-if="userList.length > 0">
            <ion-item ng-repeat="user in userList" ng-if="user.id != userInfo.id">
                <div class="row">
                    <div class="col col-25"><a class="tdn" href="#/userInfo?userId={{user.user_id}}"><img class="item_uimg rounded"
                                                                       src="{{user.info.head_pic}}"
                                                                       onerror="this.src='/wechat/web/images/no_img.png'"></a>
                    </div>

                    <div class="col col-75">
                        <a class="tdn" ng-click="checkPhone('#/main/chat?id={{user.id}}&head_pic={{user.info.head_pic}}&real_name={{user.info.real_name}}&sex={{user.sex}}&age={{user.info.age}}')">
                            <div class="row pl0">
                                <div class="col">
                                    <span class="fwb fs14" ng-if="user.info.real_name">{{user.info.real_name | sex:user.sex :user.info.age}}</span>
                                    <span class="fwb fs14" ng-if="!user.info.real_name">会员ID:{{user.id}}</span>
                                    <span ng-if="user.info.age" class="cor19 fs12">{{user.age}}岁</span> <span
                                        ng-if="user.info.height"
                                        class="cor19 fs12">{{user.info.height}}cm</span>
                                    <span ng-if="user.info.is_marriage" class="cor19 fs12">{{user.info.is_marriage | marriage}}</span>
                                </div>
                                <div class="col-20" ng-if="user.info.local"><label
                                        class="label-right fs12"><i
                                        class="ion-android-pin mr5 positive"></i>{{user.info.local}}</label>
                                </div>
                            </div>

                            <div class="row pl0">
                                <p class="col fs12">
                                    <span class="identity sfz" ng-if="user.auth.identity_check">身份证</span>
                                    <span class="identity phone" ng-if="user.phone"> 手机</span>
                                    <span ng-if="user.info.level == 1" class="identity vip"> vip</span>
                                    <span ng-if="user.info.level == 2" class="identity guest"> 贵宾</span>
                                    <span ng-if="user.info.level == 3" class="identity diamond"> 钻石</span>
                                </p>
                            </div>

                            <div class="row pl0">
                                <div class="col">
                                    <p class="cor20 signature">{{user.personalized}}</p>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </ion-item>
        </ion-list>
        <ion-infinite-scroll
                ng-if="moreDataCanBeLoaded()"
                on-infinite="loadMore()"
                distance="1%">
        </ion-infinite-scroll>


        <ion-list ng-if="userList.length <= 0">
            <ion-item>
                <p class="tac">没有相关的数据，您可以放宽搜索条件后再试！</p>
            </ion-item>
        </ion-list>
    </ion-content>


    <!-- <script id="selCityModal.html" type="text/ng-template">  TODO 此功能暂时屏蔽
         <ion-modal-view>
             <ion-header-bar>
                 <button href="javascript:;" ng-click="cityModal.hide()" class="button button-icon " ng-model="searchForm.data.age"><i
                         class="fs16 ion-android-pin positive mr5"></i>{{modalCityName}}<i
                         class="ml5 fs14 ion-android-arrow-dropup positive"></i></button>
             </ion-header-bar>
             <ion-content>
                 <ion-scroll zooming="false"
                             ng-style="scrollStyle" style="border-right: 1px solid #ccc;">
                     <ion-list style="height: 3000px;">
                         <ion-item ng-repeat="province in provinceList track by province.id" item="province"
                                   class="item tac" ng-class="{true:'selected',flase:''}[pvId == province.id]"
                                   ng-click="selected_pv({{province.id}})">
                             {{province.name}}
                         </ion-item>
                     </ion-list>
                 </ion-scroll>
                 <ion-scroll zooming="false" ng-style="scrollStyle">
                     <ion-list class="city" style="height: 3000px;">
                         <ion-item ng-repeat="city in cityList track by city.id" item="city" class="item tac"
                                   ng-if="pvId == city.parentId" ng-click="selected_city({{city.id}})"
                                   ng-class="{true:'selected',flase:''}[cityId == city.id]">
                             {{city.name}} <i class="ml25 ion-ios-checkmark-outline"></i>
                         </ion-item>
                     </ion-list>
                 </ion-scroll>
             </ion-content>
         </ion-modal-view>
     </script>-->


    <script id="MoreSearchModal.html" type="text/ng-template">
        <ion-modal-view>
            <link href="/wechat/web/js/plugin/mobiscroll/mobiscroll.custom-3.0.0-beta.min.css" rel="stylesheet">
            <ion-header-bar>
                <a href="javascript:;" ng-click="moreSearchModal.hide()" class="button button-icon">取消</a>
                <h1 class="title">高级搜索</h1>
                <a href="javascript:;" ng-click="moreSearchOk()" class="button button-icon">确定</a>
            </ion-header-bar>
            <ion-content class="stable-bg">
                <div class="row mb15">
                    <div class="col-90 mr0a">
                        <label class="item item-input">
                            <input type="text" ng-model="whereForm.id" placeholder="请输入ID">
                        </label>
                    </div>
                </div>
                <div class="row">
                    <div class="col-90 mr0a">
                        <div class="moreSearch_form_box search_sex light-bg clearfix">
                            <a href="javascript:;" class="sex_item" ng-click="sexChange('all')"
                               ng-class="{1:'',0:'',all:'checked'}[whereForm.sex]">全部</a>
                            <a href="javascript:;" class="sex_item" ng-click="sexChange('1')"
                               ng-class="{1:'checked',0:'',all:''}[whereForm.sex]">男生</a>
                            <a href="javascript:;" class="sex_item" ng-click="sexChange('0')"
                               ng-class="{1:'',0:'checked',all:''}[whereForm.sex]">女生</a>
                        </div>
                        <div class="moreSearch_form_box mt10 clearfix">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    年龄
                                </div>
                                <input ng-model="whereForm.age" mobiscroll-scroller="settingsAge"
                                       mobiscroll-instance="demo"/>
                            </label>
                        </div>
                        <div class="moreSearch_form_box mt10 clearfix">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    身高
                                </div>
                                <input ng-model="whereForm.height" mobiscroll-scroller="settingsHeight"
                                       mobiscroll-instance="demo"/>
                            </label>
                        </div>
                    </div>
                </div>
                <a class="tac lh36 dbl cp" ng-click="moreToggle()">{{moreText}}更多条件 <i
                        ng-class="{true:'ion-android-arrow-dropup',false:'ion-android-arrow-dropdown'}[more]"></i></a>
                <div class="row" ng-if="more">
                    <div class="col-90 mr0a">
                        <div class="moreSearch_form_box mt10 clearfix">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    婚姻状况
                                </div>
                                <select ng-model="whereForm.is_marriage">
                                    <option value="0" selected>不限</option>
                                    <option value="{{c.id}}" ng-repeat="c in marriage">{{c.name}}</option>
                                </select>
                            </label>
                        </div>
                        <div class="moreSearch_form_box mt10 clearfix">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    有无子女
                                </div>
                                <select ng-model="whereForm.is_child">
                                    <option value="0" selected>不限</option>
                                    <option value="{{c.id}}" ng-repeat="c in children">{{c.name}}</option>
                                </select>
                            </label>
                        </div>
                        <div class="moreSearch_form_box mt10 clearfix">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    学历
                                </div>
                                <select ng-model="whereForm.education">
                                    <option value="0" selected>不限</option>
                                    <option value="{{c.id}}" ng-repeat="c in education">{{c.name}}</option>
                                </select>
                            </label>
                        </div>
                        <div class="moreSearch_form_box mt10 clearfix">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    年薪
                                </div>
                                <select ng-model="whereForm.year_income">
                                    <option value="0" selected>不限</option>
                                    <option value="{{c.id}}" ng-repeat="c in salary">{{c.name}}</option>
                                </select>
                            </label>
                        </div>
                        <div class="moreSearch_form_box mt10 clearfix">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    购房
                                </div>
                                <select ng-model="whereForm.is_purchase">
                                    <option value="0" selected>不限</option>
                                    <option value="{{c.id}}" ng-repeat="c in house">{{c.name}}</option>
                                </select>
                            </label>
                        </div>
                        <div class="moreSearch_form_box mt10 clearfix">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    购车
                                </div>
                                <select ng-model="whereForm.is_car">
                                    <option value="0" selected>不限</option>
                                    <option value="{{c.id}}" ng-repeat="c in car">{{c.name}}</option>
                                </select>
                            </label>
                        </div>
                        <div class="moreSearch_form_box mt10 clearfix">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    职业
                                </div>
                                <select ng-model="whereForm.occupation">
                                    <option value="0" selected>不限</option>
                                    <option ng-repeat="occupation in occupations track by occupation.id"
                                            value="{{occupation.id}}">{{occupation.name}}
                                    </option>
                                </select>
                            </label>
                        </div>
                        <div class="moreSearch_form_box mt10 clearfix">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    属相
                                </div>
                                <select ng-model="whereForm.zodiac">
                                    <option value="0" selected>不限</option>
                                    <option value="{{c.id}}" ng-repeat="c in zodiac">{{c.name}}</option>
                                </select>
                            </label>
                        </div>
                        <div class="moreSearch_form_box mt10 clearfix">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    星座
                                </div>
                                <select ng-model="whereForm.constellation">
                                    <option value="0" selected>不限</option>
                                    <option value="{{c.id}}" ng-repeat="c in constellation">{{c.name}}</option>
                                </select>
                            </label>
                        </div>
                        <div class="moreSearch_form_box mt10 clearfix">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    民族
                                </div>
                                <select ng-model="whereForm.nation">
                                    <option value="0" selected>不限</option>
                                    <option value="{{c.id}}" ng-repeat="c in nation">{{c.name}}</option>
                                </select>
                            </label>
                        </div>
                    </div>
                </div>
            </ion-content>
        </ion-modal-view>
    </script>
</ion-view>
