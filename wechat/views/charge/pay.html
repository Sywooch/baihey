<ion-content>
  正在跳转支付...
</ion-content>
<script type="text/javascript">
    function onBridgeReady() {
        WeixinJSBridge.invoke(
                'getBrandWCPayRequest', {!$param},
        function (res) {

            var xmlHttp;
            try{
                    // Firefox, Opera 8.0+, Safari
                xmlHttp = new XMLHttpRequest();
            }catch (e){
                // Internet Explorer
                try{
                    xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
                }catch (e){
                    try{
                        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
                    }catch(e){
                        return false;
                    }
                }
            }
            xmlHttp.open("POST", '/wap/charge/order-query?out_trade_no={!$orderId}}', false);
            xmlHttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xmlHttp.onreadystatechange = function(){
                if( xmlHttp.readyState == 4 && xmlHttp.status == 200 ){
                    blackWhiteList.checkedURLs.push(url); // 已经请求过的url，不在重复请求
                    var data = JSON.parse(JSON.parse(xmlHttp.responseText));
                    alert(data);
                }
            };
        }
    );
    }
    if (typeof WeixinJSBridge == "undefined") {
        if (document.addEventListener) {
            document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
        } else if (document.attachEvent) {
            document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
            document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
        }
    } else {
        onBridgeReady();
    }

</script>