<ion-content>
  正在跳转支付...
</ion-content>
<script type="text/javascript">
    function onBridgeReady() {
        WeixinJSBridge.invoke(
                'getBrandWCPayRequest', {!$param},
        function (res) {

            var xmlHttp = new XMLHttpRequest();

            xmlHttp.open("POST", '/wap/charge/order-query?out_trade_no={!$orderId}}', false);
            xmlHttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xmlHttp.onreadystatechange = function(){
                if( xmlHttp.readyState == 4 && xmlHttp.status == 200 ){
                    var data = JSON.parse(JSON.parse(xmlHttp.responseText));
                    alert(data);
                }
            };
        }
    );
    }
    if (typeof WeixinJSBridge == "undefined") {
        if (document.addEventListener) {
            document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
        } else if (document.attachEvent) {
            document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
            document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
        }
    } else {
        onBridgeReady();
    }

</script>